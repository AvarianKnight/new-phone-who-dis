{"version":3,"sources":["os/apps/icons lazy /^/.*$/ groupOptions: {} namespace object","apps/settings/hooks/useSettings.ts","os/phone/hooks/state.ts","os/sound/providers/SoundProvider.tsx","os/sound/hooks/useSoundProvider.tsx","os/sound/utils/getSoundSettings.ts","apps/settings/utils/getRingtonePath.ts","os/notifications/providers/NotificationsProvider.tsx","os/phone/hooks/usePhoneTheme.ts","ui/providers/SnackbarProvider.tsx","i18n.ts","../../typings/call.ts","ui/components/AppWrapper.tsx","ui/components/AppContent.tsx","os/call/hooks/state.ts","../../typings/contact.ts","os/call/hooks/useCall.ts","os/call/hooks/useTimer.ts","os/call/components/CallTimer.tsx","os/call/hooks/useCallModal.ts","ui/components/StatusIconButton.tsx","os/call/components/CallControls.tsx","apps/settings/utils/getBackgroundPath.ts","os/debug/LogDebugEvents.ts","utils/fetchNui.ts","utils/misc.ts","../../typings/phone.ts","apps/contacts/hooks/state.ts","apps/contacts/hooks/useContactActions.ts","os/call/components/CallContactContainer.tsx","os/call/components/RingingText.tsx","os/call/components/CallModal.tsx","ui/components/AppIcon.tsx","ui/components/GridMenu.tsx","os/notifications/hooks/useNotifications.tsx","os/apps/utils/createLazyAppIcon.tsx","ui/components/AppTitle.tsx","ui/components/List.tsx","ui/components/ListItem.tsx","os/simcard/hooks/state.ts","os/simcard/hooks/useSimcard.ts","apps/dialer/components/views/DialerHistory.tsx","apps/dialer/context/InputContext.tsx","apps/dialer/components/DialPadGrid.tsx","ui/components/Input.tsx","apps/dialer/components/DialerInput.tsx","common/hooks/useQueryParams.ts","apps/dialer/components/views/DialPage.tsx","apps/dialer/components/DialerNavBar.tsx","apps/dialer/hooks/state.ts","os/debug/InjectDebugData.ts","ui/components/SearchField.tsx","apps/contacts/components/List/SearchContacts.tsx","os/phone/hooks/useDebounce.ts","apps/contacts/components/List/ContactList.tsx","os/apps/utils/deepMergeObjects.ts","os/apps/utils/createAppThemeProvider.tsx","apps/dialer/dialer.theme.ts","apps/dialer/providers/DialerThemeProvider.tsx","apps/dialer/components/DialerApp.tsx","apps/dialer/hooks/useDialHistory.ts","ui/hooks/useSnackbar.ts","apps/contacts/components/views/ContactInfo.tsx","apps/contacts/components/views/ContactsPage.tsx","apps/contacts/contacts.theme.ts","apps/contacts/providers/ContactsThemeProvider.tsx","ui/components/LoadingSpinner.tsx","apps/contacts/components/ContactsApp.tsx","apps/calculator/hooks/useCalculator.tsx","os/phone/hooks/useClipboard.ts","apps/calculator/components/Calculator.tsx","apps/calculator/components/CalculatorApp.tsx","ui/components/ContextMenu.tsx","ui/hooks/useContextMenu.tsx","config/hooks/usePhoneConfig.ts","apps/settings/components/SettingItem.tsx","ui/components/DialogForm.tsx","apps/settings/components/WallpaperModal.tsx","../../typings/messages.ts","apps/settings/components/SettingsApp.tsx","apps/messages/components/modal/modal.styles.ts","apps/messages/components/form/NewMessageGroupForm.tsx","apps/messages/components/modal/MessageGroupModal.tsx","apps/messages/hooks/state.ts","apps/messages/hooks/useMessages.ts","apps/messages/components/list/MessageGroupItem.tsx","apps/messages/components/list/list.styles.ts","apps/messages/components/list/MessagesList.tsx","apps/messages/components/form/MessageInput.tsx","ui/components/Modal.tsx","common/utils/deleteQueryFromLocation.ts","ui/components/PictureResponsive.tsx","apps/messages/components/modal/MessageImageModal.tsx","ui/components/PictureReveal.tsx","apps/messages/components/modal/MessageBubble.tsx","apps/messages/components/modal/Conversation.tsx","apps/messages/components/modal/MessageSkeleton.tsx","apps/messages/components/modal/MessageSkeletonList.tsx","apps/messages/components/modal/MessageModal.tsx","apps/messages/components/form/NewMessageGroupButton.tsx","apps/messages/messages.theme.ts","apps/messages/providers/MessagesThemeProvider.tsx","apps/messages/components/MessagesApp.tsx","apps/match/match.theme.ts","apps/match/providers/MatchThemeProvider.tsx","apps/match/components/BottomNavigation.tsx","../../typings/match.ts","apps/match/hooks/state.ts","apps/match/components/Loader.tsx","apps/match/components/PageText.tsx","apps/match/utils/drag.ts","apps/match/components/Draggable.tsx","apps/match/components/StatusDisplay.tsx","apps/match/components/profile/Profile.tsx","apps/match/components/ActiveProfile.tsx","apps/match/components/views/MatchPage.tsx","apps/match/hooks/useProfiles.ts","apps/match/hooks/useProfile.ts","ui/components/ProfileField.tsx","ui/components/UpdateButton.tsx","os/phone/hooks/usePhone.ts","apps/match/components/profile/ProfileForm.tsx","apps/match/components/views/ProfileEditor.tsx","apps/match/components/matches/Match.tsx","apps/match/components/views/MatchList.tsx","apps/match/hooks/useMatches.ts","apps/match/components/MatchApp.tsx","apps/twitter/hooks/state.ts","apps/twitter/utils/constants.ts","apps/twitter/hooks/useTwitterNotifications.ts","apps/twitter/utils/time.ts","../../typings/twitter.ts","apps/twitter/components/buttons/LikeButton.tsx","apps/twitter/components/buttons/ReplyButton.tsx","apps/twitter/components/images/Image.tsx","apps/twitter/components/images/ImageDisplay.tsx","apps/twitter/components/Avatar.tsx","apps/twitter/components/buttons/RetweetButton.tsx","apps/twitter/components/tweet/Retweet.tsx","apps/twitter/components/buttons/ReportButton.tsx","apps/twitter/components/tweet/ShowMore.tsx","apps/twitter/components/tweet/Tweet.tsx","apps/twitter/components/tweet/TweetSkeleton.tsx","apps/twitter/components/tweet/TweetSkeletonList.tsx","apps/twitter/components/tweet/TweetList.tsx","apps/twitter/components/tweet/TweetListContainer.tsx","apps/twitter/hooks/useTweets.ts","apps/twitter/utils/images.ts","apps/twitter/hooks/useModal.ts","apps/twitter/components/EmojiSelect.tsx","apps/twitter/components/images/ImagePrompt.tsx","apps/twitter/utils/message.ts","apps/twitter/components/tweet/TweetMessage.tsx","ui/components/StatusButton.tsx","apps/twitter/components/buttons/ControlButtons.tsx","apps/twitter/components/buttons/IconButtons.tsx","apps/twitter/components/AddTweetModal.tsx","common/utils/isImageValid.ts","apps/twitter/components/buttons/TweetButton.tsx","apps/twitter/components/TwitterTitle.tsx","apps/twitter/components/BottomNavigation.tsx","apps/twitter/hooks/useProfile.ts","apps/twitter/components/buttons/ProfileUpdateButton.tsx","apps/twitter/components/profile/Profile.tsx","apps/twitter/components/buttons/SearchButton.tsx","apps/twitter/components/TwitterSearch.tsx","apps/twitter/hooks/useFilteredTweets.ts","apps/twitter/components/profile/DefaultProfilePrompt.tsx","apps/twitter/components/profile/ProfilePrompt.tsx","apps/twitter/twitter.theme.ts","apps/twitter/providers/TwitterThemeProvider.tsx","apps/twitter/components/TwitterApp.tsx","apps/example/hooks/state.ts","apps/example/providers/ExampleThemeProvider.tsx","apps/example/example.theme.ts","os/sound/hooks/useSound.ts","../../typings/marketplace.ts","../../typings/notes.ts","apps/marketplace/hooks/state.ts","apps/marketplace/components/MarketplaceList/ListingActions.tsx","apps/marketplace/components/MarketplaceList/MarketplaceItem.tsx","apps/marketplace/components/MarketplaceList/MarketplaceList.tsx","apps/marketplace/components/MarketplaceList/MarketplaceListContainer.tsx","apps/marketplace/components/navigation/NavigationBar.tsx","apps/marketplace/components/form/ListingForm.tsx","apps/marketplace/components/form/ListingFormContainer.tsx","apps/marketplace/marketplace.theme.ts","apps/marketplace/providers/MarketplaceThemeProvider.tsx","apps/marketplace/components/MarketplaceApp.tsx","apps/notes/utils/constants.ts","../../typings/photo.ts","apps/notes/hooks/state.ts","apps/notes/list/NoteList.tsx","apps/notes/modal/modal.styles.ts","apps/notes/hooks/useNotesActions.ts","apps/notes/modal/NoteModal.tsx","apps/notes/notes.styles.ts","apps/notes/notes.theme.ts","apps/notes/providers/NotesThemeProvider.tsx","apps/notes/NotesApp.tsx","apps/camera/components/grid/grid.styles.ts","apps/camera/hooks/state.ts","apps/camera/components/grid/GalleryGrid.tsx","apps/camera/hooks/useCamera.ts","common/utils/addQueryToLocation.ts","common/utils/getLocationFromUrl.ts","apps/camera/components/modal/modal.styles.ts","apps/camera/components/modal/ShareModal.tsx","apps/camera/components/modal/GalleryModal.tsx","apps/camera/components/CameraApp.tsx","os/apps/components/AppWithStartup.tsx","os/apps/components/AppRoute.tsx","os/apps/config/apps.tsx","os/apps/hooks/useApps.tsx","apps/home/components/Home.tsx","os/notifications/components/NotificationItem.tsx","os/phone/hooks/usePhoneTime.ts","os/notifications/components/NotificationBar.tsx","os/navigation-bar/components/Navigation.tsx","os/simcard/hooks/useSimcardService.ts","apps/twitter/hooks/useTwitterService.ts","../../typings/bank.ts","apps/marketplace/hooks/useMarketplaceActions.ts","apps/bank/hooks/state.ts","apps/bank/hooks/useBankService.ts","apps/messages/hooks/useMessageService.ts","apps/messages/hooks/useMessageNotifications.ts","os/call/components/CallNotification.tsx","os/call/hooks/useCallNotifications.tsx","os/sound/hooks/useRingtoneSound.ts","ui/components/Alert.tsx","ui/components/PhoneSnackbar.tsx","os/notifications/components/NotificationAlert.tsx","ui/components/WindowSnackbar.tsx","os/keyboard/hooks/useKeyboardService.ts","apps/settings/utils/isDefaultWallpaper.ts","PhoneWrapper.tsx","os/phone/hooks/usePhoneVisibility.ts","os/notifications/notifications.constants.ts","Phone.tsx","os/phone/hooks/usePhoneService.ts","apps/match/hooks/useMatchService.ts","apps/marketplace/hooks/useMarketplaceService.ts","apps/camera/hooks/usePhotoService.ts","os/call/hooks/useCallService.tsx","apps/dialer/hooks/useDialService.ts","os/debug/AttachMockNuiEvent.ts","index.tsx","PhoneProviders.tsx"],"names":["map","webpackAsyncContext","req","__webpack_require__","o","Promise","resolve","then","e","Error","code","ids","id","keys","Object","module","exports","NPWD_STORAGE_KEY","v","addSchema","type","properties","name","custom","required","label","val","$ref","settingsSchema","iconSet","language","wallpaper","frame","theme","zoom","streamerMode","ringtone","ringtoneVol","notiSound","notiSoundVol","TWITTER_notiFilter","TWITTER_notiSound","TWITTER_notifyNewFeedTweet","key","settingsState","default","defaultSettings","effects_UNSTABLE","setSelf","onSet","savedVal","localStorage","getItem","schema","storedSettings","JSON","parse","validate","valid","isSchemaValid","console","error","newValue","removeItem","setItem","stringify","customWallpaperState","useSettings","useCustomWallpaperModal","customWallpaperModal","setCustomWallpaperModal","phoneState","visibility","resourceConfig","phoneTime","soundContext","SoundProvider","children","soundRefs","current","Map","mount","url","volume","loop","autoplay","res","find","get","howl","play","instance","src","set","once","onError","_id","sound","fadedSounds","forEach","ref","isCurrent","isPlaying","playing","isLoop","push","currVol","fade","undefined","s","stop","remove","unload","delete","isMounted","Provider","value","useSoundProvider","getPath","getSoundSettings","settings","app","NotificationsContext","NotificationsProvider","isPhoneOpen","barUncollapsed","setBarUncollapsed","notifications","setNotifications","alertTimeout","alerts","setAlerts","currentAlert","setCurrentAlert","keepWhenPhoneClosed","updateNotification","idx","all","updated","splice","addNotification","hasAppNotification","appId","findIndex","n","hasNotification","_showAlert","cb","soundUrl","onExit","clearTimeout","onClickAlert","onClick","onCloseAlert","onClose","setTimeout","DEFAULT_ALERT_HIDE_TIME","length","curr","newQueue","shift","icons","reduce","i","badge","unshift","icon","notificationIcon","removeAlerts","removeNotification","updateId","removeId","filter","addNotificationAlert","count","usePhoneTheme","createMuiTheme","SnackbarContext","open","setOpen","alert","setAlert","addAlert","handleClose","isOpen","resources","en","es","fr","ba","no","sv","tr","ptbr","pt","hu","use","init","lng","defaultLanguage","react","bindI18n","keySeparator","interpolation","escapeValue","CallRejectReasons","CallEvents","AppWrapper","style","props","padding","margin","width","height","display","position","flexDirection","minHeight","useStyles","makeStyles","wrapper","flex","box","backdrop","zIndex","paper","AppContent","paperStyle","onClickBackdrop","classes","Paper","className","square","overflow","Backdrop","Box","flexGrow","elevation","callerState","currentCall","callModal","callDuration","ms","m","h","ContactEvents","useCall","Nui","call","setCall","acceptCall","send","ACCEPT_CALL","transmitterNumber","transmitter","rejectCall","REJECTED","phoneNumber","endCall","END_CALL","intervalRef","seconds","setSeconds","clearIntervalRef","clearInterval","startTimer","setInterval","prevSeconds","secs","totalSeconds","Math","ceil","hours","floor","minutes","getTimeFromSeconds","resetTimer","formatTime","time","CallTimer","Typography","variant","useCallModal","modal","setModal","root","color","palette","contrastText","backgroundColor","main","light","outlined","border","action","disabled","contained","dark","StatusIconButton","size","IconButton","secondary","boxShadow","iconWrapper","smallIconWrapper","CallControls","isSmall","history","accepted","isTransmitter","justifyContent","px","my","stopPropagation","alignItems","bg","event","logLevel","level","debug","printDebugLogs","group","dir","data","groupEnd","fetchNui","eventName","options","method","headers","body","resourceName","window","GetParentResourceName","fetch","json","PhoneEvents","ErrorStringKeys","contactsState","contacts","GET_CONTACTS","resp","filterInput","filteredContacts","filterInputVal","regExp","RegExp","contact","match","number","useContactActions","setContacts","getDisplayByNumber","found","getPictureByNumber","avatar","getContactByNumber","getContact","deleteContact","curContacts","addContact","updateContact","updatedContact","targetContactIndex","newContactsArray","image","t","useTranslation","getDisplayOrNumber","receiver","toUpperCase","Avatar","alt","text","setText","step","setStep","backdropFilter","CallModal","backgroundImage","marginTop","spacing","shadows","fontSize","typography","h4","tooltip","nameLocale","Icon","notification","green","Tooltip","arrow","title","placement","TransitionComponent","Zoom","Button","Badge","badgeContent","invisible","GridMenu","items","Component","xs","Grid","container","direction","item","textAlign","to","path","useNotifications","context","createLazyAppIcon","fallback","useStyle","background","primary","AppTitle","paragraph","simcardState","useSimcard","callForward","success","callBack","DialerHistory","calls","myNumber","handleCall","INITIALIZE_CALL","disablePadding","divider","ListItemIcon","ListItemText","unix","parseInt","start","paddingTop","role","DialInputCtx","gridItem","h5","ButtonItem","fullWidth","add","removeOne","clear","justify","PHONE_NUMBER_REGEX","useToggleFocus","keepGameFocus","TOGGLE_KEYS","toggleKeys","onFocus","onBlur","paddingBottom","paddingLeft","paddingRight","input","h6","iconBtn","DialerInput","inputVal","component","placeholder","onChange","target","replace","useQueryParams","defaultValues","query","search","ignoreQueryPrefix","queryNumber","setInputVal","slice","pathname","page","setPage","BottomNavigation","_e","newPage","showLabels","BottomNavigationAction","dialState","events","timer","textFieldInput","inputRoot","fontWeight","borderColor","inputInput","transition","transitions","create","borderLeft","borderRadius","shape","marginLeft","searchIcon","pointerEvents","DEFAULT_PROPS","SearchField","inputProps","SearchContacts","setFilterVal","debouncedVal","delay","debouncedValue","setDebouncedValue","handler","useDebounce","ContactList","List","ListItem","ListItemAvatar","contactId","isObject","Array","isArray","deepMergeObjects","sources","source","assign","createAppThemeProvider","phoneTheme","mergedTheme","ThemeProvider","DIALER_APP_PRIMARY_COLOR","DIALER_APP_TEXT_COLOR","common","white","DialerThemeProvider","LoadingSpinner","CircularProgress","DialerApp","OPEN_APP_DAILER","dialer","useApp","exact","Suspense","SET_CALL_HISTORY","useSnackbar","listContainer","marginBottom","referal","addNumber","setName","setNumber","setAvatar","goBack","autoFocus","py","UPDATE_CONTACT","status","message","DELETE_CONTACT","ADD_CONTACT","serverResp","ContactPage","CONTACTS_APP_PRIMARY_COLOR","blue","CONTACTS_APP_TEXT_COLOR","ContactsThemeProvider","absolute","right","bottom","ContactsApp","Fab","initialState","op","num1","num2","num3","Reducer","state","payload","includes","CalcButton","button","setClipboard","clipElem","document","createElement","appendChild","select","execCommand","removeChild","result","h2","textOverflow","copyFab","top","left","Calculator","dispatch","getPayload","a","b","Number","buttonProps","operator","sym","clearAll","equals","zero","dot","multiplier","adder","substractor","one","two","three","four","five","six","seven","eight","nine","useCalculator","resultStr","toLocaleString","minimumFractionDigits","maximumFractionDigits","p","content","CalculatorApp","calculator","borderTop","_options","Slide","in","mountOnEnter","unmountOnExit","option","selected","description","MapSettingItem","configState","SettingItem","SettingItemSlider","onCommit","ListItemSecondaryAction","Slider","defaultValue","min","max","valueLabelDisplay","onChangeCommitted","SettingSwitch","Switch","checked","SettingItemIconAction","handleAction","actionIcon","labelSecondary","actionLabel","edge","flexFlow","displayBlock","displayNone","DialogForm","onSubmit","showHideClassName","DialogTitle","DialogContent","DialogContentText","DialogActions","WallpaperModal","setSettings","setValue","isImageAndUrl","test","handleSettingChange","currentTarget","MessageEvents","SubHeaderComp","ListSubheader","disableSticky","backgroundModal","opacity","SettingsApp","settingsApp","config","_setConfig","oldConfig","usePhoneConfig","simcard","resetSettings","iconSets","wallpapers","frames","themes","zoomOptions","ringtones","notiSounds","twitterNotifications","twitterNotificationFilters","notiFilters","languages","resetSettingsOpts","customWallpaper","setOptions","opts","useContextMenu","openMenu","closeMenu","ContextMenu","isMenuOpen","subheader","LibraryMusic","VolumeUp","Book","Brush","Wallpaper","Smartphone","ZoomIn","FilterList","DeleteForever","modalRoot","overflowY","modalHide","conversationHeader","conversationContainer","overflowAutoY","overflowX","groupdisplay","whiteSpace","largeGroupDisplay","messagesInput","participants","setParticipants","setLabel","isGroupChat","handleSubmit","phoneNumbers","labelValue","trim","CREATE_MESSAGE_GROUP","onAutocompleteChange","lastIdx","submitDisabled","Autocomplete","multiple","freeSolo","autoHighlight","getOptionLabel","c","renderInput","params","onKeyPress","preventDefault","messageState","messageGroups","messages","activeMessageGroup","showNewMessageGroup","createMessageGroupResult","imageModal","unreadMessagesCount","setMessages","_setActiveMessageGroup","getMessageGroupById","groupId","setCreateMessageGroupResult","setActiveMessageGroup","clearMessageGroupResult","goToConversation","messageGroup","FETCH_MESSAGES","handleClick","hasUnread","unreadCount","groupDisplay","searchValue","setSearchValue","formattedSearch","toLowerCase","filteredGroups","displayIncludes","findGroup","messageGroupId","onAddImageClick","setMessage","SEND_MESSAGE","pl","multiline","imageModalCloseButton","visible","deleteQueryFromLocation","location","objectFit","PictureResponsive","MessageImageModal","queryParamImagePreview","setQueryParamImagePreview","removeQueryParamImage","sendImageMessage","sendFromQueryParam","menuOptions","encodeURIComponent","cover","cursor","getContrastText","PictureReveal","covered","setCovered","ready","setReady","mySms","float","minWidth","maxWidth","sms","wordBreak","MessageBubble","onClickDisplay","isMine","Link","phone_number","CONVERSATION_ELEMENT_ID","imageModalOpen","setImageModalOpen","referalImage","messageGroupName","skeleton","transform","MessageSkeleton","Skeleton","memberDisplay","MessageModal","isLoaded","setLoaded","groupActionsOpen","setGroupActionsOpen","element","getElementById","scrollTop","scrollHeight","SET_MESSAGE_READ","header","truncatedHeader","headerClass","handleAddContact","exists","targetNumber","MESSAGES_APP_PRIMARY_COLOR","amber","MESSAGES_APP_TEXT_COLOR","MessagesThemeProvider","MessagesApp","FETCH_MESSAGE_GROUPS","FETCH_MESSAGE_GROUPS_SUCCESS","updatedAt","Date","now","FETCH_MESSAGES_SUCCESS","user_identifier","isRead","MATCH_APP_PRIMARY_COLOR","MATCH_APP_TEXT_COLOR","MatchThemeProvider","red","MatchEvents","activePage","handleChange","matchState","profiles","errorLoadingProfiles","matches","errorLoadingMatches","myProfile","noProfileExists","progress","maxRotationDeg","onDrag","onDrop","onMouseMove","x","clientX","y","clientY","deltaX","deltas","_onMouseMove","onMouseUp","_onMouseUp","initialX","initialY","mouseDownInitialX","mouseDownInitialY","updatedX","updatedY","mouseDownX","mouseDownY","onMouseDown","onmouseup","onmousemove","offsetTop","offsetLeft","useRotation","pctWidth","rotationDeg","webkitTransform","cleanup","deltaY","this","clientWidth","onmousedown","like","nope","elementRef","drag","LikeorDislikeDraggableElement","tags","tag","media","profile","bioSecondary","job","parseSecondaryBio","CardContent","tagList","Chip","CardMedia","gutterBottom","lastActive","lastActiveFormatted","bio","statusVisible","statusNull","buttons","DECISION_THRESHOLD_X_px","onSwipe","setStatus","statusRef","idRef","isLiked","notLiked","likeClass","nopeClass","hasDecision","Card","raised","setProfiles","filteredProfiles","viewed","activeProfile","setViewed","liked","SAVE_LIKES","useProfiles","loaded","useProfile","setProfile","formContainer","textField","ProfileField","allowChange","inputRef","defaultProps","loading","minimumLoadPassed","setMimimumLoadPassed","timeout","isLoading","usePhone","ResourceConfig","closePhone","CLOSE_PHONE","openPhone","OPEN_PHONE","card","spacer","showPreview","setImage","setBio","setJob","setLocation","setTags","update","split","allowEditableProfileName","UpdateButton","updatedProfile","join","UPDATE_MY_PROFILE","CREATE_MY_PROFILE","switch","setShowPreview","FormControlLabel","control","preview","showProfile","setShowProfile","secondaryText","matchedAt","matchedAtFormatted","show","GET_MATCHES","MatchApp","setActivePage","INITIALIZE","GET_PROFILES_SUCCESS","createdAt","GET_MY_PROFILE_SUCCESS","GET_MATCHES_SUCCESS","twitterState","defaultProfileNames","tweets","filteredTweets","showCreateTweetModal","modalMessage","createTweetLoading","createTweetSuccessful","updateProfileLoading","updateProfileSuccess","unreadTweetsCount","IMG_DEFAULT_AVATAR","APP_TWITTER","NOTIFICATION_ID","isMentioned","profileName","useTwitterNotifications","setUnreadCount","setNotification","profile_name","titleStr","currentProfileName","newCount","ONE_HOUR","secondsToHumanReadable","TwitterEvents","tweetId","setLiked","setLoading","TOGGLE_LIKE","setModalVisible","imageContainer","imgButton","link","ImageDisplay","images","removeImage","small","img","avatarUrl","showInvalidImage","showImageError","setShowImageError","twitter","enableAvatars","onLoad","iconFilled","RetweetButton","isRetweet","retweetId","retweeted","setRetweeted","idToRetweet","RETWEET","Repeat","isReported","MenuItem","REPORT","anchorEl","setAnchorEl","allowedToDelete","allowDeleteTweets","allowedToReport","allowReportTweets","_handleClick","marginRight","Menu","keepMounted","Boolean","transformOrigin","vertical","horizontal","DELETE_TWEET","date","buttonContainer","tweet","avatar_url","retweetProfileName","retweetAvatarUrl","seconds_since_tweet","enableImages","formattedMessage","sanitizedMessage","sanitize","ALLOWED_TAGS","formattedProfileName","dangerouslySetInnerHTML","__html","TweetSkeleton","Divider","FETCH_TWEETS","IMAGE_DELIMITER","useModal","modalVisible","onEmojiClick","useTheme","textFieldRef","focus","handleImageChange","getNewLineCount","maxHeight","textFieldInputRef","characterLimit","newLineLimit","_handleChange","errorMessage","overCharacterLimit","characterWarningPrompt","overNewLineLimit","newLineWarningPrompt","helperText","hoverOpacity","StatusButton","close","showImagePrompt","showEmoji","onCloseClick","onPrimaryClick","primaryButtonText","showCloseButton","onImageClick","enableEmojis","buttonsContainer","emojiPicker","setShowEmoji","setShowImagePrompt","setLink","setImages","_handleClose","handleimageChange","handleMessageChange","toggleShowImagePrompt","toggleShowEmoji","emojiObject","concat","native","maxImages","cleanedLink","uuid","rej","Image","onerror","onload","isImageValid","catch","cleanedMessage","isValidMessage","CREATE_TWEET","openModal","updateProfileSuccessful","setUpdateProfileSuccessful","handleAvatarChange","handleNameChange","handleBioChange","handleLocationChange","handleJobChange","UPDATE_PROFILE","searchContainer","setTweets","useFilteredTweets","SearchButton","cleanedSearchValue","FETCH_TWEETS_FILTERED","formControl","setProfileName","handleUpdate","FormControl","InputLabel","htmlFor","Select","showDefaultProfileNames","CREATE_PROFILE","TWITTER_APP_PRIMARY_COLOR","TWITTER_APP_TEXT_COLOR","TwitterThemeProvider","TwitterApp","promptProfileName","showTweetButton","GET_OR_CREATE_PROFILE","isRetweetedByPlayer","updateAt","likes","CREATE_TWEET_BROADCAST","profile_id","MarketplaceEvents","NotesEvents","listingState","FETCH_LISTING","ListingActions","listing","DELETE_LISTING","REPORT_LISTING","listingId","listingContent","overflowWrap","wordWrap","MarketplaceItem","MarketplaceList","listings","MarketplaceListContainer","NavigationBar","AddCircle","multilineFieldInput","postButton","ListingForm","setTitle","setUrl","setDescription","handleChooseImage","maxLength","InputLabelProps","shrink","rows","ADD_LISTING","ListingFormContainer","SELLOUT_APP_PRIMARY_COLOR","SELLOUT_APP_ICON_COLOR","SELLOUT_APP_TEXT_COLOR","black","MarketplaceThemeProvider","MarketplaceApp","marketplaceApp","PhotoEvents","noteStates","noteItems","FETCH_ALL_NOTES","selectedNote","useSetSelectedNote","noNotes","notes","setNote","note","handleNoteModal","inputPropsTitle","inputPropsContent","lineHeight","useNotesActions","setNotes","deleteNote","curNotes","addNote","updateNote","targetIndex","storedNote","newNotesArray","NoteModal","setSelectedNote","noteTitle","setNoteTitle","noteContent","setNoteContent","isNewNote","Container","startIcon","rowsMax","ADD_NOTE","DELETE_NOTE","NOTES_APP_PRIMARY_COLOR","yellow","NOTES_APP_ICON_COLOR","NOTES_APP_TEXT_COLOR","NotesThemeProvider","NotesApp","notesApp","photo","backgroundPosition","backgroundRepeat","backgroundSize","photoState","photos","GalleryGrid","decodeURIComponent","setPhotos","isUploading","setUploading","onPhotoSuccess","onPhotoError","i18nKey","_takePhoto","TAKE_PHOTO","UPLOAD_PHOTO","takePhoto","useCamera","handlePhotoOpen","addQueryToLocation","getLocationFromUrl","flexWrap","alignContent","actionDiv","shareModal","innerShareModal","ShareModal","meta","GalleryModal","shareOpen","setShareOpen","handleSharePhoto","DELETE_PHOTO","SEND_PHOTOS","AppWithStartup","emitOnOpen","AppRoute","rest","render","APPS","Route","purple","grey","useApps","curIconSet","apps","SvgIcon","lazy","AppIcon","NotificationIcon","htmlColor","getApp","HomeApp","mt","closeNotifBtn","notificationItem","NotificationItem","onClickClose","cantClose","drawer","collapseBtn","NotificationBar","wrap","notifIcon","cellProvider","Navigation","isExact","SET_NUMBER","processTweet","BankEvents","useTwitterService","setUpdateProfileLoading","currentTweets","setFilteredTweets","setCreateLoading","setDefaultProfileNames","handleAddAlert","GET_OR_CREATE_PROFILE_NULL","CREATE_PROFILE_RESULT","UPDATE_PROFILE_LOADING","UPDATE_PROFILE_RESULT","CREATE_TWEET_LOADING","CREATE_TWEET_RESULT","updatedTweets","processedTweet","identifier","processBroadcastedTweet","RETWEET_EXISTS","useMarketplaceActions","setListings","deleteListing","curListings","addListing","bankState","transactions","bankModal","bankCredentials","useMessagesService","setMessageGroups","listen","useMessageNotifications","handleMessageBroadcast","_setMessageGroups","groups","g","CREATE_MESSAGE_GROUP_SUCCESS","CREATE_MESSAGE_GROUP_FAILED","CREATE_MESSAGE_BROADCAST","ACTION_RESULT","controls","CallNotification","useCallNotifications","useRingtoneSound","callNotificationBase","active","msg","PhoneSnackbar","Snackbar","autoHideDuration","severity","snackbar","alertContent","NotificationAlert","Alert","AlertTitle","setSeverity","reload","keyboardState","ArrowRight","ArrowLeft","ArrowUp","ArrowDown","Backspace","Enter","Escape","validKeys","useKeyboardService","handlers","setEscape","setBackspace","onKeyUp","callback","indexOf","isKeyValid","addEventListener","removeEventListener","backspaceHandler","nodeName","isDefaultWallpaper","setVisibility","notifVisibility","setNotifVisibility","notificationTimer","usePhoneVisibility","enter","exit","i18n","changeLanguage","localStore","parsedSettings","isSettingsSchemaValid","setResourceConfig","setPhoneTime","SET_VISIBILITY","SET_CONFIG","SET_TIME","usePhoneService","useSimcardService","setNoProfileExists","setMatches","setErrorLoadingMatches","setErrorLoadingProfiles","formatProfile","format","_setProfile","_handleUpdateProfile","GET_PROFILES_FAILED","GET_MY_PROFILE_FAILED","GET_MATCHES_FAILED","SAVE_LIKES_FAILED","NEW_MATCH","UPDATE_MY_PROFILE_SUCCESS","UPDATE_MY_PROFILE_FAILED","CREATE_MY_PROFILE_SUCCESS","CREATE_MY_PROFILE_FAILED","useMatchService","addListingHandler","deleteListingHandler","BROADCAST_ADD","BROADCAST_DELETE","useMarketplaceService","setTransaction","setCredentials","SEND_TRANSFERS","SEND_CREDENTIALS","SEND_ALERT","SEND_NOTIFICATION","useBankService","usePhotoService","modalHasBeenOpenedThisCall","setModalOpened","SET_CALLER","_call","SET_CALL_MODAL","useCallService","setHistory","useDialService","App","SET_PHONE_READY","extend","SentryErrorMetrics","dsn","autoSessionTracking","integrations","BrowserTracing","tracesSampleRate","currentTheme","resource"],"mappings":"gGAAA,IAAIA,EAAM,CACT,sBAAuB,CACtB,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,4BAA6B,CAC5B,IACA,IAED,gCAAiC,CAChC,IACA,IAED,wBAAyB,CACxB,IACA,GAED,4BAA6B,CAC5B,IACA,GAED,0BAA2B,CAC1B,IACA,GAED,8BAA+B,CAC9B,IACA,GAED,wBAAyB,CACxB,IACA,IAED,4BAA6B,CAC5B,IACA,IAED,uBAAwB,CACvB,IACA,GAED,2BAA4B,CAC3B,IACA,GAED,yBAA0B,CACzB,IACA,GAED,6BAA8B,CAC7B,IACA,GAED,6BAA8B,CAC7B,IACA,IAED,iCAAkC,CACjC,IACA,IAED,uBAAwB,CACvB,IACA,GAED,2BAA4B,CAC3B,IACA,GAED,0BAA2B,CAC1B,IACA,IAED,8BAA+B,CAC9B,IACA,IAED,uBAAwB,CACvB,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,8BAA+B,CAC9B,IACA,IAED,yBAA0B,CACzB,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,iCAAkC,CACjC,IACA,IAED,sBAAuB,CACtB,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,4BAA6B,CAC5B,IACA,IAED,gCAAiC,CAChC,IACA,IAED,wBAAyB,CACxB,IACA,GAED,4BAA6B,CAC5B,IACA,GAED,0BAA2B,CAC1B,IACA,GAED,8BAA+B,CAC9B,IACA,GAED,wBAAyB,CACxB,IACA,IAED,4BAA6B,CAC5B,IACA,IAED,uBAAwB,CACvB,IACA,GAED,2BAA4B,CAC3B,IACA,GAED,yBAA0B,CACzB,IACA,GAED,6BAA8B,CAC7B,IACA,GAED,6BAA8B,CAC7B,IACA,IAED,iCAAkC,CACjC,IACA,IAED,uBAAwB,CACvB,IACA,GAED,2BAA4B,CAC3B,IACA,GAED,0BAA2B,CAC1B,IACA,IAED,8BAA+B,CAC9B,IACA,IAED,uBAAwB,CACvB,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,8BAA+B,CAC9B,IACA,IAED,yBAA0B,CACzB,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,wBAAyB,CACxB,IACA,IAED,4BAA6B,CAC5B,IACA,IAED,8BAA+B,CAC9B,IACA,IAED,kCAAmC,CAClC,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,8BAA+B,CAC9B,IACA,IAED,4BAA6B,CAC5B,IACA,IAED,gCAAiC,CAChC,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,8BAA+B,CAC9B,IACA,IAED,yBAA0B,CACzB,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,+BAAgC,CAC/B,IACA,IAED,+BAAgC,CAC/B,IACA,IAED,mCAAoC,CACnC,IACA,IAED,yBAA0B,CACzB,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,4BAA6B,CAC5B,IACA,IAED,gCAAiC,CAChC,IACA,IAED,yBAA0B,CACzB,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,4BAA6B,CAC5B,IACA,IAED,gCAAiC,CAChC,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,+BAAgC,CAC/B,IACA,IAED,wBAAyB,CACxB,IACA,IAED,4BAA6B,CAC5B,IACA,IAED,8BAA+B,CAC9B,IACA,IAED,kCAAmC,CAClC,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,8BAA+B,CAC9B,IACA,IAED,4BAA6B,CAC5B,IACA,IAED,gCAAiC,CAChC,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,8BAA+B,CAC9B,IACA,IAED,yBAA0B,CACzB,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,+BAAgC,CAC/B,IACA,IAED,yBAA0B,CACzB,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,4BAA6B,CAC5B,IACA,IAED,gCAAiC,CAChC,IACA,IAED,yBAA0B,CACzB,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,+BAAgC,CAC/B,IACA,IAED,4BAA6B,CAC5B,IACA,IAED,gCAAiC,CA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","file":"static/js/main.1535587d.chunk.js","sourcesContent":["var map = {\n\t\"./material/app/BANK\": [\n\t\t420,\n\t\t14\n\t],\n\t\"./material/app/BANK.tsx\": [\n\t\t420,\n\t\t14\n\t],\n\t\"./material/app/CALCULATOR\": [\n\t\t421,\n\t\t20\n\t],\n\t\"./material/app/CALCULATOR.tsx\": [\n\t\t421,\n\t\t20\n\t],\n\t\"./material/app/CAMERA\": [\n\t\t422,\n\t\t0\n\t],\n\t\"./material/app/CAMERA.tsx\": [\n\t\t422,\n\t\t0\n\t],\n\t\"./material/app/CONTACTS\": [\n\t\t423,\n\t\t2\n\t],\n\t\"./material/app/CONTACTS.tsx\": [\n\t\t423,\n\t\t2\n\t],\n\t\"./material/app/DIALER\": [\n\t\t424,\n\t\t24\n\t],\n\t\"./material/app/DIALER.tsx\": [\n\t\t424,\n\t\t24\n\t],\n\t\"./material/app/EMAIL\": [\n\t\t425,\n\t\t4\n\t],\n\t\"./material/app/EMAIL.tsx\": [\n\t\t425,\n\t\t4\n\t],\n\t\"./material/app/EXAMPLE\": [\n\t\t426,\n\t\t8\n\t],\n\t\"./material/app/EXAMPLE.tsx\": [\n\t\t426,\n\t\t8\n\t],\n\t\"./material/app/MARKETPLACE\": [\n\t\t427,\n\t\t12\n\t],\n\t\"./material/app/MARKETPLACE.tsx\": [\n\t\t427,\n\t\t12\n\t],\n\t\"./material/app/MATCH\": [\n\t\t428,\n\t\t6\n\t],\n\t\"./material/app/MATCH.tsx\": [\n\t\t428,\n\t\t6\n\t],\n\t\"./material/app/MESSAGES\": [\n\t\t429,\n\t\t10\n\t],\n\t\"./material/app/MESSAGES.tsx\": [\n\t\t429,\n\t\t10\n\t],\n\t\"./material/app/NOTES\": [\n\t\t430,\n\t\t22\n\t],\n\t\"./material/app/NOTES.tsx\": [\n\t\t430,\n\t\t22\n\t],\n\t\"./material/app/SETTINGS\": [\n\t\t431,\n\t\t16\n\t],\n\t\"./material/app/SETTINGS.tsx\": [\n\t\t431,\n\t\t16\n\t],\n\t\"./material/app/TWITTER\": [\n\t\t432,\n\t\t18\n\t],\n\t\"./material/app/TWITTER.tsx\": [\n\t\t432,\n\t\t18\n\t],\n\t\"./material/misc/StickyNote\": [\n\t\t419,\n\t\t25\n\t],\n\t\"./material/misc/StickyNote.tsx\": [\n\t\t419,\n\t\t25\n\t],\n\t\"./material/svg/BANK\": [\n\t\t433,\n\t\t15\n\t],\n\t\"./material/svg/BANK.tsx\": [\n\t\t433,\n\t\t15\n\t],\n\t\"./material/svg/CALCULATOR\": [\n\t\t434,\n\t\t21\n\t],\n\t\"./material/svg/CALCULATOR.tsx\": [\n\t\t434,\n\t\t21\n\t],\n\t\"./material/svg/CAMERA\": [\n\t\t435,\n\t\t1\n\t],\n\t\"./material/svg/CAMERA.tsx\": [\n\t\t435,\n\t\t1\n\t],\n\t\"./material/svg/CONTACTS\": [\n\t\t436,\n\t\t3\n\t],\n\t\"./material/svg/CONTACTS.tsx\": [\n\t\t436,\n\t\t3\n\t],\n\t\"./material/svg/DIALER\": [\n\t\t437,\n\t\t26\n\t],\n\t\"./material/svg/DIALER.tsx\": [\n\t\t437,\n\t\t26\n\t],\n\t\"./material/svg/EMAIL\": [\n\t\t438,\n\t\t5\n\t],\n\t\"./material/svg/EMAIL.tsx\": [\n\t\t438,\n\t\t5\n\t],\n\t\"./material/svg/EXAMPLE\": [\n\t\t439,\n\t\t9\n\t],\n\t\"./material/svg/EXAMPLE.tsx\": [\n\t\t439,\n\t\t9\n\t],\n\t\"./material/svg/MARKETPLACE\": [\n\t\t440,\n\t\t13\n\t],\n\t\"./material/svg/MARKETPLACE.tsx\": [\n\t\t440,\n\t\t13\n\t],\n\t\"./material/svg/MATCH\": [\n\t\t441,\n\t\t7\n\t],\n\t\"./material/svg/MATCH.tsx\": [\n\t\t441,\n\t\t7\n\t],\n\t\"./material/svg/MESSAGES\": [\n\t\t442,\n\t\t11\n\t],\n\t\"./material/svg/MESSAGES.tsx\": [\n\t\t442,\n\t\t11\n\t],\n\t\"./material/svg/NOTES\": [\n\t\t443,\n\t\t23\n\t],\n\t\"./material/svg/NOTES.tsx\": [\n\t\t443,\n\t\t23\n\t],\n\t\"./material/svg/SETTINGS\": [\n\t\t444,\n\t\t17\n\t],\n\t\"./material/svg/SETTINGS.tsx\": [\n\t\t444,\n\t\t17\n\t],\n\t\"./material/svg/TWITTER\": [\n\t\t445,\n\t\t19\n\t],\n\t\"./material/svg/TWITTER.tsx\": [\n\t\t445,\n\t\t19\n\t],\n\t\"./npwd_icons/app/BANK\": [\n\t\t446,\n\t\t27\n\t],\n\t\"./npwd_icons/app/BANK.tsx\": [\n\t\t446,\n\t\t27\n\t],\n\t\"./npwd_icons/app/CALCULATOR\": [\n\t\t447,\n\t\t28\n\t],\n\t\"./npwd_icons/app/CALCULATOR.tsx\": [\n\t\t447,\n\t\t28\n\t],\n\t\"./npwd_icons/app/CAMERA\": [\n\t\t448,\n\t\t29\n\t],\n\t\"./npwd_icons/app/CAMERA.tsx\": [\n\t\t448,\n\t\t29\n\t],\n\t\"./npwd_icons/app/CONTACTS\": [\n\t\t449,\n\t\t30\n\t],\n\t\"./npwd_icons/app/CONTACTS.tsx\": [\n\t\t449,\n\t\t30\n\t],\n\t\"./npwd_icons/app/DIALER\": [\n\t\t450,\n\t\t31\n\t],\n\t\"./npwd_icons/app/DIALER.tsx\": [\n\t\t450,\n\t\t31\n\t],\n\t\"./npwd_icons/app/EMAIL\": [\n\t\t451,\n\t\t32\n\t],\n\t\"./npwd_icons/app/EMAIL.tsx\": [\n\t\t451,\n\t\t32\n\t],\n\t\"./npwd_icons/app/EXAMPLE\": [\n\t\t452,\n\t\t33\n\t],\n\t\"./npwd_icons/app/EXAMPLE.tsx\": [\n\t\t452,\n\t\t33\n\t],\n\t\"./npwd_icons/app/MARKETPLACE\": [\n\t\t453,\n\t\t34\n\t],\n\t\"./npwd_icons/app/MARKETPLACE.tsx\": [\n\t\t453,\n\t\t34\n\t],\n\t\"./npwd_icons/app/MATCH\": [\n\t\t454,\n\t\t35\n\t],\n\t\"./npwd_icons/app/MATCH.tsx\": [\n\t\t454,\n\t\t35\n\t],\n\t\"./npwd_icons/app/MESSAGES\": [\n\t\t455,\n\t\t36\n\t],\n\t\"./npwd_icons/app/MESSAGES.tsx\": [\n\t\t455,\n\t\t36\n\t],\n\t\"./npwd_icons/app/NOTES\": [\n\t\t456,\n\t\t37\n\t],\n\t\"./npwd_icons/app/NOTES.tsx\": [\n\t\t456,\n\t\t37\n\t],\n\t\"./npwd_icons/app/SETTINGS\": [\n\t\t457,\n\t\t38\n\t],\n\t\"./npwd_icons/app/SETTINGS.tsx\": [\n\t\t457,\n\t\t38\n\t],\n\t\"./npwd_icons/app/TWITTER\": [\n\t\t458,\n\t\t39\n\t],\n\t\"./npwd_icons/app/TWITTER.tsx\": [\n\t\t458,\n\t\t39\n\t],\n\t\"./npwd_icons/svg/BANK\": [\n\t\t459,\n\t\t40\n\t],\n\t\"./npwd_icons/svg/BANK.tsx\": [\n\t\t459,\n\t\t40\n\t],\n\t\"./npwd_icons/svg/CALCULATOR\": [\n\t\t460,\n\t\t41\n\t],\n\t\"./npwd_icons/svg/CALCULATOR.tsx\": [\n\t\t460,\n\t\t41\n\t],\n\t\"./npwd_icons/svg/CAMERA\": [\n\t\t461,\n\t\t42\n\t],\n\t\"./npwd_icons/svg/CAMERA.tsx\": [\n\t\t461,\n\t\t42\n\t],\n\t\"./npwd_icons/svg/CONTACTS\": [\n\t\t462,\n\t\t43\n\t],\n\t\"./npwd_icons/svg/CONTACTS.tsx\": [\n\t\t462,\n\t\t43\n\t],\n\t\"./npwd_icons/svg/DIALER\": [\n\t\t463,\n\t\t44\n\t],\n\t\"./npwd_icons/svg/DIALER.tsx\": [\n\t\t463,\n\t\t44\n\t],\n\t\"./npwd_icons/svg/EMAIL\": [\n\t\t464,\n\t\t45\n\t],\n\t\"./npwd_icons/svg/EMAIL.tsx\": [\n\t\t464,\n\t\t45\n\t],\n\t\"./npwd_icons/svg/EXAMPLE\": [\n\t\t465,\n\t\t46\n\t],\n\t\"./npwd_icons/svg/EXAMPLE.tsx\": [\n\t\t465,\n\t\t46\n\t],\n\t\"./npwd_icons/svg/MATCH\": [\n\t\t466,\n\t\t47\n\t],\n\t\"./npwd_icons/svg/MATCH.tsx\": [\n\t\t466,\n\t\t47\n\t],\n\t\"./npwd_icons/svg/MESSAGES\": [\n\t\t467,\n\t\t48\n\t],\n\t\"./npwd_icons/svg/MESSAGES.tsx\": [\n\t\t467,\n\t\t48\n\t],\n\t\"./npwd_icons/svg/NOTES\": [\n\t\t468,\n\t\t49\n\t],\n\t\"./npwd_icons/svg/NOTES.tsx\": [\n\t\t468,\n\t\t49\n\t],\n\t\"./npwd_icons/svg/SELLOUT\": [\n\t\t469,\n\t\t50\n\t],\n\t\"./npwd_icons/svg/SELLOUT.tsx\": [\n\t\t469,\n\t\t50\n\t],\n\t\"./npwd_icons/svg/SETTINGS\": [\n\t\t470,\n\t\t51\n\t],\n\t\"./npwd_icons/svg/SETTINGS.tsx\": [\n\t\t470,\n\t\t51\n\t],\n\t\"./npwd_icons/svg/TWITTER\": [\n\t\t471,\n\t\t52\n\t],\n\t\"./npwd_icons/svg/TWITTER.tsx\": [\n\t\t471,\n\t\t52\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 349;\nmodule.exports = webpackAsyncContext;","import { atom, DefaultValue, useRecoilState, useRecoilValue, useResetRecoilState } from 'recoil';\r\nimport { SETTINGS_ALL_TWEETS, SETTING_MENTIONS } from '../../../../../typings/twitter';\r\nimport config from '../../../config/default.json';\r\nimport { SettingOption } from '../../../ui/hooks/useContextMenu';\r\nimport { Schema, Validator } from 'jsonschema';\r\nimport { IconSetObject } from '../../../os/apps/hooks/useApps';\r\n\r\nconst NPWD_STORAGE_KEY = 'npwd_settings';\r\n\r\nconst v = new Validator();\r\n\r\nconst settingOptionSchema: Schema = {\r\n  id: '/SettingOption',\r\n  type: 'object',\r\n  properties: {\r\n    label: { type: 'string' },\r\n    val: { type: 'string' },\r\n  },\r\n  required: true,\r\n};\r\n\r\nconst iconSetValueSchema: Schema = {\r\n  id: '/IconSetValue',\r\n  type: 'object',\r\n  properties: {\r\n    name: { type: 'string' },\r\n    custom: { type: 'boolean' },\r\n  },\r\n  required: true,\r\n};\r\n\r\nconst settingOptionIconSet: Schema = {\r\n  id: '/SettingOptionIconSet',\r\n  type: 'object',\r\n  properties: {\r\n    label: { type: 'string' },\r\n    val: { $ref: '/IconSetValue' },\r\n  },\r\n  required: true,\r\n};\r\n\r\nv.addSchema(iconSetValueSchema, '/IconSetValue');\r\nv.addSchema(settingOptionIconSet, '/SettingOptionIconSet');\r\n\r\nconst settingsSchema: Schema = {\r\n  type: 'object',\r\n  properties: {\r\n    iconSet: { $ref: '/SettingOptionIconSet' },\r\n    language: { $ref: '/SettingOption' },\r\n    wallpaper: { $ref: '/SettingOption' },\r\n    frame: { $ref: '/SettingOption' },\r\n    theme: { $ref: '/SettingOption' },\r\n    zoom: { $ref: '/SettingOption' },\r\n    streamerMode: { type: 'boolean' },\r\n    ringtone: { $ref: '/SettingOption' },\r\n    ringtoneVol: { type: 'number' },\r\n    notiSound: { $ref: '/SettingOption' },\r\n    notiSoundVol: { type: 'number' },\r\n    TWITTER_notiFilter: { $ref: '/SettingOption' },\r\n    TWITTER_notiSound: { $ref: '/SettingOption' },\r\n    TWITTER_notifyNewFeedTweet: { type: 'boolean' },\r\n  },\r\n  required: true,\r\n};\r\n\r\nv.addSchema(settingOptionSchema, '/SettingOption');\r\n\r\nfunction isSchemaValid(schema: string): boolean {\r\n  const storedSettings = JSON.parse(schema);\r\n  const resp = v.validate(storedSettings, settingsSchema);\r\n  return resp.valid;\r\n}\r\n\r\nexport function isSettingsSchemaValid(): boolean {\r\n  const localStore = localStorage.getItem(NPWD_STORAGE_KEY);\r\n  if (localStore) {\r\n    try {\r\n      const parsedSettings = JSON.parse(localStore);\r\n      return v.validate(parsedSettings, settingsSchema).valid;\r\n    } catch (e) {\r\n      console.error('Unable to parse settings JSON', e);\r\n    }\r\n  }\r\n  return true;\r\n}\r\n\r\nexport interface IPhoneSettings {\r\n  language: SettingOption;\r\n  iconSet: SettingOption<IconSetObject>;\r\n  wallpaper: SettingOption;\r\n  frame: SettingOption;\r\n  theme: SettingOption;\r\n  zoom: SettingOption;\r\n  streamerMode: boolean;\r\n  ringtone: SettingOption;\r\n  ringtoneVol: number;\r\n  notiSound: SettingOption;\r\n  notiSoundVol: number;\r\n  TWITTER_notiFilter: SettingOption<SETTING_MENTIONS | SETTINGS_ALL_TWEETS>;\r\n  TWITTER_notiSound: SettingOption;\r\n  TWITTER_notifyNewFeedTweet: boolean;\r\n}\r\n\r\nconst localStorageEffect = (key) => ({ setSelf, onSet }) => {\r\n  const savedVal = localStorage.getItem(key);\r\n  if (savedVal) {\r\n    try {\r\n      const validString = isSchemaValid(savedVal);\r\n      if (validString) {\r\n        setSelf(JSON.parse(savedVal));\r\n      } else {\r\n        console.error('Settings Schema was invalid, applying default settings');\r\n        setSelf(config.defaultSettings);\r\n      }\r\n    } catch (e) {\r\n      // If we are unable to parse the json string, we set default settings\r\n      console.error('Unable to parse JSON');\r\n      setSelf(config.defaultSettings);\r\n    }\r\n  }\r\n\r\n  onSet((newValue) => {\r\n    if (newValue instanceof DefaultValue) {\r\n      localStorage.removeItem(key);\r\n    } else {\r\n      localStorage.setItem(key, JSON.stringify(newValue));\r\n    }\r\n  });\r\n};\r\n\r\nexport const settingsState = atom<IPhoneSettings>({\r\n  key: 'settings',\r\n  default: config.defaultSettings,\r\n  effects_UNSTABLE: [localStorageEffect(NPWD_STORAGE_KEY)],\r\n});\r\n\r\nconst customWallpaperState = atom({\r\n  key: 'customWallpaperState',\r\n  default: false,\r\n});\r\n\r\nexport const useSettings = () => useRecoilState(settingsState);\r\nexport const useSettingsValue = () => useRecoilValue(settingsState);\r\n\r\nexport const useResetSettings = () => useResetRecoilState(settingsState);\r\n\r\nexport const useCustomWallpaperModal = () => {\r\n  const [customWallpaperModal, setCustomWallpaperModal] = useRecoilState(customWallpaperState);\r\n  return { customWallpaperModal, setCustomWallpaperModal };\r\n};\r\n","import { atom } from 'recoil';\r\nimport { ResourceConfig } from '../../../../../typings/config';\r\n\r\nexport const phoneState = {\r\n  visibility: atom<boolean>({\r\n    key: 'phoneVisibility',\r\n    default: false,\r\n  }),\r\n  resourceConfig: atom<ResourceConfig>({\r\n    key: 'resourceConfig',\r\n    default: null,\r\n  }),\r\n  phoneTime: atom<string>({\r\n    key: 'phoneTime',\r\n    default: null,\r\n  }),\r\n};\r\n","import { Howl } from 'howler';\r\nimport React, { createContext, useCallback, useEffect, useRef } from 'react';\r\n\r\ninterface IMountResponse {\r\n  howl: Howl;\r\n  url: string;\r\n}\r\n\r\ninterface ISoundContext {\r\n  mount(url: string, volume?: number, loop?: boolean, autoplay?: boolean): Promise<IMountResponse>;\r\n  play(url?: string, volume?: number, loop?: boolean): void;\r\n  stop(url: string): void;\r\n  remove(url: string): boolean;\r\n  volume(url: string, volume?: number): number;\r\n  loop(url: string, loop?: boolean): boolean;\r\n  playing(url: string): boolean;\r\n  isMounted(url: string): boolean;\r\n}\r\n\r\nexport const soundContext = createContext<ISoundContext>(null);\r\n\r\nexport const SoundProvider = ({ children }: { children: React.ReactNode }) => {\r\n  const soundRefs = useRef<Map<string, { howl: Howl; volume: number }>>();\r\n\r\n  useEffect(() => {\r\n    soundRefs.current = new Map();\r\n  }, []);\r\n\r\n  const mount = useCallback(\r\n    (url: string, volume: number = 1, loop: boolean = false, autoplay: boolean = false) => {\r\n      return new Promise<IMountResponse>((res) => {\r\n        if (!soundRefs.current) {\r\n          soundRefs.current = new Map();\r\n        }\r\n\r\n        const find = soundRefs.current.get(url);\r\n\r\n        if (find) {\r\n          find.howl.volume(volume);\r\n          find.howl.loop(loop);\r\n          if (autoplay) {\r\n            find.howl.play();\r\n          }\r\n          return res({ howl: find.howl, url });\r\n        }\r\n\r\n        const instance = new Howl({\r\n          src: url,\r\n          loop,\r\n          volume,\r\n          autoplay,\r\n        });\r\n\r\n        soundRefs.current.set(url, { howl: instance, volume });\r\n\r\n        instance.once('load', () => {\r\n          res({ howl: instance, url });\r\n        });\r\n\r\n        const onError = (_id, e) => {\r\n          res(null);\r\n          console.error('Howler Error \\n', e, '\\nid: ', _id, '\\nsrc: ', url);\r\n        };\r\n\r\n        instance.once('loaderror', onError);\r\n\r\n        instance.once('playerror', onError);\r\n      });\r\n    },\r\n    [],\r\n  );\r\n\r\n  const play = useCallback(\r\n    (url: string, volume: number, loop: boolean) => {\r\n      const sound = soundRefs.current.get(url);\r\n      let fadedSounds = [];\r\n      if (sound) {\r\n        soundRefs.current.forEach((ref, key) => {\r\n          const isCurrent = key === url;\r\n          const isPlaying = ref.howl.playing();\r\n          const isLoop = ref.howl.loop();\r\n          if (isCurrent || !isLoop || !isPlaying) {\r\n            return;\r\n          }\r\n          fadedSounds.push(ref);\r\n          const currVol = ref.howl.volume();\r\n          ref.howl.fade(currVol, currVol * 0.3, 50);\r\n        });\r\n        if (volume !== undefined) {\r\n          sound.howl.volume(volume);\r\n        }\r\n        if (loop !== undefined) {\r\n          sound.howl.loop(loop);\r\n        }\r\n        sound.howl.play();\r\n\r\n        sound.howl.once('end', () => {\r\n          fadedSounds.forEach((s) => {\r\n            s.howl.fade(s.howl.volume(), s.volume, 50);\r\n          });\r\n          fadedSounds = undefined;\r\n        });\r\n        return;\r\n      }\r\n      mount(url, volume, loop, true);\r\n    },\r\n    [mount],\r\n  );\r\n\r\n  const volume = useCallback((url: string, volume: number = undefined): number => {\r\n    const sound = soundRefs.current.get(url);\r\n    return sound?.howl.volume(volume) as number;\r\n  }, []);\r\n\r\n  const loop = useCallback((url: string, loop: boolean = undefined): boolean => {\r\n    const sound = soundRefs.current.get(url);\r\n    sound.howl.loop(loop);\r\n    return sound.howl.loop();\r\n  }, []);\r\n\r\n  const stop = useCallback((url: string) => {\r\n    if (!soundRefs.current) {\r\n      return;\r\n    }\r\n    const sound = soundRefs.current.get(url);\r\n    sound?.howl.stop();\r\n  }, []);\r\n\r\n  const remove = useCallback((url: string): boolean => {\r\n    if (!soundRefs.current) {\r\n      return;\r\n    }\r\n    const sound = soundRefs.current.get(url);\r\n    if (sound) {\r\n      sound.howl.stop();\r\n      sound.howl.unload();\r\n      soundRefs.current.delete(url);\r\n      return true;\r\n    }\r\n    return false;\r\n  }, []);\r\n\r\n  const isMounted = useCallback((url: string): boolean => {\r\n    if (!soundRefs.current) {\r\n      return false;\r\n    }\r\n    return !!soundRefs.current.get(url);\r\n  }, []);\r\n\r\n  const playing = useCallback((url: string) => {\r\n    if (!soundRefs.current) {\r\n      return false;\r\n    }\r\n    const sound = soundRefs.current.get(url);\r\n    return sound?.howl.playing() || false;\r\n  }, []);\r\n\r\n  return (\r\n    <soundContext.Provider value={{ mount, play, stop, playing, remove, volume, loop, isMounted }}>\r\n      {children}\r\n    </soundContext.Provider>\r\n  );\r\n};\r\n","import { useContext } from 'react';\r\nimport { soundContext } from '../providers/SoundProvider';\r\n\r\nexport const useSoundProvider = () => {\r\n  return useContext(soundContext);\r\n};\r\n","import { IPhoneSettings } from '../../../apps/settings/hooks/useSettings';\r\nimport { getNotificationPath, getRingtonePath } from '../../../apps/settings/utils/getRingtonePath';\r\n\r\nconst getPath = {\r\n  ringtone: getRingtonePath,\r\n  notiSound: getNotificationPath,\r\n};\r\n\r\n/**\r\n * Gets the configuration for SoundProvider based on settings and apps\r\n */\r\nexport const getSoundSettings = (\r\n  type: 'ringtone' | 'notiSound',\r\n  settings: IPhoneSettings,\r\n  app?: string,\r\n) => {\r\n  try {\r\n    return app\r\n      ? {\r\n          sound: getPath[type](settings[`${app}_${type}`]?.value || settings[type].value),\r\n          volume: (settings[`${app}_${type}Vol`] || settings[`${type}Vol`]) / 100,\r\n        }\r\n      : {\r\n          sound: getPath[type](settings[type as string].value),\r\n          volume: settings[`${type}Vol`] / 100,\r\n        };\r\n  } catch (e) {\r\n    console.error('getSoundSettings.ts error', e, 'Using default sounds');\r\n    return { sound: getPath[type](), volume: 0 };\r\n  }\r\n};\r\n","export const getRingtonePath = (name?: string) => `media/ringtones/${name || 'pixel'}.ogg`;\r\n\r\nexport const getNotificationPath = (name?: string) => `media/notifications/${name || 'online'}.ogg`;\r\n","import React, { createContext, useState, useCallback, useMemo, useRef, useEffect } from 'react';\r\nimport { useRecoilValue } from 'recoil';\r\nimport { useSettings } from '../../../apps/settings/hooks/useSettings';\r\nimport { phoneState } from '../../phone/hooks/state';\r\nimport { useSoundProvider } from '../../sound/hooks/useSoundProvider';\r\nimport { getSoundSettings } from '../../sound/utils/getSoundSettings';\r\nimport { DEFAULT_ALERT_HIDE_TIME } from '../notifications.constants';\r\n\r\nexport interface INotification {\r\n  app: string;\r\n  id?: string;\r\n  title: string;\r\n  content?: React.ReactNode;\r\n  icon?: JSX.Element;\r\n  notificationIcon?: JSX.Element;\r\n  sound?: boolean;\r\n  cantClose?: boolean;\r\n  keepWhenPhoneClosed?: boolean;\r\n  onClose?: (notification: INotification) => void;\r\n  onClick?: (notification: INotification) => void;\r\n}\r\n\r\ntype INotificationAlert = INotification & {\r\n  onClickAlert(e?: any): void;\r\n  onCloseAlert(e?: any): void;\r\n  resolve(): void;\r\n};\r\n\r\nexport interface INotificationIcon {\r\n  key: string;\r\n  icon: JSX.Element;\r\n  badge: number;\r\n}\r\n\r\nexport const NotificationsContext = createContext<{\r\n  barUncollapsed: boolean;\r\n  setBarUncollapsed: (v: boolean | ((c: boolean) => boolean)) => void;\r\n  notifications: INotification[];\r\n  currentAlert: INotificationAlert;\r\n  icons: INotificationIcon[];\r\n  count: number;\r\n  removeAlerts(): void;\r\n  addNotification(value: INotification): void;\r\n  removeNotification(idx: number): void;\r\n  updateId(id: string, value: Partial<INotification>): void;\r\n  removeId(id: string): void;\r\n  hasNotification(id: string): INotification | null;\r\n  hasAppNotification(app: string): number;\r\n  addNotificationAlert(n: INotification, cb?: (n: INotification) => void);\r\n}>(null);\r\n\r\nexport function NotificationsProvider({ children }) {\r\n  const isPhoneOpen = useRecoilValue(phoneState.visibility);\r\n\r\n  const [settings] = useSettings();\r\n\r\n  const [barUncollapsed, setBarUncollapsed] = useState<boolean>(false);\r\n\r\n  const [notifications, setNotifications] = useState<INotification[]>([]);\r\n\r\n  const { mount, play } = useSoundProvider();\r\n\r\n  const alertTimeout = useRef<NodeJS.Timeout>();\r\n  const [alerts, setAlerts] = useState<\r\n    Array<[INotification, (n: INotification) => void, string | undefined]>\r\n  >([]);\r\n  const [currentAlert, setCurrentAlert] = useState<INotificationAlert>();\r\n\r\n  useEffect(() => {\r\n    if (isPhoneOpen && currentAlert && currentAlert.keepWhenPhoneClosed) {\r\n      currentAlert.resolve();\r\n    }\r\n  }, [isPhoneOpen, currentAlert]);\r\n\r\n  const updateNotification = useCallback((idx: number, value: INotification) => {\r\n    setNotifications((all) => {\r\n      const updated = [...all];\r\n      updated.splice(idx, 1, value);\r\n      return updated;\r\n    });\r\n  }, []);\r\n\r\n  const removeNotification = (idx) => {\r\n    setNotifications((all) => {\r\n      const updated = all;\r\n      updated.splice(idx, 1);\r\n      return [...updated];\r\n    });\r\n  };\r\n\r\n  const addNotification = useCallback((value: INotification) => {\r\n    setNotifications((all) => [value, ...all]);\r\n  }, []);\r\n\r\n  /**\r\n   * Checks if a notification exists for current app\r\n   * and returns its index or -1 if not found.\r\n   */\r\n  const hasAppNotification = useCallback(\r\n    (appId: string): number => {\r\n      return notifications.findIndex((n) => n.app === appId);\r\n    },\r\n    [notifications],\r\n  );\r\n\r\n  /**\r\n   * Checks if a notification exists by its `id`\r\n   */\r\n  const hasNotification = useCallback(\r\n    (id: string): INotification | null => {\r\n      return notifications.find((n) => n.id === id) || null;\r\n    },\r\n    [notifications]\r\n  );\r\n\r\n  const _showAlert = useCallback(\r\n    (n: INotification, cb: (n: INotification) => void, soundUrl: string) => {\r\n      return new Promise<void>((res) => {\r\n        const resolve = () => {\r\n          cb?.(n);\r\n          res();\r\n        };\r\n\r\n        const onExit = (cb) => () => {\r\n          cb?.(n);\r\n          clearTimeout(alertTimeout.current);\r\n          resolve();\r\n        };\r\n\r\n        setCurrentAlert({\r\n          ...n,\r\n          resolve,\r\n          onClickAlert: onExit(n.onClick),\r\n          onCloseAlert: onExit(n.onClose),\r\n        });\r\n\r\n        if (n.sound && soundUrl) {\r\n          play(soundUrl);\r\n        }\r\n\r\n        if (n.keepWhenPhoneClosed) {\r\n          return;\r\n        }\r\n\r\n        alertTimeout.current = setTimeout(() => {\r\n          resolve();\r\n          // If you change or remove the 300 i'll kill your pet - Kidz /s\r\n          // Really, this makes it work nicely with usePhoneVisibility :)\r\n        }, DEFAULT_ALERT_HIDE_TIME + 300);\r\n      });\r\n    },\r\n    [play]\r\n  );\r\n\r\n  const addNotificationAlert = (\r\n    n: INotification,\r\n    cb: (n: INotification) => void\r\n  ) => {\r\n    if (n.sound) {\r\n      const { sound, volume } = getSoundSettings('notiSound', settings, n.app);\r\n      mount(sound, volume, false).then(({ url }) =>\r\n        setAlerts((curr) => [...curr, [n, cb, url]])\r\n      );\r\n      return;\r\n    }\r\n    setAlerts((curr) => [...curr, [n, cb, undefined]]);\r\n  };\r\n\r\n  const removeId = (id: string) => {\r\n    setNotifications((curr) => curr.filter((n) => n.id !== id));\r\n  };\r\n\r\n  const updateId = (id: string, value: Partial<INotification>) => {\r\n    const idx = notifications.findIndex((n) => n.id === id);\r\n    if (idx !== -1) {\r\n      const curr = { ...notifications[idx], ...value };\r\n      updateNotification(idx, curr);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!currentAlert && alerts.length) {\r\n      _showAlert(...alerts[0]).then(() => {\r\n        setAlerts((curr) => {\r\n          const newQueue = curr;\r\n          curr.shift();\r\n          return newQueue;\r\n        });\r\n        setCurrentAlert(null);\r\n      });\r\n    }\r\n  }, [_showAlert, alerts, currentAlert]);\r\n\r\n  const icons: INotificationIcon[] = useMemo(\r\n    () =>\r\n      notifications.reduce((icons, curr) => {\r\n        const find = icons.findIndex((i) => i.key === curr.app);\r\n        if (find !== -1) {\r\n          icons[find].badge++;\r\n          return icons;\r\n        }\r\n        icons.unshift({ key: curr.app, icon: curr.notificationIcon, badge: 1 });\r\n        return icons;\r\n      }, []),\r\n    [notifications],\r\n  );\r\n\r\n  const removeAlerts = () => {\r\n    setAlerts([]);\r\n    setCurrentAlert(null);\r\n  };\r\n\r\n  return (\r\n    <NotificationsContext.Provider\r\n      value={{\r\n        setBarUncollapsed,\r\n        barUncollapsed,\r\n        currentAlert,\r\n        notifications,\r\n        removeAlerts,\r\n        addNotification,\r\n        removeNotification,\r\n        updateId,\r\n        removeId,\r\n        hasNotification,\r\n        hasAppNotification,\r\n        addNotificationAlert,\r\n        icons,\r\n        count: notifications.length,\r\n      }}\r\n    >\r\n      {children}\r\n    </NotificationsContext.Provider>\r\n  );\r\n}\r\n","import { useMemo } from 'react';\r\nimport { createMuiTheme } from '@material-ui/core';\r\nimport { useSettings } from '../../../apps/settings/hooks/useSettings';\r\nimport themes from '../../../config/themes.json';\r\n\r\nexport const usePhoneTheme = () => {\r\n  const [settings] = useSettings();\r\n  return useMemo(() => createMuiTheme(themes[settings.theme.value]), [settings.theme]);\r\n};\r\n","import React, { createContext, useState } from 'react';\r\nimport { IAlert } from '../hooks/useSnackbar';\r\n\r\nexport const SnackbarContext = createContext(null);\r\n\r\nfunction SnackbarProvider({ children }) {\r\n  const [open, setOpen] = useState<boolean>(false);\r\n  const [alert, setAlert] = useState<IAlert>(null);\r\n\r\n  const setNewAlert = (alert: IAlert) => {\r\n    setAlert(alert);\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <SnackbarContext.Provider value={{ alert, addAlert: setNewAlert, handleClose, isOpen: open }}>\r\n      {children}\r\n    </SnackbarContext.Provider>\r\n  );\r\n}\r\n\r\nexport default SnackbarProvider;\r\n","import i18n from 'i18next';\r\nimport { initReactI18next } from 'react-i18next';\r\nimport en from './locale/en.json';\r\nimport es from './locale/es.json';\r\nimport fr from './locale/fr.json';\r\nimport ba from './locale/ba.json';\r\nimport sv from './locale/sv.json';\r\nimport no from './locale/no.json';\r\nimport tr from './locale/tr.json';\r\nimport ptbr from './locale/ptbr.json';\r\nimport hu from \"./locale/hu.json\"\r\nimport pt from './locale/pt.json';\r\nimport config from './config/default.json';\r\n\r\nconst resources = {\r\n  en,\r\n  es,\r\n  fr,\r\n  ba,\r\n  no,\r\n  sv,\r\n  tr,\r\n  ptbr,\r\n  pt,\r\n  hu\r\n};\r\n\r\ni18n\r\n  .use(initReactI18next) // passes i18n down to react-i18next\r\n  .init({\r\n    resources,\r\n    lng: config.defaultLanguage,\r\n    react: {\r\n      bindI18n: 'languageChanged',\r\n    },\r\n    keySeparator: '.', // we do not use keys in form messages.welcome\r\n\r\n    interpolation: {\r\n      escapeValue: false, // react already safes from xss\r\n    },\r\n  });\r\n\r\nexport default i18n;\r\n","export interface ActiveCall {\r\n  active: boolean;\r\n  accepted: boolean;\r\n  isTransmitter: boolean;\r\n  transmitter: string;\r\n  receiver: string;\r\n}\r\n\r\nexport interface CallHistoryItem {\r\n  id?: number;\r\n  identifier: string;\r\n  transmitter: string;\r\n  transmitterSource?: number;\r\n  receiver: string;\r\n  receiverSource?: number;\r\n  start: string;\r\n  end?: number;\r\n  is_accepted: boolean;\r\n}\r\n\r\nexport enum CallRejectReasons {\r\n  DECLINED,\r\n  BUSY_LINE\r\n}\r\n\r\nexport enum CallEvents {\r\n  INITIALIZE_CALL = 'npwd:beginCall',\r\n  START_CALL = 'npwd:startCall',\r\n  ACCEPT_CALL = 'npwd:acceptCall',\r\n  END_CALL = 'npwd:endCall',\r\n  WAS_ENDED = 'npwd:callEnded',\r\n  WAS_ACCEPTED = 'npwd:callAccepted',\r\n  REJECTED = 'npwd:rejectCall',\r\n  WAS_REJECTED = 'npwd:callRejected',\r\n  FETCH_CALLS = 'npwd:fetchCalls',\r\n  SEND_HISTORY = 'npwd:sendCallHistory',\r\n  SEND_HANGUP_ANIM = 'npwd:sendHangupAnim',\r\n  SET_CALLER = 'npwd:setCaller',\r\n  SET_CALL_MODAL = 'npwd:callModal',\r\n  SET_CALL_HISTORY = 'npwd:setCallHistory',\r\n  ACTION_RESULT = 'npwd:callsActionResult',\r\n  SEND_ALERT = 'npwd:callSetAlert',\r\n}\r\n","import React from 'react';\r\nimport { AppWrapperTypes } from '../interface/InterfaceUI';\r\n\r\nexport const AppWrapper = ({ children, style, handleClickAway, ...props }: AppWrapperTypes) => {\r\n  return (\r\n    <div\r\n      {...props}\r\n      style={{\r\n        padding: 0,\r\n        margin: 0,\r\n        width: '100%',\r\n        height: '100%',\r\n        display: 'flex',\r\n        position: 'relative',\r\n        flexDirection: 'column',\r\n        minHeight: '720px',\r\n        ...style,\r\n      }}\r\n    >\r\n      {children}\r\n    </div>\r\n  );\r\n};\r\n","import React from 'react';\r\nimport { Box, makeStyles, Backdrop, Paper, BoxProps } from '@material-ui/core';\r\nimport { AppContentTypes } from '../interface/InterfaceUI';\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  wrapper: {\r\n    flex: 1,\r\n  },\r\n  box: {\r\n    width: '100%',\r\n    height: '100%', // allow application to fill entireity of space\r\n    position: 'relative',\r\n  },\r\n  backdrop: {\r\n    position: 'absolute',\r\n    zIndex: 1,\r\n  },\r\n  paper: {\r\n    width: '100%',\r\n    height: '100%', // allow application to fill entireity of space\r\n  },\r\n}));\r\n\r\nexport const AppContent = ({\r\n  children,\r\n  paperStyle,\r\n  backdrop,\r\n  onClickBackdrop,\r\n  ...props\r\n}: AppContentTypes & BoxProps) => {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Paper\r\n      className={classes.wrapper}\r\n      square\r\n      style={backdrop ? { overflow: 'hidden' } : { overflow: 'auto' }}\r\n    >\r\n      <Backdrop className={classes.backdrop} open={backdrop || false} onClick={onClickBackdrop} />\r\n      <Box flexGrow={1} className={classes.box} {...props}>\r\n        <Paper square elevation={0} className={classes.paper} style={paperStyle}>\r\n          {children}\r\n        </Paper>\r\n      </Box>\r\n    </Paper>\r\n  );\r\n};\r\n","import { atom } from 'recoil';\r\nimport { ActiveCall } from '../../../../../typings/call';\r\n\r\nexport const callerState = {\r\n  currentCall: atom<ActiveCall>({\r\n    key: 'currentCall',\r\n    default: null,\r\n  }),\r\n  callModal: atom<boolean>({\r\n    key: 'callingModal',\r\n    default: false,\r\n  }),\r\n  callDuration: atom({\r\n    key: 'callDuration',\r\n    default: { ms: 0, s: 0, m: 0, h: 0 },\r\n  }),\r\n};\r\n","export type AlertCategory =\r\n  | 'CONTACT_ADD_SUCCESS'\r\n  | 'CONTACT_ADD_FAILED'\r\n  | 'CONTACT_UPDATE_SUCCESS'\r\n  | 'CONTACT_UPDATE_FAILED'\r\n  | 'CONTACT_DELETE_SUCCESS'\r\n  | 'CONTACT_DELETE_FAILED';\r\n\r\nexport interface PreDBContact {\r\n  display: string;\r\n  number: string;\r\n  avatar?: string;\r\n}\r\n\r\nexport interface Contact extends PreDBContact {\r\n  id: number;\r\n}\r\n\r\nexport interface ContactDeleteDTO {\r\n  id: number;\r\n}\r\n\r\nexport enum ContactEvents {\r\n  GET_CONTACTS = 'npwd:getContacts',\r\n  ADD_CONTACT = 'npwd:addContacts',\r\n  UPDATE_CONTACT = 'npwd:updateContact',\r\n  DELETE_CONTACT = 'npwd:deleteContact',\r\n}\r\n","import { useRecoilState } from 'recoil';\r\nimport { ActiveCall } from '../../../../../typings/call';\r\nimport { callerState } from './state';\r\nimport { CallEvents } from '../../../../../typings/call';\r\nimport { useNuiRequest } from 'fivem-nui-react-lib';\r\n\r\ninterface CallHook {\r\n  call: ActiveCall;\r\n  setCall: (details: any) => void;\r\n  acceptCall(): void;\r\n  rejectCall(): void;\r\n  endCall(): void;\r\n}\r\n\r\nexport const useCall = (): CallHook => {\r\n  const Nui = useNuiRequest();\r\n  const [call, setCall] = useRecoilState(callerState.currentCall);\r\n\r\n  const acceptCall = () => {\r\n    Nui.send(CallEvents.ACCEPT_CALL, {\r\n      transmitterNumber: call.transmitter,\r\n    });\r\n  };\r\n\r\n  const rejectCall = () => {\r\n    Nui.send(CallEvents.REJECTED, {\r\n      phoneNumber: call.transmitter,\r\n    });\r\n  };\r\n\r\n  const endCall = () => {\r\n    Nui.send(CallEvents.END_CALL, {\r\n      transmitterNumber: call.transmitter,\r\n    });\r\n  };\r\n\r\n  return { call, setCall, acceptCall, rejectCall, endCall };\r\n};\r\n","import { useEffect, useRef, useState } from 'react';\r\n\r\nconst getTimeFromSeconds = (secs: number) => {\r\n  const totalSeconds = Math.ceil(secs);\r\n  const hours = Math.floor((totalSeconds % (60 * 60 * 24)) / (60 * 60));\r\n  const minutes = Math.floor((totalSeconds % (60 * 60)) / 60);\r\n  const seconds = Math.floor(totalSeconds % 60);\r\n\r\n  return {\r\n    seconds,\r\n    minutes,\r\n    hours,\r\n  };\r\n};\r\n\r\nconst useTimer = () => {\r\n  const intervalRef = useRef<NodeJS.Timer>();\r\n  const [seconds, setSeconds] = useState(0);\r\n\r\n  const clearIntervalRef = () => {\r\n    if (intervalRef.current) {\r\n      clearInterval(intervalRef.current);\r\n      intervalRef.current = undefined;\r\n    }\r\n  };\r\n\r\n  const startTimer = () => {\r\n    if (!intervalRef.current) {\r\n      intervalRef.current = setInterval(() => setSeconds((prevSeconds) => prevSeconds + 1), 1000);\r\n    }\r\n  };\r\n\r\n  const resetTimer = () => {\r\n    clearIntervalRef();\r\n  };\r\n\r\n  useEffect(() => {\r\n    startTimer();\r\n    return clearIntervalRef;\r\n  }, []);\r\n\r\n  return { ...getTimeFromSeconds(seconds), startTimer, resetTimer };\r\n};\r\n\r\nexport default useTimer;\r\n","import React from 'react';\r\nimport { Box, Typography } from '@material-ui/core';\r\nimport useTimer from '../hooks/useTimer';\r\n\r\nconst formatTime = (time: number) => (time < 10 ? `0${time}` : time);\r\n\r\nexport const CallTimer = () => {\r\n  const { seconds, hours, minutes } = useTimer();\r\n  return (\r\n    <Box>\r\n      <Typography variant=\"body1\">\r\n        {`${formatTime(hours)}:${formatTime(minutes)}:${formatTime(seconds)}`}\r\n      </Typography>\r\n    </Box>\r\n  );\r\n};\r\n","import { useRecoilState } from 'recoil';\r\nimport { callerState } from './state';\r\n\r\ninterface ModalProps {\r\n  modal: boolean;\r\n  setModal: (show: boolean) => void;\r\n}\r\n\r\nexport const useCallModal = (): ModalProps => {\r\n  const [modal, setModal] = useRecoilState(callerState.callModal);\r\n  return { modal, setModal };\r\n};\r\n","import { fade, IconButton, IconButtonProps, makeStyles } from '@material-ui/core';\r\nimport React from 'react';\r\n\r\ntype StatusButtonStyleColor = 'success' | 'error' | 'warning' | 'info';\r\n\r\ninterface IStatusButtonStyleProps {\r\n  color: StatusButtonStyleColor;\r\n}\r\n\r\nconst useStyles = makeStyles(\r\n  (theme) => ({\r\n    root: {\r\n      color: ({ color }: IStatusButtonStyleProps) => theme.palette[color].contrastText,\r\n      backgroundColor: ({ color }: IStatusButtonStyleProps) => theme.palette[color].main,\r\n      '&:hover': {\r\n        backgroundColor: ({ color }: IStatusButtonStyleProps) => theme.palette[color].light,\r\n      },\r\n    },\r\n    outlined: {\r\n      border: ({ color }: IStatusButtonStyleProps) =>\r\n        `1px solid ${fade(theme.palette[color].main, 0.5)}`,\r\n      '&:hover': {\r\n        border: ({ color }: IStatusButtonStyleProps) => `1px solid ${theme.palette[color].main}`,\r\n      },\r\n      '&$disabled': {\r\n        border: `1px solid ${theme.palette.action.disabled}`,\r\n      },\r\n    },\r\n    contained: {\r\n      color: ({ color }: IStatusButtonStyleProps) => theme.palette[color].contrastText,\r\n      backgroundColor: ({ color }: IStatusButtonStyleProps) => theme.palette[color].main,\r\n      '&:hover': {\r\n        backgroundColor: ({ color }: IStatusButtonStyleProps) => theme.palette[color].dark,\r\n      },\r\n    },\r\n  }),\r\n  { name: 'MuiIconButton' },\r\n);\r\n\r\nexport const StatusIconButton = ({\r\n  color = 'info',\r\n  size,\r\n  className,\r\n  ...props\r\n}: Omit<IconButtonProps, 'color'> & { color: StatusButtonStyleColor }) => {\r\n  const classes = useStyles({ color });\r\n  return <IconButton className={`${classes.root} ${className}`} size={size} {...props} />;\r\n};\r\n","import React from 'react';\r\nimport CallIcon from '@material-ui/icons/Call';\r\nimport CallEndIcon from '@material-ui/icons/CallEnd';\r\nimport { useCall } from '../hooks/useCall';\r\nimport { useCallModal } from '../hooks/useCallModal';\r\nimport { StatusIconButton } from '../../../ui/components/StatusIconButton';\r\nimport { Box, makeStyles } from '@material-ui/core';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  icon: {\r\n    color: theme.palette.secondary.contrastText,\r\n    boxShadow: '0 .5rem 3rem -.25em rgba(0,0,0,.3)',\r\n  },\r\n  iconWrapper: {\r\n    height: 60,\r\n    width: 60,\r\n  },\r\n  smallIconWrapper: {\r\n    height: 40,\r\n    width: 40,\r\n  },\r\n}));\r\n\r\nexport const CallControls = ({ isSmall }: { isSmall?: boolean }) => {\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n  const { setModal } = useCallModal();\r\n  const { call, endCall, acceptCall, rejectCall } = useCall();\r\n\r\n  const handleAcceptCall = (e) => {\r\n    e.stopPropagation();\r\n    history.push('/call');\r\n    acceptCall();\r\n  };\r\n\r\n  const handleRejectCall = (e) => {\r\n    e.stopPropagation();\r\n    setModal(false);\r\n    rejectCall();\r\n  };\r\n\r\n  const handleEndCall = (e) => {\r\n    e.stopPropagation();\r\n    setModal(false);\r\n    endCall();\r\n  };\r\n\r\n  // We display only the hang up if the call is accepted\r\n  // or we are the one calling\r\n  if (call.accepted || call.isTransmitter)\r\n    return (\r\n      <Box display=\"flex\" justifyContent=\"center\" px={2} my={2}>\r\n        <StatusIconButton\r\n          color=\"error\"\r\n          size={isSmall ? 'small' : 'medium'}\r\n          onClick={handleEndCall}\r\n          className={isSmall ? classes.smallIconWrapper : classes.iconWrapper}\r\n        >\r\n          <CallEndIcon className={classes.icon} />\r\n        </StatusIconButton>\r\n      </Box>\r\n    );\r\n\r\n  return (\r\n    <Box display=\"flex\" alignItems=\"center\" justifyContent=\"space-between\" px={2} my={2}>\r\n      <StatusIconButton\r\n        color=\"error\"\r\n        size={isSmall ? 'small' : 'medium'}\r\n        onClick={handleRejectCall}\r\n        className={isSmall ? classes.smallIconWrapper : classes.iconWrapper}\r\n      >\r\n        <CallEndIcon className={classes.icon} />\r\n      </StatusIconButton>\r\n      <StatusIconButton\r\n        color=\"success\"\r\n        size={isSmall ? 'small' : 'medium'}\r\n        onClick={handleAcceptCall}\r\n        className={isSmall ? classes.smallIconWrapper : classes.iconWrapper}\r\n      >\r\n        <CallIcon className={classes.icon} />\r\n      </StatusIconButton>\r\n    </Box>\r\n  );\r\n};\r\n","const getBackgroundPath = (bg: string) => `media/backgrounds/${bg}`;\r\n\r\nexport default getBackgroundPath;\r\n","import config from '../../config/default.json';\r\n\r\ninterface DebugEvent {\r\n  action?: string;\r\n  level?: number;\r\n  data: any;\r\n}\r\n\r\n/**\r\n * Send an event and debug content for the logger according to the config values found in the\r\n * `config/default.json`. Lower log level means more verbose logs.\r\n *\r\n * @param event A debug log object\r\n * @param event.name The name of the event to log\r\n * @param event.level The level of this debug log (1-5 ideally)\r\n * @param event.content The content of whatever\r\n **/\r\n\r\nfunction LogDebugEvent(event: DebugEvent) {\r\n  const logLevel = event.level || 1;\r\n  const name = event.action || 'Undefined action';\r\n\r\n  if (config.debug.printDebugLogs && logLevel >= config.debug.logLevel) {\r\n    console.group(`${name} | Level: ${logLevel}`);\r\n    console.dir(event.data);\r\n    console.groupEnd();\r\n  }\r\n}\r\n\r\nexport default LogDebugEvent;\r\n","/**\r\n * Simple wrapper around fetch API tailored for CEF/NUI use.\r\n * @param eventName - The endpoint eventname to target\r\n * @param data - Data you wish to send in the NUI Callback\r\n *\r\n * @return returnData - A promise for the data sent back by the NuiCallbacks CB argument\r\n */\r\nimport LogDebugEvent from '../os/debug/LogDebugEvents';\r\n\r\nexport async function fetchNui<T = any>(eventName: string, data?: any): Promise<T> {\r\n  const options = {\r\n    method: 'post',\r\n    headers: {\r\n      'Content-Type': 'application/json; charset=UTF-8',\r\n    },\r\n    body: JSON.stringify(data),\r\n  };\r\n\r\n  LogDebugEvent({ data, action: 'fetchNui' });\r\n\r\n  const resourceName = (window as any)?.GetParentResourceName() || 'npwd';\r\n\r\n  const resp = await fetch(`https://${resourceName}/${eventName}`, options);\r\n\r\n  return await resp.json();\r\n}\r\n","// Quickly determine whether we are in browser\r\nexport const isEnvBrowser = (): boolean =>\r\n  process.env.NODE_ENV === 'development' && !(window as any).invokeNative;\r\n","export const PHONE_NUMBER_REGEX = /^([0-9]{3}-[0-9]{4})|([0-9]{7})$/;\r\n\r\nexport enum PhoneEvents {\r\n  UI_IS_READY = 'npwd:uiIsReady',\r\n  PLAYER_IS_READY = 'npwd:playerIsReady',\r\n  OPEN_APP_CONTACTS = 'npwd:app:CONTACTS',\r\n  OPEN_APP_BANK = 'npwd:app:BANK',\r\n  OPEN_APP_NOTES = 'npwd:app:NOTES',\r\n  OPEN_APP_LISTINGS = 'npwd:app:MARKETPLACE',\r\n  OPEN_APP_CAMERA = 'npwd:app:CAMERA',\r\n  OPEN_APP_DAILER = 'npwd:app:DIALER',\r\n  OPEN_PHONE = 'npwd:open',\r\n  CLOSE_PHONE = 'npwd:close',\r\n  SET_ALERT = 'npwd:setAlert',\r\n  SET_VISIBILITY = 'npwd:setVisibility',\r\n  SET_NOTIFICATION = 'npwd:setNotification',\r\n  SET_NUMBER = 'npwd:setNumber',\r\n  SET_PHONE_READY = 'npwd:phoneReady',\r\n  SET_CONFIG = 'npwd:setPhoneConfig',\r\n  SET_TIME = 'npwd:setGameTime',\r\n  SEND_CREDENTIALS = 'npwd:sendCredentials',\r\n  ON_INIT = 'npwd:onInit',\r\n  TOGGLE_KEYS = 'npwd:toggleAllControls',\r\n}\r\n\r\n// Used to standardize the server response\r\nexport enum ErrorStringKeys {\r\n  SERVER_ERROR = 'GENERAL_SERVER_ERROR',\r\n  DELETE_FAILED = 'DELETE_FAILED',\r\n  ADD_FAILED = 'ADD_FAILED',\r\n  UPDATE_FAILED = 'UPDATED_FAILED',\r\n  FETCH_FAILED = 'FETCH_FAILED',\r\n}\r\n\r\nexport interface FxServerRespError {\r\n  errorCode: ErrorStringKeys;\r\n  message: string;\r\n}\r\n\r\nexport interface FxServerResponse {\r\n  data?: unknown;\r\n  action: string;\r\n  status: 'success' | 'failure';\r\n  app: string;\r\n  error?: FxServerRespError;\r\n}\r\n","import { atom, selector, useRecoilState, useRecoilValue, useSetRecoilState } from 'recoil';\r\nimport { Contact, ContactEvents } from '../../../../../typings/contact';\r\nimport { fetchNui } from '../../../utils/fetchNui';\r\nimport { ServerPromiseResp } from '../../../../../typings/common';\r\nimport { isEnvBrowser } from '../../../utils/misc';\r\nimport LogDebugEvent from '../../../os/debug/LogDebugEvents';\r\nimport { BrowserContactsState } from '../utils/constants';\r\n\r\nexport const contactsState = {\r\n  contacts: atom<Contact[]>({\r\n    key: 'contactsList',\r\n    default: selector({\r\n      key: 'contactsListDefault',\r\n      get: async () => {\r\n        try {\r\n          const resp = await fetchNui<ServerPromiseResp<Contact[]>>(ContactEvents.GET_CONTACTS);\r\n          LogDebugEvent({ action: 'ContactsFetched', data: resp.data });\r\n          return resp.data;\r\n        } catch (e) {\r\n          if (isEnvBrowser()) {\r\n            return BrowserContactsState;\r\n          }\r\n          console.error(e);\r\n          return [];\r\n        }\r\n      },\r\n    }),\r\n  }),\r\n  filterInput: atom<string>({\r\n    key: 'filterInput',\r\n    default: '',\r\n  }),\r\n  filteredContacts: selector({\r\n    key: 'filteredContacts',\r\n    get: ({ get }) => {\r\n      const filterInputVal: string = get(contactsState.filterInput);\r\n      const contacts: Contact[] = get(contactsState.contacts);\r\n\r\n      if (!filterInputVal) return contacts;\r\n\r\n      const regExp = new RegExp(filterInputVal, 'gi');\r\n\r\n      return contacts.filter(\r\n        (contact) => contact.display.match(regExp) || contact.number.match(regExp),\r\n      );\r\n    },\r\n  }),\r\n};\r\n\r\nexport const useSetContacts = () => useSetRecoilState(contactsState.contacts);\r\nexport const useContacts = () => useRecoilState(contactsState.contacts);\r\nexport const useContactsValue = () => useRecoilValue(contactsState.contacts);\r\n\r\nexport const useFilteredContacts = () => useRecoilValue(contactsState.filteredContacts);\r\n\r\nexport const useContactFilterInput = () => useRecoilState(contactsState.filterInput);\r\nexport const useSetContactFilterInput = () => useSetRecoilState(contactsState.filterInput);\r\n","import { useContacts } from './state';\r\n\r\nimport { Contact } from '../../../../../typings/contact';\r\nimport { useCallback } from 'react';\r\n\r\ninterface UseContactsValue {\r\n  getDisplayByNumber: (number: string) => string;\r\n  getContactByNumber: (number: string) => Contact | null;\r\n  getContact: (id: number) => Contact | null;\r\n  getPictureByNumber: (number: string) => string | null;\r\n  deleteContact: (id: number) => void;\r\n  addContact: (contact: Contact) => void;\r\n  updateContact: (contact: Contact) => void;\r\n}\r\n\r\nexport const useContactActions = (): UseContactsValue => {\r\n  const [contacts, setContacts] = useContacts();\r\n\r\n  const getDisplayByNumber = useCallback(\r\n    (number: string) => {\r\n      const found = contacts.find((contact) => contact.number === number);\r\n      return found ? found.display : number;\r\n    },\r\n    [contacts],\r\n  );\r\n\r\n  const getPictureByNumber = useCallback(\r\n    (number: string) => {\r\n      const found = contacts.find((contact) => contact.number === number);\r\n      return found ? found.avatar : null;\r\n    },\r\n    [contacts],\r\n  );\r\n\r\n  const getContactByNumber = useCallback(\r\n    (number: string): Contact | null => {\r\n      for (const contact of contacts) {\r\n        if (contact.number === number) return contact;\r\n      }\r\n      return null;\r\n    },\r\n    [contacts],\r\n  );\r\n\r\n  const getContact = useCallback(\r\n    (id: number): Contact | null => {\r\n      for (const contact of contacts) {\r\n        if (contact.id === id) return contact;\r\n      }\r\n      return null;\r\n    },\r\n    [contacts],\r\n  );\r\n\r\n  const deleteContact = useCallback(\r\n    (id: number): void => {\r\n      setContacts((curContacts) => [...curContacts].filter((contact) => contact.id !== id));\r\n    },\r\n    [setContacts],\r\n  );\r\n\r\n  const addContact = useCallback(\r\n    (contact: Contact) => {\r\n      setContacts((curContacts) => [...curContacts, contact]);\r\n    },\r\n    [setContacts],\r\n  );\r\n\r\n  const updateContact = useCallback(\r\n    (updatedContact: Contact) => {\r\n      setContacts((curContacts) => {\r\n        const targetContactIndex = curContacts.findIndex(\r\n          (contact) => contact.id === updatedContact.id,\r\n        );\r\n        const newContactsArray = [...curContacts];\r\n        newContactsArray[targetContactIndex] = updatedContact;\r\n        return newContactsArray;\r\n      });\r\n    },\r\n    [setContacts],\r\n  );\r\n\r\n  return {\r\n    getDisplayByNumber,\r\n    getContact,\r\n    getContactByNumber,\r\n    getPictureByNumber,\r\n    deleteContact,\r\n    updateContact,\r\n    addContact,\r\n  };\r\n};\r\n","import React from 'react';\r\nimport { Avatar, Box, Typography } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { useContactActions } from '../../../apps/contacts/hooks/useContactActions';\r\nimport { useCall } from '../hooks/useCall';\r\nimport { useTranslation } from 'react-i18next';\r\n\r\nconst useStyles = makeStyles({\r\n  image: {\r\n    width: 80,\r\n    height: 80,\r\n  },\r\n});\r\n\r\nconst CallContactContainer = () => {\r\n  const { t } = useTranslation();\r\n  const { call } = useCall();\r\n  const classes = useStyles();\r\n\r\n  const { getDisplayByNumber, getPictureByNumber } = useContactActions();\r\n\r\n  const getDisplayOrNumber = () =>\r\n    call.isTransmitter ? getDisplayByNumber(call?.receiver) : getDisplayByNumber(call?.transmitter);\r\n\r\n  return (\r\n    <Box display=\"flex\" alignItems=\"center\">\r\n      <Box style={{ flexGrow: 1 }}>\r\n        <Typography variant=\"body1\">\r\n          {call.isTransmitter\r\n            ? t('CALLS.MESSAGES.OUTGOING').toUpperCase()\r\n            : t('CALLS.MESSAGES.INCOMING').toUpperCase()}\r\n        </Typography>\r\n        <Typography variant=\"h4\">{getDisplayOrNumber()}</Typography>\r\n      </Box>\r\n      <Avatar\r\n        className={classes.image}\r\n        alt={getDisplayOrNumber()}\r\n        src={\r\n          call.isTransmitter\r\n            ? getPictureByNumber(call.receiver)\r\n            : getPictureByNumber(call?.transmitter)\r\n        }\r\n      />\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default CallContactContainer;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Typography } from '@material-ui/core';\r\nimport { useTranslation } from 'react-i18next';\r\n\r\nconst RingingText = () => {\r\n  const { t } = useTranslation();\r\n  const [text, setText] = useState<string>(t('CALLS.MESSAGES.RINGING'));\r\n  const [step, setStep] = useState<number>(0);\r\n\r\n  useEffect(() => {\r\n    const id = setInterval(() => {\r\n      if (step < 3) {\r\n        setStep(step + 1);\r\n        setText(text + '.');\r\n      } else {\r\n        setText(t('CALLS.MESSSAGES.RINGING'));\r\n        setStep(0);\r\n      }\r\n    }, 500);\r\n    return () => clearInterval(id);\r\n  }, [step, text, t]);\r\n\r\n  return <Typography>{text}</Typography>;\r\n};\r\n\r\nexport default RingingText;\r\n","import React from 'react';\r\nimport { AppWrapper } from '../../../ui/components/AppWrapper';\r\nimport { AppContent } from '../../../ui/components/AppContent';\r\nimport { useCall } from '../hooks/useCall';\r\nimport { CallTimer } from './CallTimer';\r\nimport { CallControls } from './CallControls';\r\nimport { Box } from '@material-ui/core';\r\nimport { useSettings } from '../../../apps/settings/hooks/useSettings';\r\nimport getBackgroundPath from '../../../apps/settings/utils/getBackgroundPath';\r\nimport CallContactContainer from './CallContactContainer';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport RingingText from './RingingText';\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    height: '100%',\r\n    backdropFilter: 'blur(20px) brightness(0.6)',\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    justifyContent: 'space-between',\r\n  },\r\n});\r\n\r\nexport const CallModal = () => {\r\n  const [settings] = useSettings();\r\n  const { call } = useCall();\r\n\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <AppWrapper>\r\n      <AppContent\r\n        paperStyle={{\r\n          backgroundImage: `url(${getBackgroundPath(settings.wallpaper.value)})`,\r\n        }}\r\n      >\r\n        <Box className={classes.root} padding={5}>\r\n          <Box>\r\n            <CallContactContainer />\r\n            {call.accepted ? <CallTimer /> : call.isTransmitter && <RingingText />}\r\n          </Box>\r\n          <CallControls />\r\n        </Box>\r\n      </AppContent>\r\n    </AppWrapper>\r\n  );\r\n};\r\n","import React from 'react';\r\nimport { darken, makeStyles, Theme } from '@material-ui/core/styles';\r\nimport { green } from '@material-ui/core/colors';\r\nimport { Avatar, Badge, Button, Tooltip, Zoom } from '@material-ui/core';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { INotificationIcon } from '../../os/notifications/providers/NotificationsProvider';\r\n\r\nconst useStyles = makeStyles<Theme, { color: string; backgroundColor: string }>((theme) => ({\r\n  root: {\r\n    padding: 0,\r\n    marginTop: theme.spacing(3),\r\n  },\r\n  avatar: {\r\n    '&:hover': {\r\n      backgroundColor: ({ backgroundColor }) => darken(backgroundColor, 0.1),\r\n    },\r\n    backgroundColor: ({ backgroundColor }) => backgroundColor,\r\n    color: ({ color }) => color,\r\n    boxShadow: theme.shadows[2],\r\n    width: theme.spacing(8),\r\n    height: theme.spacing(8),\r\n    fontSize: theme.typography.h4.fontSize,\r\n  },\r\n  icon: {\r\n    fontSize: theme.typography.h4.fontSize,\r\n    width: theme.spacing(8),\r\n    height: theme.spacing(8),\r\n  },\r\n  tooltip: {\r\n    fontSize: 12,\r\n  },\r\n}));\r\n\r\nexport interface AppIconProps {\r\n  id: string;\r\n  nameLocale: string;\r\n  Icon: React.ElementType;\r\n  icon: React.ElementType;\r\n  backgroundColor: string;\r\n  color: string;\r\n  notification: INotificationIcon;\r\n}\r\n\r\nexport const AppIcon: React.FC<AppIconProps> = ({\r\n  id,\r\n  nameLocale,\r\n  Icon,\r\n  backgroundColor,\r\n  color,\r\n  icon,\r\n  notification,\r\n}) => {\r\n  const { t } = useTranslation();\r\n  const classes = useStyles({\r\n    backgroundColor: backgroundColor || green[50],\r\n    color: color || green[400],\r\n  });\r\n\r\n  return (\r\n    <Tooltip\r\n      arrow\r\n      key={id}\r\n      title={t(nameLocale)}\r\n      placement=\"top\"\r\n      classes={{ tooltip: classes.tooltip }}\r\n      TransitionComponent={Zoom}\r\n    >\r\n      <Button className={classes.root}>\r\n        <Badge\r\n          color=\"error\"\r\n          badgeContent={notification?.badge}\r\n          invisible={!notification || notification.badge < 2}\r\n        >\r\n          {Icon ? (\r\n            <Icon className={classes.icon} fontSize=\"large\" />\r\n          ) : (\r\n            <Avatar className={classes.avatar}>{icon || t(nameLocale)}</Avatar>\r\n          )}\r\n        </Badge>\r\n      </Button>\r\n    </Tooltip>\r\n  );\r\n};\r\n","import React from 'react';\r\nimport { AppIcon } from './AppIcon';\r\nimport { Box, Grid } from '@material-ui/core';\r\nimport { Link } from 'react-router-dom';\r\n\r\nexport const GridMenu = ({ items, Component = AppIcon, xs = undefined }) => {\r\n  return (\r\n    <Grid container alignItems=\"center\" direction=\"row\">\r\n      {items &&\r\n        items.length &&\r\n        items.map((item) => (\r\n          <Grid item xs={xs} key={item.id}>\r\n            <Box textAlign=\"center\">\r\n              <Link to={item.path}>\r\n                <Component {...item} />\r\n              </Link>\r\n            </Box>\r\n          </Grid>\r\n        ))}\r\n    </Grid>\r\n  );\r\n};\r\n","import { useContext } from 'react';\r\nimport { NotificationsContext } from '../providers/NotificationsProvider';\r\n\r\nexport const useNotifications = () => {\r\n  const context = useContext(NotificationsContext);\r\n  if (!context) {\r\n    throw new Error('useNotifications must be wrapped by NotificationsProvider');\r\n  }\r\n  return context;\r\n};\r\n","import React, { Suspense } from 'react';\r\nimport AppsIcon from '@material-ui/icons/Apps';\r\nimport { SvgIconProps } from '@material-ui/core';\r\nimport { SvgIconComponent } from '@material-ui/icons';\r\n\r\nexport const createLazyAppIcon = (\r\n  Icon: React.LazyExoticComponent<SvgIconComponent>,\r\n): React.FC<SvgIconProps> => (props: SvgIconProps) => {\r\n  return (\r\n    <Suspense fallback={<AppsIcon {...props} />}>\r\n      <Icon {...props} />\r\n    </Suspense>\r\n  );\r\n};\r\n","import React from 'react';\r\nimport { Typography, Box, makeStyles } from '@material-ui/core';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { Variant } from '@material-ui/core/styles/createTypography';\r\n\r\ninterface IProps {\r\n  app: any;\r\n  className?: string;\r\n  variant?: Variant;\r\n}\r\n\r\ninterface IUseStyle {\r\n  root: any;\r\n  text: any;\r\n}\r\n\r\nconst useStyle = makeStyles(\r\n  (theme): IUseStyle => ({\r\n    root: ({ backgroundColor }) => ({\r\n      width: '100%',\r\n      textAlign: 'left',\r\n      backgroundColor: backgroundColor || theme.palette.background.default,\r\n    }),\r\n    text: ({ color }) => ({\r\n      color: color || theme.palette.text.primary,\r\n    }),\r\n  }),\r\n);\r\n// Taso: Maybe we should pass an icon (maybe fa?) as a prop as well at somepoint\r\n// but need to think about the best way to do that for standardization sake.\r\nexport const AppTitle = ({\r\n  app: { backgroundColor, color, nameLocale },\r\n  variant = 'h5',\r\n  ...props\r\n}: IProps) => {\r\n  const classes = useStyle({ color, backgroundColor });\r\n  const { t } = useTranslation();\r\n  return (\r\n    <Box px={2} pt={2} className={classes.root} {...props}>\r\n      <Typography className={classes.text} paragraph variant={variant}>\r\n        {t(nameLocale)}\r\n      </Typography>\r\n    </Box>\r\n  );\r\n};\r\n","import React from 'react';\r\nimport MaterialList from '@material-ui/core/List';\r\n\r\nexport const List = ({ ...props }) => {\r\n  return (\r\n    <MaterialList aria-label=\"list\" {...props}>\r\n      {props.children}\r\n    </MaterialList>\r\n  );\r\n};\r\n","import React from 'react';\r\nimport MaterialListItem from '@material-ui/core/ListItem';\r\n\r\nexport const ListItem = ({ ...props }) => {\r\n  return (\r\n    <MaterialListItem aria-label=\"list item\" {...props}>\r\n      {props.children}\r\n    </MaterialListItem>\r\n  );\r\n};\r\n","import { atom } from 'recoil';\r\n\r\nexport const simcardState = {\r\n  number: atom({\r\n    key: 'simcardNumber',\r\n    default: null,\r\n  }),\r\n};\r\n","import { useRecoilValue } from 'recoil';\r\nimport { simcardState } from './state';\r\n\r\nexport const useSimcard = () => {\r\n  const number = useRecoilValue(simcardState.number);\r\n  return { number };\r\n};\r\n","import React from 'react';\r\nimport PhoneCallbackIcon from '@material-ui/icons/PhoneCallback';\r\nimport PhoneForwardedIcon from '@material-ui/icons/PhoneForwarded';\r\nimport PhoneIcon from '@material-ui/icons/Phone';\r\nimport PersonAddIcon from '@material-ui/icons/PersonAdd';\r\nimport { List } from '../../../../ui/components/List';\r\nimport { ListItem } from '../../../../ui/components/ListItem';\r\nimport { useNuiRequest } from 'fivem-nui-react-lib';\r\nimport { useSimcard } from '../../../../os/simcard/hooks/useSimcard';\r\nimport { useContactActions } from '../../../contacts/hooks/useContactActions';\r\nimport { CallEvents, CallHistoryItem } from '../../../../../../typings/call';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { Box, IconButton, ListItemIcon, ListItemText } from '@material-ui/core';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { makeStyles, Theme } from '@material-ui/core/styles';\r\nimport dayjs from 'dayjs';\r\n\r\nconst useStyles = makeStyles((theme: Theme) => ({\r\n  callForward: {\r\n    color: theme.palette.success.main,\r\n  },\r\n  callBack: {\r\n    color: theme.palette.error.main,\r\n  },\r\n}));\r\n\r\nexport const DialerHistory = ({ calls }) => {\r\n  const Nui = useNuiRequest();\r\n  const { number: myNumber } = useSimcard();\r\n  const { getDisplayByNumber } = useContactActions();\r\n\r\n  const classes = useStyles();\r\n\r\n  const history = useHistory();\r\n\r\n  const { t } = useTranslation();\r\n\r\n  const handleCall = (phoneNumber) => {\r\n    Nui.send(CallEvents.INITIALIZE_CALL, {\r\n      number: phoneNumber,\r\n    });\r\n  };\r\n\r\n  if (!calls?.length) {\r\n    return (\r\n      <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" paddingTop={35}>\r\n        <p>\r\n          {t('APPS_DIALER_NO_HISTORY')}\r\n          <span role=\"img\" aria-label=\"sad\">\r\n            \r\n          </span>\r\n        </p>\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <List disablePadding>\r\n      {calls.map((call: CallHistoryItem) =>\r\n        call.transmitter === myNumber ? (\r\n          <ListItem key={call.id} divider>\r\n            <ListItemIcon>\r\n              <PhoneForwardedIcon className={classes.callForward} />\r\n            </ListItemIcon>\r\n\r\n            <ListItemText\r\n              primary={getDisplayByNumber(call.receiver)}\r\n              secondary={\r\n                // TODO: Locale changes are pending #168 merge\r\n                dayjs().to(dayjs.unix(parseInt(call.start)))\r\n              }\r\n            />\r\n            <IconButton onClick={() => handleCall(call.receiver)}>{<PhoneIcon />}</IconButton>\r\n\r\n            {getDisplayByNumber(call.receiver) === call.receiver && (\r\n              <IconButton\r\n                onClick={() =>\r\n                  history.push(`/contacts/-1?addNumber=${call.receiver}&referal=/phone/contacts`)\r\n                }\r\n              >\r\n                <PersonAddIcon />\r\n              </IconButton>\r\n            )}\r\n          </ListItem>\r\n        ) : (\r\n          <ListItem key={call.id} divider>\r\n            <ListItemIcon>\r\n              <PhoneCallbackIcon className={classes.callBack} />\r\n            </ListItemIcon>\r\n\r\n            <ListItemText\r\n              primary={getDisplayByNumber(call.transmitter)}\r\n              secondary={\r\n                // TODO: Locale changes are pending #168 merge\r\n                dayjs().to(dayjs.unix(parseInt(call.start)))\r\n              }\r\n            />\r\n            <IconButton onClick={() => handleCall(call.transmitter)}>\r\n              <PhoneIcon />\r\n            </IconButton>\r\n\r\n            {getDisplayByNumber(call.transmitter) === call.transmitter && (\r\n              <IconButton\r\n                onClick={() =>\r\n                  history.push(`/contacts/-1?addNumber=${call.transmitter}&referal=/phone/contacts`)\r\n                }\r\n              >\r\n                <PersonAddIcon />\r\n              </IconButton>\r\n            )}\r\n          </ListItem>\r\n        ),\r\n      )}\r\n    </List>\r\n  );\r\n};\r\n","import { createContext } from 'react';\r\n\r\nexport interface IDialInputCtx {\r\n  inputVal: string;\r\n  add: (char: string | number) => void;\r\n  removeOne: () => void;\r\n  clear: () => void;\r\n  set: (val) => void;\r\n}\r\n\r\nexport const DialInputCtx = createContext(null);\r\n","import React, { useContext } from 'react';\r\nimport { Box, Button, Grid } from '@material-ui/core';\r\nimport { makeStyles, Theme } from '@material-ui/core/styles';\r\nimport { DialInputCtx } from '../context/InputContext';\r\n\r\nconst useStyles = makeStyles((theme: Theme) => ({\r\n  gridItem: {\r\n    fontSize: theme.typography.h5.fontSize,\r\n    padding: theme.spacing(2),\r\n  },\r\n}));\r\n\r\ninterface IBtnItem {\r\n  onClick?: (...args: any) => void;\r\n  label: string | number;\r\n}\r\n\r\nconst ButtonItem = ({ label, onClick }: IBtnItem) => {\r\n  const classes = useStyles();\r\n  return (\r\n    <Grid key={label} item xs={4}>\r\n      <Button fullWidth size=\"large\" className={classes.gridItem} onClick={onClick}>\r\n        {label}\r\n      </Button>\r\n    </Grid>\r\n  );\r\n};\r\n\r\nexport const DialGrid = () => {\r\n  const { add, removeOne, clear } = useContext(DialInputCtx);\r\n\r\n  return (\r\n    <Box height=\"100%\">\r\n      <Grid container justify=\"space-around\">\r\n        <ButtonItem label={1} onClick={() => add(1)} />\r\n        <ButtonItem label={2} onClick={() => add(2)} />\r\n        <ButtonItem label={3} onClick={() => add(3)} />\r\n        <ButtonItem label={4} onClick={() => add(4)} />\r\n        <ButtonItem label={5} onClick={() => add(5)} />\r\n        <ButtonItem label={6} onClick={() => add(6)} />\r\n        <ButtonItem label={7} onClick={() => add(7)} />\r\n        <ButtonItem label={8} onClick={() => add(8)} />\r\n        <ButtonItem label={9} onClick={() => add(9)} />\r\n        <ButtonItem label=\"*\" onClick={clear} />\r\n        <ButtonItem label={0} onClick={() => add(0)} />\r\n        <ButtonItem label=\"#\" onClick={removeOne} />\r\n        <ButtonItem label=\"-\" onClick={() => add('-')} />\r\n      </Grid>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default DialGrid;\r\n","import React, { useCallback } from 'react';\r\nimport MUITextField from '@material-ui/core/TextField';\r\nimport MUIInputBase from '@material-ui/core/InputBase';\r\nimport { useNuiRequest } from 'fivem-nui-react-lib';\r\nimport { PhoneEvents } from '../../../../typings/phone';\r\n\r\nconst useToggleFocus = () => {\r\n  const Nui = useNuiRequest();\r\n  return useCallback(\r\n    (keepGameFocus: boolean) => {\r\n      Nui.send(PhoneEvents.TOGGLE_KEYS, {\r\n        keepGameFocus,\r\n      });\r\n    },\r\n    [Nui],\r\n  );\r\n};\r\n\r\nexport const TextField = (props) => {\r\n  const toggleKeys = useToggleFocus();\r\n  return (\r\n    <MUITextField\r\n      {...props}\r\n      onFocus={(e) => {\r\n        toggleKeys(false);\r\n        if (props.onFocus) {\r\n          props.onFocus(e);\r\n        }\r\n      }}\r\n      onBlur={(e) => {\r\n        toggleKeys(true);\r\n        if (props.onBlur) {\r\n          props.onBlur(e);\r\n        }\r\n      }}\r\n    />\r\n  );\r\n};\r\n\r\nexport const InputBase = (props) => {\r\n  const toggleKeys = useToggleFocus();\r\n  return (\r\n    <MUIInputBase\r\n      {...props}\r\n      onFocus={(e) => {\r\n        toggleKeys(false);\r\n        if (props.onFocus) {\r\n          props.onFocus(e);\r\n        }\r\n      }}\r\n      onBlur={(e) => {\r\n        toggleKeys(true);\r\n        if (props.onBlur) {\r\n          props.onBlur(e);\r\n        }\r\n      }}\r\n    />\r\n  );\r\n};\r\n","import React, { useContext } from 'react';\r\nimport { Box, IconButton, Paper } from '@material-ui/core';\r\nimport { makeStyles, Theme } from '@material-ui/core/styles';\r\nimport PhoneIcon from '@material-ui/icons/Phone';\r\nimport PersonAddIcon from '@material-ui/icons/PersonAdd';\r\nimport { DialInputCtx, IDialInputCtx } from '../context/InputContext';\r\nimport { useNuiRequest } from 'fivem-nui-react-lib';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { CallEvents } from '../../../../../typings/call';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { InputBase } from '../../../ui/components/Input';\r\n\r\nconst useStyles = makeStyles((theme: Theme) => ({\r\n  root: {\r\n    textAlign: 'right',\r\n    paddingTop: theme.spacing(3),\r\n    paddingBottom: theme.spacing(3),\r\n    paddingLeft: theme.spacing(5),\r\n    paddingRight: theme.spacing(5),\r\n    display: 'flex',\r\n    height: 100,\r\n  },\r\n  input: {\r\n    flex: 1,\r\n    fontSize: theme.typography.h6.fontSize,\r\n  },\r\n  iconBtn: {\r\n    padding: 10,\r\n  },\r\n}));\r\n\r\nexport const DialerInput = () => {\r\n  const Nui = useNuiRequest();\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n  const { t } = useTranslation();\r\n\r\n  const { inputVal, set } = useContext<IDialInputCtx>(DialInputCtx);\r\n\r\n  const handleCall = (number: string) => {\r\n    Nui.send(CallEvents.INITIALIZE_CALL, {\r\n      number,\r\n    });\r\n  };\r\n\r\n  \r\n  const handleUpdateNumber = (phoneNumber) => {\r\n    phoneNumber = phoneNumber.replace(/[^0-9,-]/g, '')\r\n    if (phoneNumber.length === 3 || phoneNumber.length === 7) {\r\n      phoneNumber = phoneNumber + '-'\r\n    }\r\n    set(phoneNumber)\r\n  } \r\n\r\n  const handleNewContact = (number: string) => {\r\n    history.push(`/contacts/-1/?addNumber=${number}&referal=/phone/contacts`);\r\n  };\r\n\r\n  return (\r\n    <Box component={Paper} className={classes.root}>\r\n      <InputBase\r\n        placeholder={t('APPS_DIALER_INPUT_PLACEHOLDER')}\r\n        className={classes.input}\r\n        value={inputVal}\r\n        onChange={(e) => handleUpdateNumber(e.target.value)}\r\n      />\r\n      <IconButton color=\"primary\" className={classes.iconBtn} disabled={inputVal <= ''}>\r\n        <PhoneIcon fontSize=\"large\" onClick={() => handleCall(inputVal)} />\r\n      </IconButton>\r\n      <IconButton className={classes.iconBtn}>\r\n        <PersonAddIcon fontSize=\"large\" onClick={() => handleNewContact(inputVal)} />\r\n      </IconButton>\r\n    </Box>\r\n  );\r\n};\r\n","import qs, { ParsedQs } from 'qs';\r\nimport { useLocation } from 'react-router-dom';\r\n\r\n/**\r\n * Parses all available query params in current location and returns as an object\r\n *\r\n * @return {T} Querystring object\r\n *\r\n * @example\r\n *\r\n *     const { id, title } = useQueryParams<{ id: string, title: string }>();\r\n */\r\nexport function useQueryParams<T = Record<string, string>>(defaultValues: T = null) {\r\n  const query = qs.parse(useLocation().search, { ignoreQueryPrefix: true });\r\n  if (!defaultValues) {\r\n    return query as T & Partial<ParsedQs>;\r\n  }\r\n  return { ...defaultValues, ...query } as T & Partial<ParsedQs>;\r\n}\r\n","import React, { useState } from 'react';\r\nimport { makeStyles, Theme } from '@material-ui/core/styles';\r\nimport DialGrid from '../DialPadGrid';\r\nimport { DialerInput } from '../DialerInput';\r\nimport { DialInputCtx } from '../../context/InputContext';\r\nimport { useQueryParams } from '../../../../common/hooks/useQueryParams';\r\n\r\nconst useStyles = makeStyles((theme: Theme) => ({\r\n  root: {\r\n    width: '100%',\r\n    minHeight: '100%',\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n  },\r\n}));\r\n\r\nconst DialPage = () => {\r\n  const classes = useStyles();\r\n  const query = useQueryParams();\r\n  const queryNumber = query.number;\r\n  const [inputVal, setInputVal] = useState(queryNumber || '');\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <DialInputCtx.Provider\r\n        value={{\r\n          inputVal,\r\n          add: (val: string) => setInputVal(inputVal + val),\r\n          removeOne: () => setInputVal(inputVal.slice(0, -1)),\r\n          clear: () => setInputVal(''),\r\n          set: (val: string) => setInputVal(val),\r\n        }}\r\n      >\r\n        <DialerInput />\r\n        <DialGrid />\r\n      </DialInputCtx.Provider>\r\n    </div>\r\n  );\r\n};\r\nexport default DialPage;\r\n","import React, { useState } from 'react';\r\nimport { BottomNavigation, BottomNavigationAction } from '@material-ui/core';\r\nimport { NavLink, useLocation } from 'react-router-dom';\r\nimport { makeStyles, Theme } from '@material-ui/core/styles';\r\nimport PhoneIcon from '@material-ui/icons/Phone';\r\nimport PersonIcon from '@material-ui/icons/Person';\r\nimport HistoryIcon from '@material-ui/icons/History';\r\nimport { useTranslation } from 'react-i18next';\r\n\r\nconst useStyles = makeStyles((theme: Theme) => ({\r\n  root: {\r\n    width: '100%',\r\n    backgroundColor: theme.palette.background.paper,\r\n  },\r\n  icon: {\r\n    color: theme.palette.primary.main,\r\n  },\r\n}));\r\n\r\nconst DialerNavBar = () => {\r\n  const classes = useStyles();\r\n  const { pathname } = useLocation();\r\n  const [page, setPage] = useState(pathname);\r\n  const { t } = useTranslation();\r\n\r\n  const handleChange = (_e, newPage) => {\r\n    setPage(newPage);\r\n  };\r\n\r\n  return (\r\n    <BottomNavigation value={page} onChange={handleChange} showLabels className={classes.root}>\r\n      <BottomNavigationAction\r\n        label={t('APPS_DIALER_NAVBAR_HISTORY')}\r\n        value=\"/phone\"\r\n        component={NavLink}\r\n        icon={<HistoryIcon />}\r\n        to=\"/phone\"\r\n      />\r\n      <BottomNavigationAction\r\n        label={t('APPS_DIALER_NAVBAR_DIAL')}\r\n        value=\"/phone/dial\"\r\n        color=\"secondary\"\r\n        component={NavLink}\r\n        icon={<PhoneIcon />}\r\n        to=\"/phone/dial\"\r\n      />\r\n      <BottomNavigationAction\r\n        label={t('APPS_DIALER_NAVBAR_CONTACTS')}\r\n        value=\"/phone/contacts\"\r\n        color=\"secondary\"\r\n        component={NavLink}\r\n        icon={<PersonIcon />}\r\n        to=\"/phone/contacts\"\r\n      />\r\n    </BottomNavigation>\r\n  );\r\n};\r\n\r\nexport default DialerNavBar;\r\n","import { atom } from 'recoil';\r\nimport { CallHistoryItem } from '../../../../../typings/call';\r\n\r\nexport const dialState = {\r\n  history: atom<CallHistoryItem[]>({\r\n    key: 'dialHistory',\r\n    default: [],\r\n  }),\r\n};\r\n","interface DebugEvent<P = any> {\r\n  app: string;\r\n  method: string;\r\n  data: P;\r\n}\r\n\r\n// TODO: This should be unit tested\r\n\r\n/**\r\n * Will mock data as if it were coming from an NUI message event\r\n * @param events {DebugEvent[]} An array of debug events\r\n * @example\r\n * InjectDebugData([\r\n *  {\r\n *   app: 'CAMERA',\r\n *   method: 'setPhotos',\r\n *   data: [\r\n *    {\r\n *      id: 1,\r\n *      image: 'https://beta.iodine.gg/noDcb.jpeg',\r\n *    },\r\n *    {\r\n *      id: 2,\r\n *      image: 'https://beta.iodine.gg/noDcb.jpeg',\r\n *    }\r\n *   ]\r\n *  }\r\n * ])\r\n **/\r\nconst InjectDebugData = <P>(events: DebugEvent<P>[], timer = 1000) => {\r\n  if (process.env.NODE_ENV === 'development' && !process.env.REACT_APP_IN_GAME) {\r\n    for (const event of events) {\r\n      setTimeout(() => {\r\n        window.dispatchEvent(\r\n          new MessageEvent('message', {\r\n            data: {\r\n              app: event.app,\r\n              method: event.method,\r\n              data: event.data,\r\n            },\r\n          }),\r\n        );\r\n      }, timer);\r\n    }\r\n  }\r\n};\r\n\r\nexport default InjectDebugData;\r\n","import React from 'react';\r\nimport { emphasize, makeStyles, Paper } from '@material-ui/core';\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport { InputBase } from './Input';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  bg: {\r\n    display: 'flex',\r\n    height: '60px',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n  },\r\n  textFieldInput: {\r\n    fontSize: 20,\r\n  },\r\n  inputRoot: {\r\n    fontWeight: 400,\r\n    fontSize: 18,\r\n    border: '1px solid',\r\n    borderColor: theme.palette.divider,\r\n  },\r\n  inputInput: {\r\n    padding: theme.spacing(1, 4, 1, 4),\r\n    // vertical padding + font size from searchIcon\r\n    transition: theme.transitions.create(['width', 'border']),\r\n    width: '16ch',\r\n    '&:focus': {\r\n      width: '24ch',\r\n      borderLeft: `2px solid ${theme.palette.primary.main} `,\r\n    },\r\n  },\r\n  search: {\r\n    position: 'relative',\r\n    borderRadius: theme.shape.borderRadius,\r\n    backgroundColor: emphasize(theme.palette.background.paper, 0.21),\r\n    '&:hover': {\r\n      backgroundColor: emphasize(theme.palette.background.paper, 0.28),\r\n    },\r\n    marginLeft: theme.spacing(1),\r\n    width: 'auto',\r\n  },\r\n  searchIcon: {\r\n    padding: theme.spacing(0, 0.7),\r\n    height: '100%',\r\n    position: 'absolute',\r\n    pointerEvents: 'none',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n  },\r\n}));\r\n\r\ninterface IProps {\r\n  onChange: (event: React.ChangeEvent<HTMLTextAreaElement | HTMLInputElement>) => void;\r\n  value: string;\r\n  placeholder?: string;\r\n}\r\n\r\nconst DEFAULT_PROPS = {\r\n  onChange: () => {},\r\n  value: '',\r\n  placeholder: 'Search...',\r\n};\r\n\r\nexport const SearchField = ({ value, onChange, placeholder }: IProps = DEFAULT_PROPS) => {\r\n  const classes = useStyles();\r\n  return (\r\n    <Paper elevation={24} variant=\"outlined\" className={classes.bg}>\r\n      <div className={classes.search}>\r\n        <div className={classes.searchIcon}>\r\n          <SearchIcon />\r\n        </div>\r\n        <InputBase\r\n          value={value}\r\n          onChange={onChange}\r\n          placeholder={placeholder}\r\n          classes={{\r\n            root: classes.inputRoot,\r\n            input: classes.inputInput,\r\n          }}\r\n          inputProps={{ 'aria-label': 'search' }}\r\n        />\r\n      </div>\r\n    </Paper>\r\n  );\r\n};\r\n","import React, { useEffect, useState } from 'react';\r\nimport { Box } from '@material-ui/core';\r\n\r\nimport { useTranslation } from 'react-i18next';\r\n\r\nimport { SearchField } from '../../../../ui/components/SearchField';\r\nimport { useDebounce } from '../../../../os/phone/hooks/useDebounce';\r\nimport { useSetContactFilterInput } from '../../hooks/state';\r\n\r\nexport const SearchContacts = () => {\r\n  const { t } = useTranslation();\r\n  const setFilterVal = useSetContactFilterInput();\r\n  const [inputVal, setInputVal] = useState('');\r\n\r\n  const debouncedVal = useDebounce<string>(inputVal, 500);\r\n\r\n  useEffect(() => {\r\n    setFilterVal(debouncedVal);\r\n  }, [debouncedVal, setFilterVal]);\r\n\r\n  return (\r\n    <Box>\r\n      <SearchField\r\n        onChange={(e) => setInputVal(e.target.value)}\r\n        placeholder={t('APPS_CONTACT_PLACEHOLDER_SEARCH_CONTACTS')}\r\n        value={inputVal}\r\n      />\r\n    </Box>\r\n  );\r\n};\r\n","import { useEffect, useState } from 'react';\r\n\r\nexport const useDebounce = <T = any>(value: T, delay = 100) => {\r\n  const [debouncedValue, setDebouncedValue] = useState(value);\r\n\r\n  useEffect(() => {\r\n    const handler = setTimeout(() => {\r\n      setDebouncedValue(value);\r\n    }, delay);\r\n    return () => {\r\n      clearTimeout(handler);\r\n    };\r\n  }, [value, delay]);\r\n\r\n  return debouncedValue;\r\n};\r\n","import React from 'react';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport { Button, ListItemAvatar, Avatar as MuiAvatar, List, ListItem } from '@material-ui/core';\r\nimport PhoneIcon from '@material-ui/icons/Phone';\r\nimport ChatIcon from '@material-ui/icons/Chat';\r\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\r\nimport { SearchContacts } from './SearchContacts';\r\nimport { useHistory } from 'react-router-dom';\r\nimport LogDebugEvent from '../../../../os/debug/LogDebugEvents';\r\nimport { CallEvents } from '../../../../../../typings/call';\r\nimport { useNuiRequest } from 'fivem-nui-react-lib';\r\nimport { useFilteredContacts } from '../../hooks/state';\r\n\r\nexport const ContactList = () => {\r\n  const filteredContacts = useFilteredContacts();\r\n  const history = useHistory();\r\n  const Nui = useNuiRequest();\r\n\r\n  const openContactInfo = (contactId: number) => {\r\n    history.push(`/contacts/${contactId}`);\r\n  };\r\n\r\n  const startCall = (number: string) => {\r\n    LogDebugEvent({\r\n      action: 'Emitting `Start Call` to Scripts',\r\n      level: 2,\r\n      data: true,\r\n    });\r\n    Nui.send(CallEvents.INITIALIZE_CALL, {\r\n      number,\r\n    });\r\n  };\r\n\r\n  const handleMessage = (phoneNumber: string) => {\r\n    LogDebugEvent({\r\n      action: 'Routing to Message',\r\n      level: 1,\r\n      data: { phoneNumber },\r\n    });\r\n    history.push(`/messages/new/${phoneNumber}`);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <SearchContacts />\r\n      <List>\r\n        {filteredContacts.map((contact) => (\r\n          <ListItem key={contact.id} divider>\r\n            <ListItemAvatar>\r\n              {contact.avatar ? (\r\n                <MuiAvatar src={contact.avatar} />\r\n              ) : (\r\n                <MuiAvatar>{contact.display.slice(0, 1).toUpperCase()}</MuiAvatar>\r\n              )}\r\n            </ListItemAvatar>\r\n            <ListItemText primary={contact.display} secondary={contact.number} />\r\n            <Button onClick={() => startCall(contact.number)}>\r\n              <PhoneIcon />\r\n            </Button>\r\n            <Button onClick={() => handleMessage(contact.number)}>\r\n              <ChatIcon />\r\n            </Button>\r\n            <Button style={{ margin: -15 }} onClick={() => openContactInfo(contact.id)}>\r\n              <MoreVertIcon />\r\n            </Button>\r\n          </ListItem>\r\n        ))}\r\n      </List>\r\n    </>\r\n  );\r\n};\r\n","/**\r\n * @credits https://stackoverflow.com/questions/27936772/how-to-deep-merge-instead-of-shallow-merge\r\n * Simple object check.\r\n * @param item\r\n * @returns {boolean}\r\n */\r\nexport function isObject(item) {\r\n  return item && typeof item === 'object' && !Array.isArray(item);\r\n}\r\n\r\n/**\r\n * Deep merge two objects.\r\n * @param target\r\n * @param ...sources\r\n */\r\nexport function deepMergeObjects(target, ...sources) {\r\n  if (!sources.length) return target;\r\n  const source = sources.shift();\r\n\r\n  if (isObject(target) && isObject(source)) {\r\n    for (const key in source) {\r\n      if (isObject(source[key])) {\r\n        if (!target[key]) Object.assign(target, { [key]: {} });\r\n        deepMergeObjects(target[key], source[key]);\r\n      } else {\r\n        Object.assign(target, { [key]: source[key] });\r\n      }\r\n    }\r\n  }\r\n\r\n  return deepMergeObjects(target, ...sources);\r\n}\r\n","import React, { useMemo } from 'react';\r\nimport { createMuiTheme, ThemeProvider } from '@material-ui/core';\r\nimport { deepMergeObjects } from './deepMergeObjects';\r\nimport { usePhoneTheme } from '../../phone/hooks/usePhoneTheme';\r\n\r\nexport function createAppThemeProvider(theme: {} = {}) {\r\n  const AppThemeProvider = ({ children }: { children: React.ReactNode }) => {\r\n    const phoneTheme = usePhoneTheme();\r\n    const mergedTheme = useMemo(() => {\r\n      return createMuiTheme(deepMergeObjects(phoneTheme, theme));\r\n    }, [phoneTheme]);\r\n    return <ThemeProvider theme={mergedTheme}>{children}</ThemeProvider>;\r\n  };\r\n\r\n  return AppThemeProvider;\r\n}\r\n","import { common, green } from '@material-ui/core/colors';\r\n\r\nexport const DIALER_APP_PRIMARY_COLOR = green[600];\r\nexport const DIALER_APP_TEXT_COLOR = common.white;\r\n\r\nconst theme = {\r\n  palette: {\r\n    primary: {\r\n      main: DIALER_APP_PRIMARY_COLOR,\r\n      dark: green[800],\r\n      light: green[400],\r\n      contrastText: DIALER_APP_TEXT_COLOR,\r\n    },\r\n  },\r\n};\r\n\r\nexport default theme;\r\n","import { createAppThemeProvider } from '../../../os/apps/utils/createAppThemeProvider';\r\nimport dialerTheme from '../dialer.theme';\r\n\r\nexport const DialerThemeProvider = createAppThemeProvider(dialerTheme);\r\n","import React, { useEffect } from 'react';\r\nimport { AppWrapper } from '../../../ui/components';\r\nimport { AppTitle } from '../../../ui/components/AppTitle';\r\nimport { AppContent } from '../../../ui/components/AppContent';\r\nimport { DialerHistory } from './views/DialerHistory';\r\nimport { useApp } from '../../../os/apps/hooks/useApps';\r\nimport { Switch, Route } from 'react-router-dom';\r\nimport DialPage from './views/DialPage';\r\nimport DialerNavBar from './DialerNavBar';\r\nimport { useDialHistory } from '../hooks/useDialHistory';\r\nimport InjectDebugData from '../../../os/debug/InjectDebugData';\r\nimport { ContactList } from '../../contacts/components/List/ContactList';\r\nimport { DialerThemeProvider } from '../providers/DialerThemeProvider';\r\nimport { CallEvents } from '../../../../../typings/call';\r\nimport { Box, CircularProgress } from '@material-ui/core';\r\nimport { useNuiRequest } from 'fivem-nui-react-lib';\r\nimport { PhoneEvents } from '../../../../../typings/phone';\r\n\r\nconst LoadingSpinner: React.FC = () => (\r\n  <Box>\r\n    <CircularProgress />\r\n  </Box>\r\n);\r\n\r\nexport const DialerApp = () => {\r\n  const history = useDialHistory();\r\n  const Nui = useNuiRequest();\r\n\r\n  useEffect(() => {\r\n    Nui.send(PhoneEvents.OPEN_APP_DAILER, {})\r\n  }, [])\r\n\r\n  const dialer = useApp('DIALER');\r\n  return (\r\n    <DialerThemeProvider>\r\n      <AppWrapper>\r\n        <AppTitle app={dialer} />\r\n        <AppContent>\r\n          <Switch>\r\n            <Route path=\"/phone/dial\">\r\n              <DialPage />\r\n            </Route>\r\n            <Route exact path=\"/phone\">\r\n              <React.Suspense fallback={<LoadingSpinner />}>\r\n                <DialerHistory calls={history} />\r\n              </React.Suspense>\r\n            </Route>\r\n            <Route path=\"/phone/contacts\" component={ContactList} />\r\n          </Switch>\r\n        </AppContent>\r\n        <DialerNavBar />\r\n      </AppWrapper>\r\n    </DialerThemeProvider>\r\n  );\r\n};\r\n\r\nInjectDebugData([\r\n  {\r\n    app: 'DIALER',\r\n    method: CallEvents.SET_CALL_HISTORY,\r\n    data: [\r\n      {\r\n        id: 1,\r\n        transmitter: '636-6496',\r\n        start: 1615946292,\r\n      },\r\n      {\r\n        id: 2,\r\n        transmitter: '777-7777',\r\n        start: 1615946292,\r\n      },\r\n    ],\r\n  },\r\n]);\r\n","import { useRecoilValue } from 'recoil';\r\nimport { dialState } from './state';\r\n\r\nexport const useDialHistory = () => {\r\n  return useRecoilValue(dialState.history);\r\n};\r\n","import { useContext } from 'react';\r\nimport { SnackbarContext } from '../providers/SnackbarProvider';\r\n\r\nexport interface IAlert {\r\n  message: string;\r\n  type: AlertType;\r\n}\r\n\r\nexport type AlertType = 'success' | 'error' | 'info' | 'warning';\r\n\r\ninterface ISnackBar {\r\n  addAlert: ({ message, type }: IAlert) => void;\r\n  alert: IAlert | null;\r\n  isOpen: boolean;\r\n  handleClose: () => void;\r\n}\r\n\r\nexport const useSnackbar = (): ISnackBar => useContext(SnackbarContext);\r\n","import React, { useEffect, useState } from 'react';\r\nimport { Avatar as MuiAvatar, Box, Button, Paper } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { useHistory, useParams } from 'react-router-dom';\r\nimport { useContactActions } from '../../hooks/useContactActions';\r\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\r\nimport LogDebugEvent from '../../../../os/debug/LogDebugEvents';\r\nimport { useQueryParams } from '../../../../common/hooks/useQueryParams';\r\nimport { Contact, ContactEvents } from '../../../../../../typings/contact';\r\nimport { TextField } from '../../../../ui/components/Input';\r\nimport { fetchNui } from '../../../../utils/fetchNui';\r\nimport { ServerPromiseResp } from '../../../../../../typings/common';\r\nimport { useSnackbar } from '../../../../ui/hooks/useSnackbar';\r\n\r\ninterface ContactInfoRouteParams {\r\n  mode: string;\r\n  id: string;\r\n}\r\n\r\ninterface ContactInfoRouteQuery {\r\n  addNumber?: string;\r\n  referal?: string;\r\n}\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    height: '100%',\r\n    width: '100%',\r\n  },\r\n  listContainer: {\r\n    marginTop: 30,\r\n    width: '75%',\r\n    margin: '0 auto',\r\n    textAlign: 'center',\r\n  },\r\n  avatar: {\r\n    margin: 'auto',\r\n    height: '125px',\r\n    width: '124px',\r\n    marginBottom: 29,\r\n  },\r\n  input: {\r\n    marginBottom: 20,\r\n    margin: 'auto',\r\n    textAlign: 'center',\r\n  },\r\n  inputProps: {\r\n    fontSize: 22,\r\n  },\r\n});\r\n\r\nconst ContactsInfoPage = () => {\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n\r\n  const { getContact, addContact, updateContact, deleteContact } = useContactActions();\r\n\r\n  const { addAlert } = useSnackbar();\r\n\r\n  const { id } = useParams<ContactInfoRouteParams>();\r\n  const { addNumber, referal } = useQueryParams<ContactInfoRouteQuery>({\r\n    referal: '/contacts',\r\n  });\r\n\r\n  const contact = getContact(parseInt(id));\r\n\r\n  // Set state after checking if null\r\n  const [name, setName] = useState(contact ? contact.display : '');\r\n  const [number, setNumber] = useState(contact ? contact.number : '');\r\n  const [avatar, setAvatar] = useState(contact ? contact.avatar : '');\r\n\r\n  const { t } = useTranslation();\r\n\r\n  useEffect(() => {\r\n    if (addNumber) {\r\n      setNumber(addNumber);\r\n    }\r\n  }, [addNumber]);\r\n\r\n  const handleContactAdd = () => {\r\n    LogDebugEvent({\r\n      action: 'Handling Contact Add',\r\n      data: contact,\r\n      level: 2,\r\n    });\r\n    fetchNui<ServerPromiseResp<Contact>>(ContactEvents.ADD_CONTACT, {\r\n      display: name,\r\n      number,\r\n      avatar,\r\n    }).then((serverResp) => {\r\n      if (serverResp.status !== 'ok') {\r\n        return addAlert({\r\n          message: t('APPS_CONTACT_ADD_FAILED'),\r\n          type: 'error',\r\n        });\r\n      }\r\n\r\n      // Sanity checks maybe?\r\n\r\n      addContact(serverResp.data);\r\n      addAlert({\r\n        message: t('APPS_CONTACT_ADD_SUCCESS'),\r\n        type: 'success',\r\n      });\r\n      history.replace(referal);\r\n    });\r\n  };\r\n\r\n  const handleContactSave = () => {\r\n    LogDebugEvent({\r\n      action: 'Handling Contact Update',\r\n      data: contact,\r\n      level: 2,\r\n    });\r\n    fetchNui<ServerPromiseResp>(ContactEvents.UPDATE_CONTACT, {\r\n      id: contact.id,\r\n      display: name,\r\n      number,\r\n      avatar,\r\n    }).then((resp) => {\r\n      if (resp.status !== 'ok') {\r\n        return addAlert({\r\n          message: t('APPS_CONTACT_UPDATE_FAILED'),\r\n          type: 'error',\r\n        });\r\n      }\r\n\r\n      updateContact({\r\n        id: contact.id,\r\n        display: name,\r\n        number,\r\n        avatar,\r\n      });\r\n\r\n      addAlert({\r\n        message: t('APPS_CONTACT_UPDATE_SUCCESS'),\r\n        type: 'success',\r\n      });\r\n\r\n      history.goBack();\r\n    });\r\n  };\r\n\r\n  const handleContactDelete = () => {\r\n    LogDebugEvent({\r\n      action: 'Handling Contact Delete',\r\n      data: contact,\r\n      level: 2,\r\n    });\r\n    fetchNui<ServerPromiseResp>(ContactEvents.DELETE_CONTACT, { id: contact.id }).then((resp) => {\r\n      if (resp.status !== 'ok') {\r\n        return addAlert({\r\n          message: t('APPS_CONTACT_DELETE_FAILED'),\r\n          type: 'error',\r\n        });\r\n      }\r\n      history.goBack();\r\n      deleteContact(contact.id);\r\n      addAlert({\r\n        message: t('APPS_CONTACT_DELETE_SUCCESS'),\r\n        type: 'error',\r\n      });\r\n    });\r\n  };\r\n\r\n  const handleUpdateNumber = (phoneNumber) => {\r\n    phoneNumber = phoneNumber.replace(/[^0-9,-]/g, '')\r\n    if (phoneNumber.length === 3 || phoneNumber.length === 7) {\r\n      phoneNumber = phoneNumber + '-'\r\n    }\r\n    setNumber(phoneNumber)\r\n  } \r\n\r\n  return (\r\n    <Paper className={classes.root} square>\r\n      <Button style={{ margin: 10 }} onClick={() => history.goBack()}>\r\n        <ArrowBackIcon fontSize=\"large\" />\r\n      </Button>\r\n      <div className={classes.listContainer}>\r\n        <MuiAvatar className={classes.avatar} src={avatar} />\r\n        <TextField\r\n          autoFocus\r\n          className={classes.input}\r\n          value={name}\r\n          onChange={(e) => setName(e.target.value)}\r\n          label={t('APPS_CONTACT_FORM_NAME')}\r\n          fullWidth\r\n          inputProps={{\r\n            className: classes.inputProps,\r\n          }}\r\n        />\r\n        <TextField\r\n          className={classes.input}\r\n          value={number}\r\n          onChange={(e) => handleUpdateNumber(e.target.value)}\r\n          label={t('APPS_CONTACT_FORM_NUMBER')}\r\n          fullWidth\r\n          inputProps={{\r\n            className: classes.inputProps,\r\n          }}\r\n        />\r\n        <TextField\r\n          className={classes.input}\r\n          label={t('APPS_CONTACT_FORM_AVATAR')}\r\n          fullWidth\r\n          value={avatar}\r\n          onChange={(e) => setAvatar(e.target.value)}\r\n          inputProps={{\r\n            className: classes.inputProps,\r\n          }}\r\n        />\r\n        {/* Display if fetched contact */}\r\n        {contact && (\r\n          <>\r\n            <Box py={1} display=\"block\">\r\n              <Button color=\"primary\" variant=\"contained\" onClick={handleContactSave}>\r\n                {t('GENERIC_UPDATE')}\r\n              </Button>\r\n            </Box>\r\n            <Box py={1} display=\"block\">\r\n              <Button variant=\"contained\" color=\"secondary\" onClick={handleContactDelete}>\r\n                {t('GENERIC_DELETE')}\r\n              </Button>\r\n            </Box>\r\n          </>\r\n        )}\r\n        {/* Display if no fetched contact */}\r\n        {!contact && (\r\n          <Box display=\"block\">\r\n            <Button color=\"primary\" variant=\"contained\" onClick={handleContactAdd}>\r\n              {t('APPS_CONTACT_MODAL_BUTTON_ADD')}\r\n            </Button>\r\n          </Box>\r\n        )}\r\n      </div>\r\n    </Paper>\r\n  );\r\n};\r\n\r\nexport default ContactsInfoPage;\r\n","import React from 'react';\r\nimport { ContactList } from '../List/ContactList';\r\n\r\nexport const ContactPage = () => {\r\n  return (\r\n    <div style={{ paddingBottom: 60 }}>\r\n      <ContactList />\r\n    </div>\r\n  );\r\n};\r\n","import { blue, common } from '@material-ui/core/colors';\r\n\r\nexport const CONTACTS_APP_PRIMARY_COLOR = blue[500];\r\nexport const CONTACTS_APP_TEXT_COLOR = common.white;\r\n\r\nconst theme = {\r\n  palette: {\r\n    primary: {\r\n      main: CONTACTS_APP_PRIMARY_COLOR,\r\n      dark: blue[700],\r\n      light: blue[300],\r\n      contrastText: CONTACTS_APP_TEXT_COLOR,\r\n    },\r\n    secondary: {\r\n      main: '#d32f2f',\r\n      light: '#eb4242',\r\n      dark: '#941212',\r\n      contrastText: CONTACTS_APP_TEXT_COLOR,\r\n    },\r\n    success: {\r\n      main: '#2196f3',\r\n      contrastText: CONTACTS_APP_TEXT_COLOR,\r\n    },\r\n  },\r\n};\r\n\r\nexport default theme;\r\n","import { createAppThemeProvider } from '../../../os/apps/utils/createAppThemeProvider';\r\n\r\nimport contactsTheme from '../contacts.theme';\r\n\r\nexport const ContactsThemeProvider = createAppThemeProvider(contactsTheme);\r\n","import React from 'react';\r\nimport { Box, CircularProgress } from '@material-ui/core';\r\n\r\nexport const LoadingSpinner: React.FC = () => (\r\n  <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" height=\"100%\">\r\n    <CircularProgress />\r\n  </Box>\r\n);\r\n","import React from 'react';\r\nimport { AppWrapper } from '../../../ui/components';\r\nimport { AppTitle } from '../../../ui/components/AppTitle';\r\nimport { AppContent } from '../../../ui/components/AppContent';\r\nimport { useApp } from '../../../os/apps/hooks/useApps';\r\nimport { Route } from 'react-router-dom';\r\nimport ContactsInfoPage from './views/ContactInfo';\r\nimport { ContactPage } from './views/ContactsPage';\r\nimport { ContactsThemeProvider } from '../providers/ContactsThemeProvider';\r\nimport { ContactEvents } from '../../../../../typings/contact';\r\nimport PersonAddIcon from '@material-ui/icons/PersonAdd';\r\nimport Fab from '@material-ui/core/Fab';\r\nimport { useHistory } from 'react-router';\r\nimport { makeStyles, Theme } from '@material-ui/core/styles';\r\nimport { LoadingSpinner } from '../../../ui/components/LoadingSpinner';\r\n\r\nconst useStyles = makeStyles((theme: Theme) => ({\r\n  absolute: {\r\n    position: 'absolute',\r\n    right: theme.spacing(3),\r\n    bottom: theme.spacing(2),\r\n  },\r\n}));\r\n\r\nexport const ContactsApp = () => {\r\n  const contacts = useApp('CONTACTS');\r\n  const history = useHistory();\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <ContactsThemeProvider>\r\n      <AppWrapper id=\"contact-app\">\r\n        <AppTitle app={contacts} />\r\n        <AppContent>\r\n          <React.Suspense fallback={<LoadingSpinner />}>\r\n            <Route path=\"/contacts/\" exact component={ContactPage} />\r\n            <Route path=\"/contacts/:id\" exact component={ContactsInfoPage} />\r\n          </React.Suspense>\r\n        </AppContent>\r\n        <Fab\r\n          color=\"primary\"\r\n          onClick={() => history.push('/contacts/-1')}\r\n          className={classes.absolute}\r\n        >\r\n          <PersonAddIcon />\r\n        </Fab>\r\n      </AppWrapper>\r\n    </ContactsThemeProvider>\r\n  );\r\n};\r\n","import React, { useReducer } from 'react';\r\nimport { Grid, Button } from '@material-ui/core';\r\n\r\nconst initialState = {\r\n  value: 0,\r\n  op: '',\r\n  num1: 0,\r\n  num2: '',\r\n  num3: '',\r\n};\r\n\r\nconst Reducer = (state, action) => {\r\n  switch (action.type) {\r\n    case '2':\r\n      if (!state.num1) {\r\n        return { ...state, num1: state.num2, op: action.payload, num2: '' };\r\n      }\r\n      if (!state.num2) {\r\n        return { ...state, op: action.payload };\r\n      }\r\n      if (state.num1 && state.op) {\r\n        return {\r\n          ...state,\r\n          value: state.op(state.value, state.num2),\r\n          op: action.payload,\r\n        };\r\n      }\r\n      return {\r\n        ...state,\r\n        value: state.op(state.num1, state.num2),\r\n        num2: '',\r\n        op: action.payload,\r\n        num1: state.op(state.num1, state.num2),\r\n      };\r\n\r\n    case '1':\r\n      if (state.num2 === '' && action.payload === '.') {\r\n        return { ...state, num2: '0' + action.payload };\r\n      }\r\n      if (state.num2 === '') {\r\n        return { ...state, num2: action.payload };\r\n      }\r\n      if (action.payload === '.' && state.num2.includes('.')) {\r\n        return state;\r\n      } else {\r\n        return { ...state, num2: state.num2 + action.payload };\r\n      }\r\n\r\n    case '3':\r\n      if (state.op && state.num2) {\r\n        return {\r\n          ...state,\r\n          value: state.op(state.num1, state.num2),\r\n          num2: '',\r\n          num1: state.op(state.num1, state.num2),\r\n          num3: state.num2,\r\n        };\r\n      }\r\n      if (state.op && state.value) {\r\n        return { ...state, value: state.op(state.value, state.num3) };\r\n      }\r\n      return state;\r\n\r\n    case 'c':\r\n      if (state.num2.length === 2 && state.num2.includes('0.')) {\r\n        return { ...state, num2: '' };\r\n      }\r\n      if (state.num2.length > 1) {\r\n        return { ...state, num2: state.num2.slice(0, -1) };\r\n      }\r\n      return { ...state, num2: '' };\r\n\r\n    case 'ac':\r\n      return {\r\n        value: 0,\r\n        op: '',\r\n        num1: 0,\r\n        num2: '',\r\n        num3: '',\r\n      };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport const CalcButton = ({ button, className, ...props }) => (\r\n  <Grid key={button.label} item xs={3} {...props}>\r\n    <Button fullWidth className={className} onClick={button.onClick}>\r\n      {button.label}\r\n    </Button>\r\n  </Grid>\r\n);\r\n\r\nexport const useCalculator = () => {\r\n  const [state, dispatch] = useReducer(Reducer, initialState);\r\n\r\n  const getPayload = (label, type) => {\r\n    if (type !== '2') {\r\n      return `${label}`;\r\n    }\r\n    switch (label) {\r\n      case '/':\r\n        return (a, b) => Number(a) / Number(b);\r\n      case '*':\r\n        return (a, b) => Number(a) * Number(b);\r\n      case '+':\r\n        return (a, b) => Number(a) + Number(b);\r\n      case '-':\r\n        return (a, b) => Number(a) - Number(b);\r\n      default:\r\n        break;\r\n    }\r\n  };\r\n\r\n  const buttonProps = (label, type) => ({\r\n    label,\r\n    onClick: () =>\r\n      dispatch({\r\n        type,\r\n        payload: getPayload(label, type),\r\n      }),\r\n  });\r\n\r\n  const number = (n) => buttonProps(n, '1');\r\n  const operator = (sym) => buttonProps(sym, '2');\r\n  const clear = buttonProps('C', 'c');\r\n  const clearAll = buttonProps('AC', 'ac');\r\n  const equals = buttonProps('=', '3');\r\n  const zero = number(0);\r\n  const dot = number('.');\r\n  const divider = operator('/');\r\n  const multiplier = operator('*');\r\n  const adder = operator('+');\r\n  const substractor = operator('-');\r\n  const one = number(1);\r\n  const two = number(2);\r\n  const three = number(3);\r\n  const four = number(4);\r\n  const five = number(5);\r\n  const six = number(6);\r\n  const seven = number(7);\r\n  const eight = number(8);\r\n  const nine = number(9);\r\n  const result = (): number => (!state.num2 ? state.value : state.num2);\r\n\r\n  return {\r\n    result,\r\n    equals,\r\n    clear,\r\n    clearAll,\r\n    divider,\r\n    multiplier,\r\n    substractor,\r\n    adder,\r\n    dot,\r\n    zero,\r\n    one,\r\n    two,\r\n    three,\r\n    four,\r\n    five,\r\n    six,\r\n    seven,\r\n    eight,\r\n    nine,\r\n  };\r\n};\r\n","export const setClipboard = (value: string) => {\r\n  // 420 Blaze it\r\n  // YOLO\r\n  // Only live once for tonight\r\n  const clipElem = document.createElement('input');\r\n  clipElem.value = value;\r\n  document.body.appendChild(clipElem);\r\n  clipElem.select();\r\n  document.execCommand('copy');\r\n  document.body.removeChild(clipElem);\r\n};\r\n","import React, { useMemo } from 'react';\r\nimport { useCalculator, CalcButton } from '../hooks/useCalculator';\r\nimport { Grid, makeStyles, Box, Paper, Fab } from '@material-ui/core';\r\nimport { setClipboard } from '../../../os/phone/hooks/useClipboard';\r\nimport FileCopyIcon from '@material-ui/icons/FileCopy';\r\nimport { useSnackbar } from '../../../ui/hooks/useSnackbar';\r\nimport { useTranslation } from 'react-i18next';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  button: {\r\n    fontSize: theme.typography.h5.fontSize,\r\n    padding: theme.spacing(2),\r\n  },\r\n  result: {\r\n    fontSize: theme.typography.h2.fontSize,\r\n    textAlign: 'right',\r\n    overflow: 'hidden',\r\n    textOverflow: 'ellipsis',\r\n    position: 'relative',\r\n  },\r\n  copyFab: {\r\n    position: 'absolute',\r\n    top: '16px',\r\n    left: '16px',\r\n  },\r\n}));\r\n\r\nexport const Calculator = ({ ...props }) => {\r\n  const {\r\n    result,\r\n    equals,\r\n    clear,\r\n    clearAll,\r\n    divider,\r\n    multiplier,\r\n    substractor,\r\n    adder,\r\n    dot,\r\n    zero,\r\n    one,\r\n    two,\r\n    three,\r\n    four,\r\n    five,\r\n    six,\r\n    seven,\r\n    eight,\r\n    nine,\r\n  } = useCalculator();\r\n\r\n  const { addAlert } = useSnackbar();\r\n\r\n  const classes = useStyles();\r\n  const resultStr = useMemo(\r\n    () =>\r\n      result().toLocaleString(undefined, {\r\n        minimumFractionDigits: 0,\r\n        maximumFractionDigits: 4,\r\n      }),\r\n    [result],\r\n  );\r\n\r\n  const { t } = useTranslation();\r\n\r\n  return (\r\n    <Box display=\"flex\" flexDirection=\"column\">\r\n      <Box flexGrow={1} component={Paper} p={4} className={classes.result}>\r\n        <Fab\r\n          size=\"small\"\r\n          onClick={() => {\r\n            setClipboard(resultStr);\r\n            addAlert({\r\n              message: t('GENERIC_WRITE_TO_CLIPBOARD_MESSAGE', {\r\n                content: 'number',\r\n              }),\r\n              type: 'success',\r\n            });\r\n          }}\r\n          className={classes.copyFab}\r\n        >\r\n          <FileCopyIcon />\r\n        </Fab>\r\n        {resultStr}\r\n      </Box>\r\n      <Box>\r\n        <Grid container justify=\"space-around\">\r\n          <CalcButton button={clear} className={classes.button} />\r\n          <CalcButton button={clearAll} className={classes.button} />\r\n          <CalcButton button={divider} className={classes.button} />\r\n          <CalcButton button={multiplier} className={classes.button} />\r\n          <CalcButton button={seven} className={classes.button} />\r\n          <CalcButton button={eight} className={classes.button} />\r\n          <CalcButton button={nine} className={classes.button} />\r\n          <CalcButton button={substractor} className={classes.button} />\r\n          <CalcButton button={four} className={classes.button} />\r\n          <CalcButton button={five} className={classes.button} />\r\n          <CalcButton button={six} className={classes.button} />\r\n          <CalcButton button={adder} className={classes.button} />\r\n          <CalcButton button={one} className={classes.button} />\r\n          <CalcButton button={two} className={classes.button} />\r\n          <CalcButton button={three} className={classes.button} />\r\n          <CalcButton button={equals} className={classes.button} />\r\n          <CalcButton button={dot} className={classes.button} />\r\n          <CalcButton button={zero} className={classes.button} xs={9} />\r\n        </Grid>\r\n      </Box>\r\n    </Box>\r\n  );\r\n};\r\n","import React from 'react';\r\nimport { AppWrapper } from '../../../ui/components';\r\nimport { AppTitle } from '../../../ui/components/AppTitle';\r\nimport { AppContent } from '../../../ui/components/AppContent';\r\nimport { Calculator } from './Calculator';\r\nimport { useApp } from '../../../os/apps/hooks/useApps';\r\n\r\nexport const CalculatorApp = () => {\r\n  const calculator = useApp('CALCULATOR');\r\n  return (\r\n    <AppWrapper>\r\n      <AppTitle app={calculator} />\r\n      <AppContent>\r\n        <Calculator />\r\n      </AppContent>\r\n    </AppWrapper>\r\n  );\r\n};\r\n","import React from 'react';\r\nimport { ListItemIcon, ListItemText, Slide, makeStyles, Paper } from '@material-ui/core';\r\nimport { List } from './List';\r\nimport { ListItem } from './ListItem';\r\nimport { useTranslation } from 'react-i18next';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    borderTop: '1px solid',\r\n    borderColor: theme.palette.primary.main,\r\n    width: '100%',\r\n    position: 'absolute',\r\n    bottom: 0,\r\n    zIndex: 2,\r\n  },\r\n}));\r\n\r\nexport interface IContextMenuOption {\r\n  onClick(e, option): void;\r\n  label: string;\r\n  description?: string;\r\n  selected?: boolean;\r\n  icon?: React.ReactNode;\r\n  key?: string;\r\n}\r\n\r\ninterface IContextMenuProps {\r\n  open: boolean;\r\n  onClose(): void;\r\n  options: Array<IContextMenuOption>;\r\n}\r\n\r\nexport const ContextMenu = ({ open, onClose, options }: IContextMenuProps) => {\r\n  const classes = useStyles();\r\n  const { t } = useTranslation();\r\n\r\n  const _options = onClose\r\n    ? [\r\n        ...options,\r\n        {\r\n          label: t('GENERIC_CLOSE'),\r\n          onClick: onClose,\r\n        } as IContextMenuOption,\r\n      ]\r\n    : options;\r\n\r\n  return (\r\n    <Slide direction=\"up\" in={open} mountOnEnter unmountOnExit>\r\n      <Paper square className={classes.root}>\r\n        <List disablePadding>\r\n          {_options.map((option) => (\r\n            <ListItem\r\n              selected={option.selected}\r\n              key={option.key || option.label}\r\n              button\r\n              onClick={(e) => {\r\n                option.onClick(e, option);\r\n                onClose();\r\n              }}\r\n            >\r\n              {option.icon && <ListItemIcon>{option.icon}</ListItemIcon>}\r\n              <ListItemText primary={option.label} secondary={option.description} />\r\n            </ListItem>\r\n          ))}\r\n        </List>\r\n      </Paper>\r\n    </Slide>\r\n  );\r\n};\r\n","import React, { useState } from 'react';\r\nimport { ContextMenu, IContextMenuOption } from '../components/ContextMenu';\r\n\r\ntype UseContextMenu = [any, any, () => JSX.Element, boolean];\r\n\r\nexport const MapStringOptions = (current, onClick) => (string) => {\r\n  return {\r\n    selected: current === string,\r\n    label: string,\r\n    key: string,\r\n    onClick: () => onClick(string),\r\n  };\r\n};\r\n\r\nexport interface SettingOption<T = any> {\r\n  label: string;\r\n  value: T | string | number;\r\n}\r\n\r\nexport const MapSettingItem = (current: SettingOption, onClick: Function) => (\r\n  item: SettingOption,\r\n) => ({\r\n  selected: current.value === item.value,\r\n  onClick: () => onClick(item),\r\n  key: item.value,\r\n  label: item.label,\r\n});\r\n\r\nexport const useContextMenu = (_options?: IContextMenuOption[]): UseContextMenu => {\r\n  const [open, setOpen] = useState(false);\r\n  const [options, setOptions] = useState(_options || []);\r\n\r\n  const onClose = () => setOpen(false);\r\n\r\n  const onOpen = (opts) => {\r\n    setOptions(opts);\r\n    setOpen(true);\r\n  };\r\n\r\n  return [\r\n    onOpen,\r\n    onClose,\r\n    () => <ContextMenu open={open} onClose={onClose} options={options} />,\r\n    open,\r\n  ];\r\n};\r\n","import Default from '../default.json';\r\nimport { atom, useRecoilState } from 'recoil';\r\n\r\nconst configState = atom({\r\n  key: 'config',\r\n  default: Default,\r\n});\r\n\r\n// This is NOT the resource config but instead the NUI specific config,\r\n// this means that if there are changs to the config in `../default.json`,\r\n// it will require a rebuild for those to take effect.\r\nexport const usePhoneConfig = (state: any = configState): any => {\r\n  const [config, _setConfig] = useRecoilState(state);\r\n\r\n  const setConfig = (key, value) => {\r\n    _setConfig((oldConfig) => ({\r\n      ...oldConfig,\r\n      [key]: value,\r\n    }));\r\n    //setVal(key, value);\r\n  };\r\n\r\n  return [config, setConfig];\r\n};\r\n","import React from 'react';\r\nimport {\r\n  ListItem,\r\n  ListItemText,\r\n  ListItemIcon,\r\n  ListItemSecondaryAction,\r\n  Box,\r\n  Slider,\r\n  IconButton,\r\n  Tooltip,\r\n  Typography,\r\n  Switch,\r\n} from '@material-ui/core';\r\n\r\ninterface ISettingItem {\r\n  options?: any;\r\n  label: string;\r\n  value?: string | object | number | null;\r\n  onClick?: any;\r\n  icon: JSX.Element;\r\n}\r\n\r\nexport const SettingItem = ({ options, label, value, onClick, icon }: ISettingItem) => (\r\n  <ListItem divider onClick={() => onClick?.(options)} button>\r\n    <ListItemIcon>{icon}</ListItemIcon>\r\n    <ListItemText primary={label} secondary={value ? value : undefined} />\r\n  </ListItem>\r\n);\r\n\r\ninterface ISettingSlider {\r\n  label: string;\r\n  icon: JSX.Element;\r\n  value: number;\r\n  onCommit: (event: React.ChangeEvent<{}>, value: number | number[]) => void;\r\n}\r\n\r\nexport const SettingItemSlider = ({ icon, label, value, onCommit }: ISettingSlider) => (\r\n  <ListItem divider>\r\n    <ListItemIcon>{icon}</ListItemIcon>\r\n    <ListItemText primary={label} secondary={`${value}%`} />\r\n    <ListItemSecondaryAction>\r\n      <Box p={2} width={150}>\r\n        <Slider\r\n          key={`slider-${value}`}\r\n          defaultValue={value}\r\n          min={0}\r\n          max={100}\r\n          valueLabelDisplay=\"auto\"\r\n          onChangeCommitted={onCommit}\r\n        />\r\n      </Box>\r\n    </ListItemSecondaryAction>\r\n  </ListItem>\r\n);\r\n\r\ninterface ISettingItemIconAction {\r\n  icon: JSX.Element;\r\n  actionIcon: JSX.Element;\r\n  label: string;\r\n  labelSecondary: string;\r\n  handleAction: () => void;\r\n  actionLabel: string;\r\n}\r\n\r\ninterface ISettingSwitch {\r\n  label: string;\r\n  value: boolean;\r\n  onClick: any;\r\n  icon: JSX.Element;\r\n  secondary: string;\r\n}\r\n\r\nexport const SettingSwitch = ({ label, value, onClick, icon, secondary }: ISettingSwitch) => (\r\n  <ListItem divider>\r\n    <ListItemIcon>{icon}</ListItemIcon>\r\n    <ListItemText primary={label} secondary={secondary} />\r\n    <ListItemSecondaryAction>\r\n      <Switch color=\"primary\" checked={value} onChange={() => onClick(value)} />\r\n    </ListItemSecondaryAction>\r\n  </ListItem>\r\n);\r\n\r\nexport const SettingItemIconAction = ({\r\n  icon,\r\n  label,\r\n  handleAction,\r\n  actionIcon,\r\n  labelSecondary,\r\n  actionLabel,\r\n}: ISettingItemIconAction) => (\r\n  <>\r\n    <ListItem divider>\r\n      <ListItemIcon>{icon}</ListItemIcon>\r\n      <ListItemText primary={label} secondary={labelSecondary} />\r\n      <ListItemSecondaryAction>\r\n        <Tooltip\r\n          arrow\r\n          title={<Typography variant=\"body2\">{actionLabel}</Typography>}\r\n          placement=\"top-end\"\r\n        >\r\n          <IconButton edge=\"end\" onClick={handleAction}>\r\n            {actionIcon}\r\n          </IconButton>\r\n        </Tooltip>\r\n      </ListItemSecondaryAction>\r\n    </ListItem>\r\n  </>\r\n);\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Button, DialogContent, DialogContentText, DialogTitle, Paper } from '@material-ui/core';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    paddingLeft: '10px',\r\n    zIndex: 10,\r\n    width: '90%',\r\n    display: 'flex',\r\n    flexFlow: 'column nowrap',\r\n    position: 'absolute',\r\n    top: '80px',\r\n  },\r\n  displayBlock: {\r\n    /*Sets modal to center*/\r\n    display: 'flex',\r\n    flexFlow: 'column nowrap',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    position: 'relative',\r\n  },\r\n  displayNone: {\r\n    display: 'none',\r\n  },\r\n});\r\n\r\ninterface DialogFormProps {\r\n  children: React.ReactNode;\r\n  open: boolean;\r\n  handleClose: (event: React.MouseEvent<HTMLButtonElement, MouseEvent>) => void; // No idea what those types are\r\n  onSubmit: (event: React.MouseEvent<HTMLButtonElement, MouseEvent>) => void;\r\n  title: string;\r\n  content: string;\r\n}\r\n\r\nexport default function DialogForm({\r\n  children,\r\n  open,\r\n  handleClose,\r\n  onSubmit,\r\n  title,\r\n  content,\r\n}: DialogFormProps) {\r\n  const classes = useStyles();\r\n\r\n  const showHideClassName = open ? classes.displayBlock : classes.displayNone;\r\n\r\n  return (\r\n    <div className={showHideClassName}>\r\n      <Paper className={classes.root}>\r\n        <DialogTitle id=\"form-dialog-title\">{title}</DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText>{content}</DialogContentText>\r\n          {children}\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button color=\"primary\" onClick={handleClose}>\r\n            Cancel\r\n          </Button>\r\n          <Button color=\"primary\" onClick={onSubmit}>\r\n            Confirm\r\n          </Button>\r\n        </DialogActions>\r\n      </Paper>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState } from 'react';\r\nimport { useCustomWallpaperModal, useSettings } from '../hooks/useSettings';\r\nimport { useTranslation } from 'react-i18next';\r\nimport DialogForm from '../../../ui/components/DialogForm';\r\nimport { useSnackbar } from '../../../ui/hooks/useSnackbar';\r\nimport { TextField } from '../../../ui/components/Input';\r\n\r\nexport default function WallpaperModal() {\r\n  const { customWallpaperModal, setCustomWallpaperModal } = useCustomWallpaperModal();\r\n  const [settings, setSettings] = useSettings();\r\n  const { t } = useTranslation();\r\n  const [value, setValue] = useState(settings.wallpaper.value ? settings.wallpaper.value : '');\r\n  const { addAlert } = useSnackbar();\r\n\r\n  const isImageAndUrl = (url) => {\r\n    return /(http(s?):)([/|.|\\w|\\s|-])*\\.(?:jpg|png|jpeg|gif)/g.test(url);\r\n  };\r\n\r\n  const handleSettingChange = (key: string | number, value: unknown) => {\r\n    setSettings({ ...settings, [key]: value });\r\n  };\r\n\r\n  const handleNewWallpaper = () => {\r\n    if (isImageAndUrl(value)) {\r\n      handleSettingChange('wallpaper', {\r\n        label: 'APPS_SETTINGS_OPTIONS_CUSTOM_WALLPAPER',\r\n        value,\r\n      });\r\n      setCustomWallpaperModal(false);\r\n    } else {\r\n      addAlert({ message: t('SETTINGS.OPTIONS.CUSTOM_WALLPAPER.DIALOG_ERROR'), type: 'error' });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <DialogForm\r\n      open={customWallpaperModal}\r\n      handleClose={() => setCustomWallpaperModal(false)}\r\n      onSubmit={handleNewWallpaper}\r\n      title={t('SETTINGS.OPTIONS.CUSTOM_WALLPAPER.DIALOG_TITLE')}\r\n      content={t('SETTINGS.OPTIONS.CUSTOM_WALLPAPER.DIALOG_CONTENT')}\r\n    >\r\n      <TextField\r\n        value={value}\r\n        error={!isImageAndUrl(value) && true}\r\n        onChange={(e) => setValue(e.currentTarget.value)}\r\n        placeholder={t('SETTINGS.OPTIONS.CUSTOM_WALLPAPER.DIALOG_PLACEHOLDER')}\r\n        fullWidth\r\n      />\r\n    </DialogForm>\r\n  );\r\n}\r\n","export interface Message {\r\n  id: number;\r\n  message: string;\r\n  user_identifier: string;\r\n  phone_number: string;\r\n  groupId?: string;\r\n  display?: string;\r\n  avatar?: string;\r\n  isRead: boolean;\r\n  isMine: boolean;\r\n  updatedAt: string;\r\n}\r\n\r\nexport interface MessageGroup {\r\n  groupId: string;\r\n  groupDisplay: string;\r\n  isGroupChat: boolean;\r\n  avatar?: string;\r\n  label?: string;\r\n  updatedAt: string;\r\n  unreadCount: number;\r\n  phoneNumbers: string[];\r\n  participants: string[];\r\n}\r\n\r\n/**\r\n * Used for the raw npwd_messages_groups row responses\r\n */\r\nexport interface UnformattedMessageGroup {\r\n  group_id: string;\r\n  user_identifier: string;\r\n  participant_identifier: string;\r\n  phone_number: string;\r\n  label?: string;\r\n  avatar?: string;\r\n  display?: string;\r\n  updatedAt: string;\r\n  unreadCount: number;\r\n}\r\n\r\n/**\r\n * Used to help consolidate raw npwd_messages_groups rows into\r\n * a mapping of a single message group\r\n */\r\nexport interface MessageGroupMapping {\r\n  [groupId: string]: {\r\n    user_identifier: string;\r\n    // Participant displays\r\n    participants: string[];\r\n    phoneNumbers: string[];\r\n    label?: string;\r\n    avatar?: string;\r\n    updatedAt: string;\r\n    unreadCount: number;\r\n  };\r\n}\r\n\r\nexport interface CreateMessageGroupResult {\r\n  error?: boolean;\r\n  phoneNumber?: string;\r\n  duplicate?: boolean;\r\n  groupId?: string;\r\n  mine?: boolean;\r\n  identifiers?: string[];\r\n  allNumbersFailed?: boolean;\r\n  failedNumbers: string[];\r\n}\r\n\r\nexport interface CreateMessageBroadcast {\r\n  message: string;\r\n  groupName: string;\r\n  groupId: string;\r\n}\r\n\r\nexport interface SetMessageRead {\r\n  groupId: string;\r\n}\r\n\r\nexport enum MessageEvents {\r\n  FETCH_MESSAGE_GROUPS = 'npwd:fetchMessageGroups',\r\n  FETCH_MESSAGE_GROUPS_SUCCESS = 'npwd:fetchMessageGroupsSuccess',\r\n  FETCH_MESSAGE_GROUPS_FAILED = 'npwd:fetchMessageGroupsFailed',\r\n  CREATE_MESSAGE_GROUP = 'npwd:createMessageGroup',\r\n  CREATE_MESSAGE_GROUP_SUCCESS = 'npwd:createMessageGroupSuccess',\r\n  CREATE_MESSAGE_GROUP_FAILED = 'npwd:createMessageGroupFailed',\r\n  SEND_MESSAGE = 'npwd:sendMessage',\r\n  SEND_MESSAGE_SUCCESS = 'npwd:sendMessageSuccess',\r\n  SEND_MESSAGE_FAILED = 'npwd:sendMessageFailed',\r\n  FETCH_MESSAGES = 'npwd:fetchMessages',\r\n  FETCH_MESSAGES_SUCCESS = 'npwd:fetchMessagesSuccess',\r\n  FETCH_MESSAGES_FAILED = 'npwd:fetchMessagesFailed',\r\n  ACTION_RESULT = 'npwd:setMessagesAlert',\r\n  CREATE_MESSAGE_BROADCAST = 'createMessagesBroadcast',\r\n  SET_MESSAGE_READ = 'npwd:setReadMessages',\r\n}\r\n","import React from 'react';\r\nimport { AppWrapper } from '../../../ui/components';\r\nimport { AppTitle } from '../../../ui/components/AppTitle';\r\nimport { AppContent } from '../../../ui/components/AppContent';\r\nimport { useContextMenu, MapSettingItem, SettingOption } from '../../../ui/hooks/useContextMenu';\r\nimport { usePhoneConfig } from '../../../config/hooks/usePhoneConfig';\r\nimport { List } from '../../../ui/components/List';\r\nimport { useSimcard } from '../../../os/simcard/hooks/useSimcard';\r\nimport { IconSetObject, useApp } from '../../../os/apps/hooks/useApps';\r\nimport {\r\n  SettingItem,\r\n  SettingItemIconAction,\r\n  SettingItemSlider,\r\n  SettingSwitch,\r\n} from './SettingItem';\r\nimport { useTranslation } from 'react-i18next';\r\nimport VisibilityOffIcon from '@material-ui/icons/VisibilityOff';\r\nimport {\r\n  FilterList,\r\n  Brush,\r\n  Wallpaper,\r\n  Phone,\r\n  Smartphone,\r\n  ZoomIn,\r\n  LibraryMusic,\r\n  VolumeUp,\r\n  FileCopy,\r\n  Book,\r\n  DeleteForever,\r\n  Apps,\r\n} from '@material-ui/icons';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { ListSubheader } from '@material-ui/core';\r\nimport { useCustomWallpaperModal, useResetSettings, useSettings } from '../hooks/useSettings';\r\nimport { setClipboard } from '../../../os/phone/hooks/useClipboard';\r\nimport { useSnackbar } from '../../../ui/hooks/useSnackbar';\r\nimport { IContextMenuOption } from '../../../ui/components/ContextMenu';\r\nimport WallpaperModal from './WallpaperModal';\r\n\r\nconst SubHeaderComp = (props: { text: string }) => (\r\n  <ListSubheader color=\"primary\" component=\"div\" disableSticky>\r\n    {props.text}\r\n  </ListSubheader>\r\n);\r\n\r\nconst useStyles = makeStyles({\r\n  backgroundModal: {\r\n    background: 'black',\r\n    opacity: '0.6',\r\n    position: 'absolute',\r\n    top: 0,\r\n    left: 0,\r\n    right: 0,\r\n    bottom: 0,\r\n    zIndex: 5,\r\n  },\r\n});\r\n\r\nexport const SettingsApp = () => {\r\n  const settingsApp = useApp('SETTINGS');\r\n  const [config] = usePhoneConfig();\r\n  const simcard = useSimcard();\r\n  const [settings, setSettings] = useSettings();\r\n  const { t } = useTranslation();\r\n  const { customWallpaperModal, setCustomWallpaperModal } = useCustomWallpaperModal();\r\n\r\n  const { addAlert } = useSnackbar();\r\n\r\n  const resetSettings = useResetSettings();\r\n\r\n  const handleSettingChange = (key: string | number, value: unknown) => {\r\n    setSettings({ ...settings, [key]: value });\r\n  };\r\n\r\n  const iconSets = config.iconSet.map(\r\n    MapSettingItem(settings.iconSet, (val: SettingOption<IconSetObject>) =>\r\n      handleSettingChange('iconSet', val),\r\n    ),\r\n  );\r\n\r\n  const wallpapers = config.wallpapers.map(\r\n    MapSettingItem(settings.wallpaper, (val: SettingOption) => {\r\n      handleSettingChange('wallpaper', val);\r\n    }),\r\n  );\r\n  const frames = config.frames.map(\r\n    MapSettingItem(settings.frame, (val: SettingOption) => handleSettingChange('frame', val)),\r\n  );\r\n  const themes = config.themes.map(\r\n    MapSettingItem(settings.theme, (val: SettingOption) => handleSettingChange('theme', val)),\r\n  );\r\n  const zoomOptions = config.zoomOptions.map(\r\n    MapSettingItem(settings.zoom, (val: SettingOption) => handleSettingChange('zoom', val)),\r\n  );\r\n  const ringtones = config.ringtones.map(\r\n    MapSettingItem(settings.ringtone, (val: SettingOption) => handleSettingChange('ringtone', val)),\r\n  );\r\n  const notifications = config.notiSounds.map(\r\n    MapSettingItem(settings.notiSound, (val: SettingOption) =>\r\n      handleSettingChange('notiSound', val),\r\n    ),\r\n  );\r\n\r\n  const twitterNotifications = config.notiSounds.map(\r\n    MapSettingItem(settings.TWITTER_notiSound, (val: SettingOption) =>\r\n      handleSettingChange('TWITTER_notiSound', val),\r\n    ),\r\n  );\r\n\r\n  const twitterNotificationFilters = config.notiFilters.map(\r\n    MapSettingItem(settings.TWITTER_notiFilter, (val: SettingOption) =>\r\n      handleSettingChange('TWITTER_notiFilter', val),\r\n    ),\r\n  );\r\n\r\n  const languages = config.languages.map(\r\n    MapSettingItem(settings.language, (val: SettingOption) => handleSettingChange('language', val)),\r\n  );\r\n\r\n  const handleResetOptions = () => {\r\n    resetSettings();\r\n    addAlert({\r\n      message: t('SETTINGS.MESSAGES.SETTINGS_RESET'),\r\n      type: 'success',\r\n    });\r\n  };\r\n\r\n  const resetSettingsOpts: IContextMenuOption[] = [\r\n    {\r\n      selected: false,\r\n      onClick: () => handleResetOptions(),\r\n      key: 'RESET_SETTINGS',\r\n      label: t('SETTINGS.OPTIONS.RESET_SETTINGS'),\r\n    },\r\n  ];\r\n\r\n  const customWallpaper: IContextMenuOption = {\r\n    selected: false,\r\n    onClick: () => setCustomWallpaperModal(true),\r\n    key: 'CUSTOM_WALLPAPER',\r\n    label: t('APPS_SETTINGS_OPTIONS_CUSTOM_WALLPAPER'),\r\n  };\r\n\r\n  const handleCopyPhoneNumber = () => {\r\n    setClipboard(simcard.number);\r\n    addAlert({\r\n      message: t('GENERIC_WRITE_TO_CLIPBOARD_MESSAGE', {\r\n        content: 'number',\r\n      }),\r\n      type: 'success',\r\n    });\r\n  };\r\n\r\n  const [openMenu, closeMenu, ContextMenu, isMenuOpen] = useContextMenu();\r\n  const classes = useStyles();\r\n  return (\r\n    <AppWrapper>\r\n      <AppTitle app={settingsApp} />\r\n      <WallpaperModal />\r\n      <div className={customWallpaperModal ? classes.backgroundModal : undefined} />\r\n      <AppContent backdrop={isMenuOpen} onClickBackdrop={closeMenu}>\r\n        <List disablePadding subheader={<SubHeaderComp text={t('SETTINGS.CATEGORY.PHONE')} />}>\r\n          <SettingItemIconAction\r\n            label={t('APPS_SETTINGS_PHONE_NUMBER')}\r\n            labelSecondary={simcard.number}\r\n            actionLabel={t('GENERIC_WRITE_TO_CLIPBOARD_TOOLTIP', {\r\n              content: 'number',\r\n            })}\r\n            icon={<Phone />}\r\n            actionIcon={<FileCopy />}\r\n            handleAction={handleCopyPhoneNumber}\r\n          />\r\n          <SettingItem\r\n            label={t('APPS_SETTINGS_OPTION_RINGTONE')}\r\n            value={settings.ringtone.label}\r\n            options={ringtones}\r\n            onClick={openMenu}\r\n            icon={<LibraryMusic />}\r\n          />\r\n          <SettingItemSlider\r\n            label={t('APPS_SETTINGS_OPTION_RINGTONEVOL')}\r\n            icon={<VolumeUp />}\r\n            value={settings.ringtoneVol}\r\n            onCommit={(e, val) => handleSettingChange('ringtoneVol', val)}\r\n          />\r\n          <SettingItem\r\n            label={t('APPS_SETTINGS_OPTION_NOTIFICATION')}\r\n            value={settings.notiSound.label}\r\n            options={notifications}\r\n            onClick={openMenu}\r\n            icon={<LibraryMusic />}\r\n          />\r\n          <SettingItemSlider\r\n            label={t('APPS_SETTINGS_OPTION_NOTIFICATIONVOL')}\r\n            icon={<VolumeUp />}\r\n            value={settings.notiSoundVol}\r\n            onCommit={(e, val) => handleSettingChange('notiSoundVol', val)}\r\n          />\r\n          <SettingSwitch\r\n            label={t('APPS_SETTINGS_OPTION_STREAMER_MODE')}\r\n            secondary={t('APPS_SETTING_STREAMER_MODE_DESC')}\r\n            icon={<VisibilityOffIcon />}\r\n            value={settings.streamerMode}\r\n            onClick={(curr) => handleSettingChange('streamerMode', !curr)}\r\n          />\r\n        </List>\r\n        <List disablePadding subheader={<SubHeaderComp text={t('SETTINGS.CATEGORY.APPEARANCE')} />}>\r\n          <SettingItem\r\n            label={t('SETTINGS.OPTIONS.LANGUAGE')}\r\n            value={settings.language.label}\r\n            options={languages}\r\n            onClick={openMenu}\r\n            icon={<Book />}\r\n          />\r\n          <SettingItem\r\n            label={t('APPS_SETTINGS_OPTION_THEME')}\r\n            value={settings.theme.label}\r\n            options={themes}\r\n            onClick={openMenu}\r\n            icon={<Brush />}\r\n          />\r\n          <SettingItem\r\n            label={t('SETTINGS.OPTIONS.ICONSET')}\r\n            value={settings.iconSet.label}\r\n            options={iconSets}\r\n            onClick={openMenu}\r\n            icon={<Apps />}\r\n          />\r\n          <SettingItem\r\n            label={t('APPS_SETTINGS_OPTION_WALLPAPER')}\r\n            value={t(settings.wallpaper.label)}\r\n            options={[...wallpapers, customWallpaper]}\r\n            onClick={openMenu}\r\n            icon={<Wallpaper />}\r\n          />\r\n          <SettingItem\r\n            label={t('APPS_SETTINGS_OPTION_FRAME')}\r\n            value={settings.frame.label}\r\n            options={frames}\r\n            onClick={openMenu}\r\n            icon={<Smartphone />}\r\n          />\r\n          <SettingItem\r\n            label={t('APPS_SETTINGS_OPTION_ZOOM')}\r\n            value={settings.zoom.label}\r\n            options={zoomOptions}\r\n            onClick={openMenu}\r\n            icon={<ZoomIn />}\r\n          />\r\n        </List>\r\n        <List disablePadding subheader={<SubHeaderComp text={t('APPS_TWITTER')} />}>\r\n          <SettingItem\r\n            label={t('APPS_SETTINGS_OPTION_NOTIFICATION_FILTER')}\r\n            value={settings.TWITTER_notiFilter.label}\r\n            options={twitterNotificationFilters}\r\n            onClick={openMenu}\r\n            icon={<FilterList />}\r\n          />\r\n          <SettingItem\r\n            label={t('APPS_SETTINGS_OPTION_NOTIFICATION')}\r\n            value={settings.TWITTER_notiSound.label}\r\n            options={twitterNotifications}\r\n            onClick={openMenu}\r\n            icon={<LibraryMusic />}\r\n          />\r\n        </List>\r\n        <List disablePadding subheader={<SubHeaderComp text={t('SETTINGS.CATEGORY.ACTIONS')} />}>\r\n          <SettingItem\r\n            label={t('SETTINGS.OPTIONS.RESET_SETTINGS')}\r\n            value={`${t('SETTINGS.OPTIONS.RESET_SETTINGS_DESC')}`}\r\n            icon={<DeleteForever />}\r\n            onClick={openMenu}\r\n            options={resetSettingsOpts}\r\n          />\r\n        </List>\r\n      </AppContent>\r\n      <ContextMenu />\r\n    </AppWrapper>\r\n  );\r\n};\r\n","import { makeStyles } from '@material-ui/core';\r\n\r\nconst useStyles = makeStyles({\r\n  modalRoot: {\r\n    zIndex: 9,\r\n    position: 'absolute',\r\n    height: '100%',\r\n    width: '100%',\r\n    overflowY: 'hidden',\r\n  },\r\n  modalHide: {\r\n    display: 'none',\r\n  },\r\n  conversationHeader: {\r\n    zIndex: 10,\r\n  },\r\n  conversationContainer: {\r\n    zIndex: -1,\r\n    display: 'flex',\r\n    flexFlow: 'row wrap',\r\n    flexDirection: 'column',\r\n    position: 'absolute',\r\n    top: '0',\r\n    left: '0',\r\n    right: '0',\r\n    bottom: '0',\r\n  },\r\n  overflowAutoY: {\r\n    height: '550px',\r\n    overflowY: 'auto',\r\n    overflowX: 'hidden',\r\n  },\r\n  groupdisplay: {\r\n    width: '300px',\r\n    paddingTop: '8px',\r\n    fontSize: '24px',\r\n    whiteSpace: 'nowrap',\r\n    overflowX: 'hidden',\r\n    textOverflow: 'ellipsis',\r\n  },\r\n  largeGroupDisplay: {\r\n    width: '300px',\r\n    paddingTop: '8px',\r\n    fontSize: '20px',\r\n  },\r\n  messagesInput: {\r\n    fontSize: 20,\r\n  },\r\n});\r\n\r\nexport default useStyles;\r\n","import React, { useCallback, useEffect, useState } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { Box, Button } from '@material-ui/core';\r\nimport { useNuiRequest } from 'fivem-nui-react-lib';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { Autocomplete } from '@material-ui/lab';\r\nimport { useContactActions } from '../../../contacts/hooks/useContactActions';\r\nimport { Contact } from '../../../../../../typings/contact';\r\nimport { MessageEvents } from '../../../../../../typings/messages';\r\nimport { PHONE_NUMBER_REGEX } from '../../../../../../typings/phone';\r\nimport { useSnackbar } from '../../../../ui/hooks/useSnackbar';\r\nimport { TextField } from '../../../../ui/components/Input';\r\nimport { useContactsValue } from '../../../contacts/hooks/state';\r\n\r\nconst NewMessageGroupForm = ({ phoneNumber }: { phoneNumber?: string }) => {\r\n  const Nui = useNuiRequest();\r\n  const history = useHistory();\r\n  const { t } = useTranslation();\r\n  const { addAlert } = useSnackbar();\r\n  const [participants, setParticipants] = useState([]);\r\n  const [label, setLabel] = useState('');\r\n  const { getContactByNumber } = useContactActions();\r\n  const contacts = useContactsValue();\r\n\r\n  useEffect(() => {\r\n    if (phoneNumber) {\r\n      const find = getContactByNumber(phoneNumber) || { number: phoneNumber };\r\n      setParticipants((all) => [...all, find]);\r\n    }\r\n  }, [phoneNumber, getContactByNumber]);\r\n\r\n  const isGroupChat = participants.length > 1;\r\n\r\n  const handleSubmit = useCallback(() => {\r\n    // handles phone numbers in a csv format and strips all spaces and\r\n    // external characters out of them:\r\n    // 123-4567, 987-6543, 333-4444\r\n    const phoneNumbers = participants.map(({ number }) => number.replace(/[^0-9]/g, ''));\r\n    const labelValue = isGroupChat ? label.trim() : null;\r\n\r\n    if (phoneNumbers.length) {\r\n      Nui.send(MessageEvents.CREATE_MESSAGE_GROUP, {\r\n        phoneNumbers,\r\n        label: labelValue,\r\n      });\r\n      setParticipants([]);\r\n      history.push('/messages');\r\n    }\r\n  }, [history, label, participants, isGroupChat, Nui]);\r\n\r\n  const onAutocompleteChange = (_e, value: any) => {\r\n    const lastIdx = value.length - 1;\r\n    if (typeof value[lastIdx] === 'string') {\r\n      const isValid = PHONE_NUMBER_REGEX.test(value[lastIdx]);\r\n      if (!isValid) {\r\n        return addAlert({ message: t('APPS_MESSAGES_INVALID_PHONE_NUMBER'), type: 'error' });\r\n      }\r\n      value.splice(lastIdx, 1, { number: value[lastIdx] });\r\n      setParticipants(value);\r\n      return;\r\n    }\r\n    setParticipants(value as any[]);\r\n  };\r\n\r\n  const renderAutocompleteInput = (params) => (\r\n    <TextField\r\n      {...params}\r\n      fullWidth\r\n      label={t('APPS_MESSAGES_INPUT_NAME_OR_NUMBER')}\r\n      inputProps={{\r\n        ...params.inputProps,\r\n        onKeyPress: (e) => {\r\n          if (e.key === 'Enter' && e.currentTarget.value) {\r\n            e.preventDefault();\r\n            onAutocompleteChange(e, [...participants, e.currentTarget.value]);\r\n          }\r\n        },\r\n        autoFocus: true,\r\n      }}\r\n    />\r\n  );\r\n\r\n  const submitDisabled = !participants.length || (isGroupChat && !label);\r\n\r\n  return (\r\n    <Box>\r\n      <Box px={2} py={3}>\r\n        <Autocomplete<Contact, boolean, boolean, boolean>\r\n          value={participants}\r\n          multiple\r\n          freeSolo\r\n          autoHighlight\r\n          options={contacts || []}\r\n          getOptionLabel={(c) => c.display || c.number}\r\n          onChange={onAutocompleteChange}\r\n          renderInput={renderAutocompleteInput}\r\n        />\r\n      </Box>\r\n      {isGroupChat && (\r\n        <Box px={2} py={3}>\r\n          <TextField\r\n            fullWidth\r\n            value={label}\r\n            onChange={(e) => setLabel(e.target.value)}\r\n            placeholder={t('APPS_MESSAGES_GROUP_CHAT_LABEL')}\r\n          />\r\n        </Box>\r\n      )}\r\n      <Box px={2} py={3}>\r\n        <Button\r\n          onClick={() => handleSubmit()}\r\n          disabled={submitDisabled}\r\n          variant=\"contained\"\r\n          fullWidth\r\n          color=\"primary\"\r\n          type=\"submit\"\r\n        >\r\n          {t('APPS_MESSAGES_NEW_MESSAGE_GROUP_SUBMIT')}\r\n        </Button>\r\n      </Box>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default NewMessageGroupForm;\r\n","import React from 'react';\r\nimport { Slide, Paper, Button } from '@material-ui/core';\r\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\r\nimport useStyles from './modal.styles';\r\nimport NewMessageGroupForm from '../form/NewMessageGroupForm';\r\nimport { useHistory, useParams } from 'react-router-dom';\r\nimport { LoadingSpinner } from '../../../../ui/components/LoadingSpinner';\r\n\r\nconst MessageGroupModal = () => {\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n\r\n  const handleClose = () => history.push('/messages');\r\n\r\n  const params = useParams<{ phoneNumber?: string }>();\r\n\r\n  return (\r\n    <Slide direction=\"left\" in>\r\n      <Paper className={classes.modalRoot}>\r\n        <React.Suspense fallback={<LoadingSpinner />}>\r\n          <Button onClick={handleClose}>\r\n            <ArrowBackIcon fontSize=\"large\" />\r\n          </Button>\r\n          <NewMessageGroupForm phoneNumber={params.phoneNumber} />\r\n        </React.Suspense>\r\n      </Paper>\r\n    </Slide>\r\n  );\r\n};\r\n\r\nexport default MessageGroupModal;\r\n","import { atom } from 'recoil';\r\nimport { CreateMessageGroupResult, Message, MessageGroup } from '../../../../../typings/messages';\r\n\r\nexport const messageState = {\r\n  messageGroups: atom<MessageGroup[]>({\r\n    key: 'messageGroups',\r\n    default: [],\r\n  }),\r\n  messages: atom<Message[]>({\r\n    key: 'messages',\r\n    default: null,\r\n  }),\r\n  activeMessageGroup: atom<MessageGroup>({\r\n    key: 'activeMessageGroup',\r\n    default: null,\r\n  }),\r\n  showNewMessageGroup: atom<boolean>({\r\n    key: 'showNewMessageGroup',\r\n    default: false,\r\n  }),\r\n  createMessageGroupResult: atom<CreateMessageGroupResult>({\r\n    key: 'createMessageGroupResult',\r\n    default: null,\r\n  }),\r\n  imageModal: atom<boolean>({\r\n    key: 'useImageModal',\r\n    default: false,\r\n  }),\r\n  unreadMessagesCount: atom<number>({\r\n    key: 'unreadMessagesCount',\r\n    default: 0,\r\n  }),\r\n};\r\n","import { useCallback } from 'react';\r\nimport { useRecoilState, useRecoilValue } from 'recoil';\r\nimport {\r\n  CreateMessageGroupResult,\r\n  Message,\r\n  MessageEvents,\r\n  MessageGroup,\r\n} from '../../../../../typings/messages';\r\nimport { messageState } from './state';\r\nimport { useNuiRequest } from 'fivem-nui-react-lib';\r\nimport { useHistory } from 'react-router';\r\n\r\ninterface IUseMessages {\r\n  messages?: Message[] | null;\r\n  setMessages: (messages: Message[] | null) => void;\r\n  messageGroups?: MessageGroup[] | null;\r\n  createMessageGroupResult?: CreateMessageGroupResult | null;\r\n  clearMessageGroupResult(): void;\r\n  getMessageGroupById: (id: string) => MessageGroup | null;\r\n  setActiveMessageGroup: (groupId: string) => MessageGroup | null;\r\n  activeMessageGroup: MessageGroup | null;\r\n  goToConversation(g: Pick<MessageGroup, 'groupId'>): void;\r\n}\r\n\r\nconst useMessages = (): IUseMessages => {\r\n  const Nui = useNuiRequest();\r\n  const history = useHistory();\r\n\r\n  const [messages, setMessages] = useRecoilState<Message[] | null>(messageState.messages);\r\n  const messageGroups = useRecoilValue<MessageGroup[] | null>(messageState.messageGroups);\r\n  const [activeMessageGroup, _setActiveMessageGroup] = useRecoilState<MessageGroup | null>(\r\n    messageState.activeMessageGroup,\r\n  );\r\n\r\n  const getMessageGroupById = useCallback(\r\n    (id: string): MessageGroup | null => {\r\n      return messageGroups ? messageGroups.find((c) => c.groupId === id) : null;\r\n    },\r\n    [messageGroups],\r\n  );\r\n\r\n  const [\r\n    createMessageGroupResult,\r\n    setCreateMessageGroupResult,\r\n  ] = useRecoilState<CreateMessageGroupResult | null>(messageState.createMessageGroupResult);\r\n\r\n  const clearMessageGroupResult = () => setCreateMessageGroupResult(null);\r\n\r\n  const setActiveMessageGroup = useCallback(\r\n    (groupId: string) => {\r\n      const group = getMessageGroupById(groupId);\r\n      _setActiveMessageGroup(group);\r\n      return group;\r\n    },\r\n    [_setActiveMessageGroup, getMessageGroupById],\r\n  );\r\n\r\n  const goToConversation = (messageGroup) => {\r\n    if (!messageGroup?.groupId || !history) return;\r\n    history.push(`/messages/conversations/${messageGroup.groupId}`);\r\n    Nui.send(MessageEvents.FETCH_MESSAGES, { groupId: messageGroup.groupId });\r\n  };\r\n\r\n  return {\r\n    messages,\r\n    setMessages,\r\n    messageGroups,\r\n    createMessageGroupResult,\r\n    clearMessageGroupResult,\r\n    getMessageGroupById,\r\n    activeMessageGroup,\r\n    setActiveMessageGroup,\r\n    goToConversation,\r\n  };\r\n}\r\n\r\nexport default useMessages;\r\n","import React from 'react';\r\nimport {\r\n  ListItem,\r\n  ListItemText,\r\n  ListItemAvatar,\r\n  Avatar as MuiAvatar,\r\n  Badge,\r\n} from '@material-ui/core';\r\n\r\nimport { MessageGroup } from '../../../../../../typings/messages';\r\ninterface IProps {\r\n  messageGroup: MessageGroup;\r\n  handleClick: (group: MessageGroup) => () => void;\r\n}\r\n\r\nconst MessageGroupItem = ({ messageGroup, handleClick }: IProps): any => {\r\n  // get unread messages, check the length. If we have any, get the groupId,\r\n  // and show the badge\r\n\r\n  const hasUnread = messageGroup.unreadCount > 0;\r\n\r\n  return (\r\n    <ListItem key={messageGroup.groupId} onClick={handleClick(messageGroup)} divider button>\r\n      <ListItemAvatar>\r\n        <Badge color=\"error\" variant=\"dot\" invisible={!hasUnread}>\r\n          <MuiAvatar src={messageGroup.avatar} />\r\n        </Badge>\r\n      </ListItemAvatar>\r\n      <ListItemText>{messageGroup.label || messageGroup.groupDisplay}</ListItemText>\r\n    </ListItem>\r\n  );\r\n};\r\n\r\nexport default MessageGroupItem;\r\n","import { makeStyles } from '@material-ui/core';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    height: '580px',\r\n    overflowY: 'auto',\r\n  },\r\n}));\r\n\r\nexport default useStyles;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { Box, List } from '@material-ui/core';\r\nimport { MessageGroup } from '../../../../../../typings/messages';\r\nimport useMessages from '../../hooks/useMessages';\r\nimport MessageGroupItem from './MessageGroupItem';\r\nimport useStyles from './list.styles';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { SearchField } from '../../../../ui/components/SearchField';\r\nimport { useTranslation } from 'react-i18next';\r\n\r\nconst MessagesList = (): any => {\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n  const { t } = useTranslation();\r\n\r\n  const {\r\n    messageGroups,\r\n    goToConversation,\r\n    createMessageGroupResult,\r\n    clearMessageGroupResult,\r\n    getMessageGroupById,\r\n    setActiveMessageGroup,\r\n  } = useMessages();\r\n\r\n  const [searchValue, setSearchValue] = useState('');\r\n\r\n  const formattedSearch = searchValue.toLowerCase().trim();\r\n  const filteredGroups = formattedSearch\r\n    ? messageGroups.filter((group) => {\r\n        const groupDisplay = group.groupDisplay.toLowerCase();\r\n        const displayIncludes = groupDisplay.includes(formattedSearch);\r\n\r\n        const label = group.label?.toLowerCase();\r\n        return label ? displayIncludes || label.includes(formattedSearch) : displayIncludes;\r\n      })\r\n    : messageGroups;\r\n\r\n  useEffect(() => {\r\n    if (createMessageGroupResult?.groupId) {\r\n      const findGroup = getMessageGroupById(createMessageGroupResult.groupId);\r\n      clearMessageGroupResult();\r\n      if (findGroup) {\r\n        goToConversation(findGroup);\r\n      }\r\n    }\r\n  }, [\r\n    messageGroups,\r\n    createMessageGroupResult,\r\n    clearMessageGroupResult,\r\n    history,\r\n    setActiveMessageGroup,\r\n    getMessageGroupById,\r\n    goToConversation,\r\n  ]);\r\n\r\n  if (!messageGroups) return null;\r\n\r\n  const handleClick = (messageGroup: MessageGroup) => () => {\r\n    goToConversation(messageGroup);\r\n  };\r\n\r\n  return (\r\n    <Box display=\"flex\" flexDirection=\"column\">\r\n      <Box>\r\n        <SearchField\r\n          value={searchValue}\r\n          onChange={(e) => setSearchValue(e.target.value)}\r\n          placeholder={t('APPS_MESSAGES_SEARCH_PLACEHOLDER')}\r\n        />\r\n      </Box>\r\n      <Box display=\"flex\" flexDirection=\"column\">\r\n        <Box className={classes.root}>\r\n          <List>\r\n            {filteredGroups.map((messageGroup) => (\r\n              <MessageGroupItem\r\n                key={messageGroup.groupId}\r\n                messageGroup={messageGroup}\r\n                handleClick={handleClick}\r\n              />\r\n            ))}\r\n          </List>\r\n        </Box>\r\n      </Box>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default MessagesList;\r\n","import React, { FormEvent, useState } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { Paper, Box, makeStyles, Button } from '@material-ui/core';\r\nimport SendIcon from '@material-ui/icons/Send';\r\nimport ImageIcon from '@material-ui/icons/Image';\r\nimport { useNuiRequest } from 'fivem-nui-react-lib';\r\nimport { MessageEvents } from '../../../../../../typings/messages';\r\nimport { TextField } from '../../../../ui/components/Input';\r\n\r\ninterface IProps {\r\n  onAddImageClick(): void;\r\n  messageGroupId: string | undefined;\r\n  messageGroupName: string | undefined;\r\n}\r\n\r\nconst useStyles = makeStyles({\r\n  root: { width: '100%' },\r\n});\r\n\r\nconst MessageInput = ({ messageGroupId, onAddImageClick }: IProps) => {\r\n  const Nui = useNuiRequest();\r\n  const { t } = useTranslation();\r\n  const classes = useStyles();\r\n  const [message, setMessage] = useState('');\r\n\r\n  const handleSubmit = (event: FormEvent) => {\r\n    event.preventDefault();\r\n    if (message.trim()) {\r\n      // don't allow the user to submit white space\r\n\r\n      Nui.send(MessageEvents.SEND_MESSAGE, {\r\n        groupId: messageGroupId,\r\n        message,\r\n      });\r\n      setMessage('');\r\n    }\r\n  };\r\n\r\n  if (!messageGroupId) return null;\r\n\r\n  return (\r\n    <Paper variant=\"outlined\" className={classes.root}>\r\n      <form onSubmit={handleSubmit}>\r\n        <Box display=\"flex\">\r\n          <Box pl={1} flexGrow={1}>\r\n            <TextField\r\n              multiline\r\n              aria-multiline=\"true\"\r\n              fullWidth\r\n              inputProps={{ style: { fontSize: '1.3em' } }}\r\n              value={message}\r\n              onChange={(e) => setMessage(e.target.value)}\r\n              placeholder={t('APPS_MESSAGES_NEW_MESSAGE')}\r\n            />\r\n          </Box>\r\n          <Box>\r\n            <Button onClick={onAddImageClick}>\r\n              <ImageIcon />\r\n            </Button>\r\n            <Button type=\"submit\">\r\n              <SendIcon />\r\n            </Button>\r\n          </Box>\r\n        </Box>\r\n      </form>\r\n    </Paper>\r\n  );\r\n};\r\n\r\nexport default MessageInput;\r\n","import React from 'react';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Button, Paper } from '@material-ui/core';\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    padding: '24px',\r\n    zIndex: 10,\r\n    marginTop: '15px',\r\n    width: '90%',\r\n    display: 'flex',\r\n    flexFlow: 'column nowrap',\r\n    position: 'absolute',\r\n    top: '80px',\r\n  },\r\n  displayBlock: {\r\n    /*Sets modal to center*/\r\n    display: 'flex',\r\n    flexFlow: 'column nowrap',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    position: 'relative',\r\n  },\r\n  displayNone: {\r\n    display: 'none',\r\n  },\r\n  imageModalCloseButton: {\r\n    position: 'absolute',\r\n    right: 0,\r\n    top: 0,\r\n    width: '10%',\r\n  },\r\n});\r\n\r\nexport const Modal = ({ children, visible, handleClose }) => {\r\n  const classes = useStyles();\r\n\r\n  const showHideClassName = visible ? classes.displayBlock : classes.displayNone;\r\n\r\n  return (\r\n    <div className={showHideClassName}>\r\n      <Paper className={classes.root}>\r\n        <Button onClick={handleClose} className={classes.imageModalCloseButton}>\r\n          <CloseIcon />\r\n        </Button>\r\n        {children}\r\n      </Paper>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Modal;\r\n","import qs from 'qs';\r\nimport url from 'parse-url';\r\n\r\ninterface IRouterLocation {\r\n  pathname: string;\r\n  search: any;\r\n}\r\n\r\nexport const deleteQueryFromLocation = (\r\n  location: Record<string, unknown> & IRouterLocation,\r\n  key = '',\r\n) => {\r\n  const { query } = url(location.pathname + location.search);\r\n  return `${location.pathname}/?${qs.stringify({\r\n    ...query,\r\n    [key]: undefined,\r\n  })}`;\r\n};\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core';\r\n\r\ninterface IProps {\r\n  src: string;\r\n  alt: string;\r\n}\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: '100%',\r\n    objectFit: 'contain',\r\n  },\r\n});\r\n\r\nexport const PictureResponsive = ({ src, alt }: IProps) => {\r\n  return <img className={useStyles().root} src={src} alt={alt} />;\r\n};\r\n","import React, { useCallback, useEffect, useMemo, useState } from 'react';\r\nimport qs from 'qs';\r\nimport { useNuiRequest } from 'fivem-nui-react-lib';\r\nimport Modal from '../../../../ui/components/Modal';\r\nimport PhotoLibraryIcon from '@material-ui/icons/PhotoLibrary';\r\nimport { Box, Typography, Button } from '@material-ui/core';\r\nimport { useHistory, useLocation } from 'react-router-dom';\r\nimport { ContextMenu } from '../../../../ui/components/ContextMenu';\r\nimport { deleteQueryFromLocation } from '../../../../common/utils/deleteQueryFromLocation';\r\nimport { PictureResponsive } from '../../../../ui/components/PictureResponsive';\r\nimport { MessageEvents } from '../../../../../../typings/messages';\r\n\r\ninterface IProps {\r\n  isOpen: boolean;\r\n  messageGroupId: string | undefined;\r\n  onClose(): void;\r\n  image?: string;\r\n}\r\n\r\nexport const MessageImageModal = ({ isOpen, messageGroupId, onClose, image }: IProps) => {\r\n  const Nui = useNuiRequest();\r\n  const history = useHistory();\r\n  const { pathname, search } = useLocation();\r\n  const [queryParamImagePreview, setQueryParamImagePreview] = useState(null);\r\n\r\n  const removeQueryParamImage = useCallback(() => {\r\n    setQueryParamImagePreview(null);\r\n    history.replace(deleteQueryFromLocation({ pathname, search }, 'image'));\r\n  }, [history, pathname, search]);\r\n\r\n  const sendImageMessage = useCallback(\r\n    (m) => {\r\n      Nui.send(MessageEvents.SEND_MESSAGE, {\r\n        groupId: messageGroupId,\r\n        message: m,\r\n      });\r\n      onClose();\r\n    },\r\n    [messageGroupId, onClose, Nui],\r\n  );\r\n\r\n  const sendFromQueryParam = useCallback(\r\n    (image) => {\r\n      sendImageMessage(image);\r\n      removeQueryParamImage();\r\n    },\r\n    [removeQueryParamImage, sendImageMessage],\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (!image) return;\r\n    setQueryParamImagePreview(image);\r\n  }, [image]);\r\n\r\n  const menuOptions = useMemo(\r\n    () => [\r\n      {\r\n        label: 'Camera / Gallery',\r\n        icon: <PhotoLibraryIcon />,\r\n        onClick: () =>\r\n          history.push(\r\n            `/camera?${qs.stringify({\r\n              referal: encodeURIComponent(pathname + search),\r\n            })}`,\r\n          ),\r\n      },\r\n    ],\r\n    [history, pathname, search],\r\n  );\r\n\r\n  return (\r\n    <>\r\n      <ContextMenu open={isOpen} options={menuOptions} onClose={onClose} />\r\n      <Modal visible={queryParamImagePreview} handleClose={removeQueryParamImage}>\r\n        <Box py={1}>\r\n          <Typography paragraph>Do you want to share this image?</Typography>\r\n          <PictureResponsive src={queryParamImagePreview} alt=\"Share gallery image preview\" />\r\n          <Button\r\n            fullWidth\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            onClick={() => sendFromQueryParam(queryParamImagePreview)}\r\n          >\r\n            Share\r\n          </Button>\r\n        </Box>\r\n      </Modal>\r\n    </>\r\n  );\r\n};\r\n","import React, { useEffect, useState } from 'react';\r\nimport { Box, makeStyles, Theme } from '@material-ui/core';\r\nimport { useSettings } from '../../apps/settings/hooks/useSettings';\r\nimport { useTranslation } from 'react-i18next';\r\n\r\ninterface IProps {\r\n  children: JSX.Element;\r\n}\r\n\r\nconst useStyles = makeStyles<Theme, { covered: boolean }>((theme) => ({\r\n  cover: {\r\n    cursor: 'pointer',\r\n    backgroundColor: theme.palette.background.default,\r\n    color: theme.palette.getContrastText(theme.palette.background.default),\r\n    visibility: ({ covered }) => (covered ? 'visible' : 'hidden'),\r\n  },\r\n}));\r\n\r\nexport const PictureReveal = ({ children }: IProps) => {\r\n  const [settings] = useSettings();\r\n  const [covered, setCovered] = useState<boolean>(false);\r\n  const [ready, setReady] = useState<boolean>(false);\r\n  const { t } = useTranslation();\r\n  const classes = useStyles({ covered });\r\n\r\n  useEffect(() => {\r\n    if (settings.streamerMode === true) {\r\n      setCovered(true);\r\n    }\r\n    setReady(true);\r\n  }, [settings.streamerMode]);\r\n\r\n  const onClickCover = () => setCovered(false);\r\n\r\n  return (\r\n    <Box width=\"100%\" position=\"relative\">\r\n      <Box\r\n        onClick={onClickCover}\r\n        className={classes.cover}\r\n        width=\"100%\"\r\n        height=\"100%\"\r\n        position=\"absolute\"\r\n        display=\"flex\"\r\n        alignItems=\"center\"\r\n        justifyContent=\"center\"\r\n        top={0}\r\n        left={0}\r\n      >\r\n        {t('GENERIC_CLICK_TO_REVEAL')}\r\n      </Box>\r\n      <Box width=\"100%\" height=\"100%\" visibility={ready ? 'visible' : 'hidden'}>\r\n        {children}\r\n      </Box>\r\n    </Box>\r\n  );\r\n};\r\n","import { Box, Link, makeStyles, Paper, Typography } from '@material-ui/core';\r\nimport React from 'react';\r\nimport { Message } from '../../../../../../typings/messages';\r\nimport { PictureResponsive } from '../../../../ui/components/PictureResponsive';\r\nimport { PictureReveal } from '../../../../ui/components/PictureReveal';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    '&:first-child': {\r\n      marginTop: 'auto',\r\n    },\r\n  },\r\n  mySms: {\r\n    float: 'right',\r\n    margin: theme.spacing(1),\r\n    padding: '6px 16px',\r\n    height: 'auto',\r\n    width: 'auto',\r\n    minWidth: '60%',\r\n    maxWidth: '85%',\r\n    background: theme.palette.background.default,\r\n    color: theme.palette.text.primary,\r\n    borderRadius: '20px',\r\n    textOverflow: 'ellipsis',\r\n  },\r\n  sms: {\r\n    float: 'left',\r\n    margin: theme.spacing(1),\r\n    padding: '6px 12px',\r\n    width: 'auto',\r\n    minWidth: '60%',\r\n    maxWidth: '85%',\r\n    height: 'auto',\r\n    background: theme.palette.primary.light,\r\n    color: theme.palette.getContrastText(theme.palette.primary.light),\r\n    borderRadius: '15px',\r\n    textOverflow: 'ellipsis',\r\n  },\r\n  message: {\r\n    wordBreak: 'break-all',\r\n  },\r\n}));\r\n\r\nconst isImage = (url) => {\r\n  return /(http(s?):)([/|.|\\w|\\s|-])*\\.(?:jpg|png|jpeg|gif)/g.test(url);\r\n};\r\n\r\nexport const MessageBubble = ({\r\n  message,\r\n  isGroupChat,\r\n  onClickDisplay,\r\n}: {\r\n  message: Message;\r\n  isGroupChat: boolean;\r\n  onClickDisplay(phoneNumber: string): void;\r\n}) => {\r\n  const classes = useStyles();\r\n  return (\r\n    <div className={classes.root}>\r\n      <Paper className={message.isMine ? classes.mySms : classes.sms} variant=\"outlined\">\r\n        <Box className={classes.message}>\r\n          {isImage(message.message) ? (\r\n            <PictureReveal>\r\n              <PictureResponsive src={message.message} alt=\"message multimedia\" />\r\n            </PictureReveal>\r\n          ) : (\r\n            <div>{message.message}</div>\r\n          )}\r\n        </Box>\r\n        <Box>\r\n          {isGroupChat && !message.isMine ? (\r\n            <Link onClick={() => onClickDisplay(message.phone_number)}>\r\n              <Typography variant=\"subtitle1\" color=\"secondary\">\r\n                {message.display || message.phone_number}\r\n              </Typography>\r\n            </Link>\r\n          ) : null}\r\n        </Box>\r\n      </Paper>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState } from 'react';\r\nimport { Box } from '@material-ui/core';\r\n\r\nimport { Message, MessageGroup } from '../../../../../../typings/messages';\r\nimport MessageInput from '../form/MessageInput';\r\nimport useStyles from './modal.styles';\r\nimport { MessageImageModal } from './MessageImageModal';\r\nimport { useQueryParams } from '../../../../common/hooks/useQueryParams';\r\nimport { MessageBubble } from './MessageBubble';\r\n\r\ninterface IProps {\r\n  activeMessageGroup: MessageGroup;\r\n  messages: Message[];\r\n  onClickDisplay(phoneNumber: string): void;\r\n}\r\n\r\nexport const CONVERSATION_ELEMENT_ID = 'message-modal-conversation';\r\n\r\nconst Conversation = ({ activeMessageGroup, messages, onClickDisplay }: IProps) => {\r\n  const classes = useStyles();\r\n  const [imageModalOpen, setImageModalOpen] = useState(false);\r\n  const query = useQueryParams();\r\n  const referalImage = query?.image || null;\r\n\r\n  return (\r\n    <div className={classes.conversationContainer}>\r\n      <MessageImageModal\r\n        image={referalImage}\r\n        onClose={() => setImageModalOpen(false)}\r\n        isOpen={imageModalOpen}\r\n        messageGroupId={activeMessageGroup.groupId}\r\n      />\r\n      <Box\r\n        id={CONVERSATION_ELEMENT_ID}\r\n        height=\"85%\"\r\n        pt={6}\r\n        style={{ flex: 1, display: 'flex', overflowY: 'auto' }}\r\n      >\r\n        <Box\r\n          style={{\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            minHeight: 'min-content',\r\n            width: '100%',\r\n          }}\r\n        >\r\n          {messages.map((message) => (\r\n            <MessageBubble\r\n              onClickDisplay={onClickDisplay}\r\n              key={message.id}\r\n              message={message}\r\n              isGroupChat={activeMessageGroup?.isGroupChat}\r\n            />\r\n          ))}\r\n        </Box>\r\n      </Box>\r\n      <MessageInput\r\n        /*  I should do some groupDiplay here */\r\n        messageGroupName={activeMessageGroup.label || activeMessageGroup.groupDisplay}\r\n        messageGroupId={activeMessageGroup.groupId}\r\n        onAddImageClick={() => setImageModalOpen(true)}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Conversation;\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Skeleton from '@material-ui/lab/Skeleton';\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    margin: '0px 0px 12px 8px',\r\n  },\r\n  skeleton: {\r\n    borderRadius: '20px',\r\n    transform: 'none',\r\n  },\r\n});\r\n\r\nexport default function MessageSkeleton({ height, isMine = false }) {\r\n  const classes = useStyles();\r\n\r\n  const marginLeft = isMine ? '60px' : '8px';\r\n  return (\r\n    <div className={classes.root} style={{ marginLeft, height: `${height}px` }}>\r\n      <Skeleton className={classes.skeleton} variant=\"text\" width={325} height={height} />\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\n\r\nimport { List } from '../../../../ui/components/List';\r\nimport MessageSkeleton from './MessageSkeleton';\r\n\r\nexport function MessageSkeletonList() {\r\n  return (\r\n    <List>\r\n      <MessageSkeleton height={75} />\r\n      <MessageSkeleton height={60} />\r\n      <MessageSkeleton height={90} isMine />\r\n      <MessageSkeleton height={60} />\r\n      <MessageSkeleton height={60} isMine />\r\n      <MessageSkeleton height={100} />\r\n      <MessageSkeleton height={75} isMine />\r\n      <MessageSkeleton height={50} />\r\n    </List>\r\n  );\r\n}\r\n\r\nexport default MessageSkeletonList;\r\n","import React, { useEffect, useState } from 'react';\r\nimport {\r\n  Slide,\r\n  Paper,\r\n  Typography,\r\n  Button,\r\n  Box,\r\n  List,\r\n  ListItem,\r\n  ListItemText,\r\n  ListItemSecondaryAction,\r\n} from '@material-ui/core';\r\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\r\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\r\nimport PersonAddIcon from '@material-ui/icons/PersonAdd';\r\nimport useStyles from './modal.styles';\r\nimport useMessages from '../../hooks/useMessages';\r\nimport Conversation, { CONVERSATION_ELEMENT_ID } from './Conversation';\r\nimport MessageSkeletonList from './MessageSkeletonList';\r\nimport { useNuiRequest } from 'fivem-nui-react-lib';\r\nimport { useHistory, useLocation, useParams } from 'react-router-dom';\r\nimport { useTranslation } from 'react-i18next';\r\nimport Modal from '../../../../ui/components/Modal';\r\nimport { useContactActions } from '../../../contacts/hooks/useContactActions';\r\nimport { useSimcard } from '../../../../os/simcard/hooks/useSimcard';\r\nimport { MessageEvents } from '../../../../../../typings/messages';\r\n\r\nconst LARGE_HEADER_CHARS = 30;\r\nconst MAX_HEADER_CHARS = 80;\r\nconst MINIMUM_LOAD_TIME = 600;\r\n\r\nconst memberDisplay = (display, number, myNumber, t) => {\r\n  if (myNumber === number) {\r\n    return (\r\n      <span>\r\n        {t('APPS_MESSAGES_ME')} ({number})\r\n      </span>\r\n    );\r\n  }\r\n  if (display !== number) {\r\n    return (\r\n      <span>\r\n        {display} ({number})\r\n      </span>\r\n    );\r\n  }\r\n  return <span>{number}</span>;\r\n};\r\n\r\nexport const MessageModal = () => {\r\n  const Nui = useNuiRequest();\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n  const { number: myNumber } = useSimcard();\r\n  const { pathname } = useLocation();\r\n  const { t } = useTranslation();\r\n  const { groupId } = useParams<{ groupId: string }>();\r\n  const { messages, setMessages, activeMessageGroup, setActiveMessageGroup } = useMessages();\r\n  const { getContactByNumber, getDisplayByNumber } = useContactActions();\r\n\r\n  const [isLoaded, setLoaded] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (activeMessageGroup && messages) {\r\n      setTimeout(() => {\r\n        setLoaded(true);\r\n      }, MINIMUM_LOAD_TIME);\r\n      return;\r\n    }\r\n    setLoaded(false);\r\n  }, [activeMessageGroup, messages]);\r\n\r\n  const [groupActionsOpen, setGroupActionsOpen] = useState(false);\r\n\r\n  const closeModal = () => {\r\n    history.push('/messages');\r\n    setMessages(null);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!groupId) return;\r\n    setActiveMessageGroup(groupId);\r\n  }, [groupId, setActiveMessageGroup]);\r\n\r\n  useEffect(() => {\r\n    if (isLoaded && messages) {\r\n      const element = document.getElementById(CONVERSATION_ELEMENT_ID);\r\n      if (element) {\r\n        element.scrollTop = element.scrollHeight;\r\n      }\r\n    }\r\n  }, [isLoaded, messages]);\r\n\r\n  // sends all unread messages\r\n  useEffect(() => {\r\n    if (activeMessageGroup?.groupId && activeMessageGroup.unreadCount > 0) {\r\n      Nui.send(MessageEvents.SET_MESSAGE_READ, {\r\n        groupId: activeMessageGroup.groupId,\r\n      });\r\n    }\r\n  }, [activeMessageGroup, Nui]);\r\n\r\n  // don't allow too many characters, it takes too much room\r\n  let header = activeMessageGroup ? activeMessageGroup.groupDisplay : '';\r\n  const truncatedHeader = `${header.slice(0, MAX_HEADER_CHARS).trim()}...`;\r\n  header = header.length > MAX_HEADER_CHARS ? activeMessageGroup?.label || truncatedHeader : header;\r\n\r\n  const headerClass =\r\n    header.length > LARGE_HEADER_CHARS ? classes.largeGroupDisplay : classes.groupdisplay;\r\n\r\n  const handleAddContact = (number) => {\r\n    const exists = getContactByNumber(number);\r\n    const referal = encodeURIComponent(pathname);\r\n    if (exists) {\r\n      return history.push(`/contacts/${exists.id}/?referal=${referal}`);\r\n    }\r\n    return history.push(`/contacts/-1/?addNumber=${number}&referal=${referal}`);\r\n  };\r\n\r\n  const phoneNumbers = activeMessageGroup?.phoneNumbers || [];\r\n\r\n  const targetNumber = phoneNumbers.find((n) => myNumber !== n);\r\n\r\n  return (\r\n    <div>\r\n      <Modal visible={groupActionsOpen} handleClose={() => setGroupActionsOpen(false)}>\r\n        <Typography variant=\"h6\">{t('APPS_MESSAGES_MEMBERS_TITLE')}</Typography>\r\n        <List>\r\n          {phoneNumbers.map((number) => {\r\n            const display = getDisplayByNumber(number);\r\n            return (\r\n              <ListItem divider>\r\n                <ListItemText>{memberDisplay(display, number, myNumber, t)}</ListItemText>\r\n                {!getContactByNumber(number) && myNumber !== number && (\r\n                  <ListItemSecondaryAction>\r\n                    <Button onClick={() => handleAddContact(number)}>\r\n                      <PersonAddIcon />\r\n                    </Button>\r\n                  </ListItemSecondaryAction>\r\n                )}\r\n              </ListItem>\r\n            );\r\n          })}\r\n        </List>\r\n      </Modal>\r\n      <Slide direction=\"left\" in={!!activeMessageGroup}>\r\n        <Paper className={classes.modalRoot}>\r\n          <Paper className={classes.conversationHeader}>\r\n            <Box display=\"flex\" justifyContent=\"space-between\">\r\n              <Button onClick={closeModal}>\r\n                <ArrowBackIcon fontSize=\"large\" />\r\n              </Button>\r\n              <Typography variant=\"h5\" className={headerClass}>\r\n                {header}\r\n              </Typography>\r\n              {activeMessageGroup?.isGroupChat ? (\r\n                <Button>\r\n                  <MoreVertIcon onClick={() => setGroupActionsOpen(true)} fontSize=\"large\" />\r\n                </Button>\r\n              ) : null}\r\n              {!activeMessageGroup?.isGroupChat &&\r\n              getDisplayByNumber(targetNumber) === targetNumber ? (\r\n                <Button>\r\n                  <PersonAddIcon onClick={() => handleAddContact(targetNumber)} fontSize=\"large\" />\r\n                </Button>\r\n              ) : null}\r\n            </Box>\r\n          </Paper>\r\n          {isLoaded && activeMessageGroup ? (\r\n            <Conversation\r\n              onClickDisplay={handleAddContact}\r\n              messages={messages}\r\n              activeMessageGroup={activeMessageGroup}\r\n            />\r\n          ) : (\r\n            <MessageSkeletonList />\r\n          )}\r\n        </Paper>\r\n      </Slide>\r\n    </div>\r\n  );\r\n};\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport { Fab } from '@material-ui/core';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    position: 'absolute',\r\n    bottom: theme.spacing(5),\r\n    right: theme.spacing(3),\r\n  },\r\n}));\r\n\r\ninterface INewMessageGroupButtonProps {\r\n  onClick(): void;\r\n}\r\n\r\nexport function NewMessageGroupButton({ onClick }: INewMessageGroupButtonProps) {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Fab className={classes.root} color=\"primary\" onClick={onClick}>\r\n      <AddIcon />\r\n    </Fab>\r\n  );\r\n}\r\n\r\nexport default NewMessageGroupButton;\r\n","import { amber, common } from '@material-ui/core/colors';\r\n\r\nexport const MESSAGES_APP_PRIMARY_COLOR = amber[800];\r\nexport const MESSAGES_APP_TEXT_COLOR = common.white;\r\n\r\nconst theme = {\r\n  palette: {\r\n    primary: {\r\n      main: MESSAGES_APP_PRIMARY_COLOR,\r\n      dark: amber[900],\r\n      light: amber[100],\r\n      contrastText: MESSAGES_APP_TEXT_COLOR,\r\n    },\r\n  },\r\n};\r\n\r\nexport default theme;\r\n","import { createAppThemeProvider } from '../../../os/apps/utils/createAppThemeProvider';\r\nimport messagesTheme from '../messages.theme';\r\n\r\nexport const MessagesThemeProvider = createAppThemeProvider(messagesTheme);\r\n","import React, { useEffect } from 'react';\r\nimport { AppWrapper } from '../../../ui/components';\r\nimport { AppTitle } from '../../../ui/components/AppTitle';\r\nimport { AppContent } from '../../../ui/components/AppContent';\r\nimport { useApp } from '../../../os/apps/hooks/useApps';\r\nimport MessageGroupModal from './modal/MessageGroupModal';\r\nimport MessagesList from './list/MessagesList';\r\nimport { Route, Switch, useHistory } from 'react-router-dom';\r\nimport { MessageModal } from './modal/MessageModal';\r\nimport InjectDebugData from '../../../os/debug/InjectDebugData';\r\nimport NewMessageGroupButton from './form/NewMessageGroupButton';\r\nimport { useNuiRequest } from 'fivem-nui-react-lib';\r\nimport { MessagesThemeProvider } from '../providers/MessagesThemeProvider';\r\nimport { MessageEvents } from '../../../../../typings/messages';\r\n\r\nexport const MessagesApp = () => {\r\n  const Nui = useNuiRequest();\r\n  const messages = useApp('MESSAGES');\r\n  const history = useHistory();\r\n  \r\n  useEffect(() => {\r\n    Nui.send(MessageEvents.FETCH_MESSAGE_GROUPS);\r\n  }, [Nui]);\r\n\r\n  return (\r\n    <MessagesThemeProvider>\r\n      <AppWrapper id=\"messages-app\">\r\n        <AppTitle app={messages} />\r\n        <AppContent>\r\n          <Switch>\r\n            <Route path=\"/messages/conversations/:groupId\">\r\n              <div>\r\n                <MessageModal />\r\n              </div>\r\n            </Route>\r\n            <Route exact path=\"/messages\">\r\n              <MessagesList />\r\n            </Route>\r\n          </Switch>\r\n          <Switch>\r\n            <Route exact path={['/messages/new/:phoneNumber', '/messages/new']}>\r\n              <MessageGroupModal />\r\n            </Route>\r\n          </Switch>\r\n        </AppContent>\r\n        <Route exact path=\"/messages\">\r\n          <NewMessageGroupButton onClick={() => history.push('/messages/new')} />\r\n        </Route>\r\n      </AppWrapper>\r\n    </MessagesThemeProvider>\r\n  );\r\n};\r\n\r\nInjectDebugData([\r\n  {\r\n    app: 'MESSAGES',\r\n    method: MessageEvents.FETCH_MESSAGE_GROUPS_SUCCESS,\r\n    data: [\r\n      {\r\n        groupId: '2',\r\n        groupDisplay: 'dev-chat',\r\n        isGroupChat: true,\r\n        phoneNumbers: ['444-4444', '111-1134', '111-1111'],\r\n        avatar: null,\r\n        label: null,\r\n        updatedAt: Date.now(),\r\n        unreadCount: 2,\r\n      },\r\n      {\r\n        groupId: '3',\r\n        groupDisplay: 'Chip',\r\n        isGroupChat: false,\r\n        phoneNumbers: ['111-1134', '111-1111'],\r\n        avatar: null,\r\n        label: null,\r\n        updatedAt: Date.now(),\r\n        unreadCount: 0,\r\n      },\r\n      {\r\n        groupId: '4',\r\n        groupDisplay: 'Dick',\r\n        isGroupChat: false,\r\n        phoneNumbers: ['111-1134', '111-2342'],\r\n        avatar: null,\r\n        label: null,\r\n        updatedAt: Date.now(),\r\n        unreadCount: 0,\r\n      },\r\n    ],\r\n  },\r\n]);\r\n\r\nInjectDebugData(\r\n  [\r\n    {\r\n      app: 'MESSAGES',\r\n      method: MessageEvents.FETCH_MESSAGES_SUCCESS,\r\n      data: [\r\n        {\r\n          id: 1,\r\n          message: 'sup!',\r\n          user_identifier: '1234',\r\n          phone_number: '444-4444',\r\n          display: 'kidz',\r\n          avatar: null,\r\n          groupId: '2',\r\n          isRead: true,\r\n          isMine: false,\r\n          updatedAt: Date.now(),\r\n        },\r\n        {\r\n          id: 2,\r\n          message: 'sup!',\r\n          user_identifier: '1234',\r\n          phone_number: '444-4444',\r\n          display: 'kidz',\r\n          avatar: null,\r\n          groupId: '2',\r\n          isRead: true,\r\n          isMine: true,\r\n          updatedAt: Date.now(),\r\n        },\r\n        {\r\n          id: 3,\r\n          message: 'sup!',\r\n          user_identifier: '123',\r\n          phone_number: '444-4444',\r\n          display: 'kidz',\r\n          avatar: null,\r\n          groupId: '2',\r\n          isRead: true,\r\n          isMine: false,\r\n          updatedAt: Date.now(),\r\n        },\r\n        {\r\n          id: 4,\r\n          message:\r\n            'https://upload.wikimedia.org/wikipedia/commons/thumb/3/31/Hadena_albimacula.jpg/800px-Hadena_albimacula.jpg',\r\n          user_identifier: '123',\r\n          phone_number: '444-4444',\r\n          display: 'kidz',\r\n          avatar: null,\r\n          groupId: '2',\r\n          isRead: true,\r\n          isMine: false,\r\n          updatedAt: Date.now(),\r\n        },\r\n      ],\r\n    },\r\n    {\r\n      app: 'MESSAGES',\r\n      method: 'createMessagesBroadcast',\r\n      data: {\r\n        groupId: '2',\r\n        number: '777-7777',\r\n        message: 'Hi! Just checking in on you!',\r\n      },\r\n    },\r\n    {\r\n      app: 'MESSAGES',\r\n      method: 'createMessagesBroadcast',\r\n      data: {\r\n        groupId: '2',\r\n        number: 'Kidz',\r\n        message: 'Hi! You are awesome!',\r\n      },\r\n    },\r\n    {\r\n      app: 'MESSAGES',\r\n      method: 'createMessagesBroadcast',\r\n      data: {\r\n        groupId: '3',\r\n        number: 'Kidz',\r\n        message: 'I am testing this like crazy',\r\n      },\r\n    },\r\n  ],\r\n  3000,\r\n);\r\n","import { red, common } from '@material-ui/core/colors';\r\n\r\nexport const MATCH_APP_PRIMARY_COLOR = '#FE3B73';\r\nexport const MATCH_APP_TEXT_COLOR = common.white;\r\n\r\nconst theme = {\r\n  palette: {\r\n    primary: {\r\n      main: MATCH_APP_PRIMARY_COLOR,\r\n      dark: red[700],\r\n      light: red[300],\r\n      contrastText: MATCH_APP_TEXT_COLOR,\r\n    },\r\n    secondary: {\r\n      main: '#d32f2f',\r\n      light: '#eb4242',\r\n      dark: '#941212',\r\n      contrastText: MATCH_APP_TEXT_COLOR,\r\n    },\r\n    success: {\r\n      main: '#2196f3',\r\n      contrastText: MATCH_APP_TEXT_COLOR,\r\n    },\r\n  },\r\n};\r\n\r\nexport default theme;\r\n","import { createAppThemeProvider } from '../../../os/apps/utils/createAppThemeProvider';\r\n\r\nimport matchTheme from '../match.theme';\r\n\r\nexport const MatchThemeProvider = createAppThemeProvider(matchTheme);\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { BottomNavigation, BottomNavigationAction } from '@material-ui/core';\r\nimport HomeIcon from '@material-ui/icons/Whatshot';\r\nimport GroupIcon from '@material-ui/icons/Group';\r\nimport ProfileIcon from '@material-ui/icons/Person';\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: '100%',\r\n  },\r\n});\r\n\r\nexport function MatchBottomNavigation({ activePage, handleChange }) {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <BottomNavigation value={activePage} onChange={handleChange} className={classes.root}>\r\n      <BottomNavigationAction component={Link} to=\"/match\" icon={<HomeIcon />} />\r\n      <BottomNavigationAction component={Link} to=\"/match/matches\" icon={<GroupIcon />} />\r\n      <BottomNavigationAction component={Link} to=\"/match/profile\" icon={<ProfileIcon />} />\r\n    </BottomNavigation>\r\n  );\r\n}\r\n\r\nexport default MatchBottomNavigation;\r\n","import { Contact } from './contact';\r\n\r\nexport interface NewProfile {\r\n  name: string;\r\n  image: string;\r\n  bio: string;\r\n  job: string;\r\n  location: string;\r\n  tags: string;\r\n}\r\n\r\nexport interface Profile extends NewProfile {\r\n  id: number;\r\n  identifier: string;\r\n  phoneNumber: string;\r\n  viewed: boolean;\r\n  createdAt: number;\r\n  updatedAt: number;\r\n  lastActive: number;\r\n}\r\n\r\nexport interface FormattedProfile extends Profile {\r\n  lastActiveFormatted: string;\r\n  tagList: string[];\r\n}\r\n\r\nexport interface Match extends Profile {\r\n  matchedAt: number;\r\n}\r\n\r\nexport interface FormattedMatch extends FormattedProfile {\r\n  matchedAtFormatted: string;\r\n}\r\n\r\nexport interface Like {\r\n  id: number; // profile id\r\n  liked: boolean;\r\n}\r\n\r\nexport enum MatchEvents {\r\n  INITIALIZE = 'phone:initializeMatch',\r\n  GET_PROFILES = 'phone:getMatchProfiles',\r\n  GET_PROFILES_SUCCESS = 'phone:getMatchProfilesSuccess',\r\n  GET_PROFILES_FAILED = 'phone:getMatchProfilesError',\r\n  CREATE_MY_PROFILE = 'phone:createMyProfile',\r\n  CREATE_MY_PROFILE_SUCCESS = 'phone:createMyProfileSuccess',\r\n  CREATE_MY_PROFILE_FAILED = 'phone:createMyProfileError',\r\n  GET_MY_PROFILE = 'phone:getMyProfile',\r\n  GET_MY_PROFILE_SUCCESS = 'phone:getMyProfileSuccess',\r\n  GET_MY_PROFILE_FAILED = 'phone:getMyProfileError',\r\n  UPDATE_MY_PROFILE = 'phone:updateMyProfile',\r\n  UPDATE_MY_PROFILE_SUCCESS = 'phone:updateMyProfileSuccess',\r\n  UPDATE_MY_PROFILE_FAILED = 'phone:updateMyProfileError',\r\n  GET_MATCHES = 'phone:getMatches',\r\n  GET_MATCHES_SUCCESS = 'phone:getMatchesSuccess',\r\n  GET_MATCHES_FAILED = 'phone:getMatchesError',\r\n  SAVE_LIKES = 'phone:saveLikes',\r\n  SAVE_LIKES_SUCCESS = 'phone:saveLikesSuccess',\r\n  SAVE_LIKES_FAILED = 'phone:saveLikesError',\r\n  NEW_MATCH = 'phone:newMatchFound',\r\n}\r\n","import { atom } from 'recoil';\r\nimport { FormattedMatch, FormattedProfile } from '../../../../../typings/match';\r\n\r\nexport const matchState = {\r\n  profiles: atom<FormattedProfile[]>({\r\n    key: 'profiles',\r\n    default: null,\r\n  }),\r\n  errorLoadingProfiles: atom({\r\n    key: 'errorLoadingProfiles',\r\n    default: false,\r\n  }),\r\n  matches: atom<FormattedMatch[]>({\r\n    key: 'matches',\r\n    default: null,\r\n  }),\r\n  errorLoadingMatches: atom<boolean>({\r\n    key: 'errorLoadingMatches',\r\n    default: false,\r\n  }),\r\n  myProfile: atom<FormattedProfile | null>({\r\n    key: 'myProfile',\r\n    default: null,\r\n  }),\r\n  noProfileExists: atom<boolean>({\r\n    key: 'noProfileExists',\r\n    default: false,\r\n  }),\r\n};\r\n","import React from 'react';\r\nimport { Box, CircularProgress } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    height: '100%',\r\n    width: '100%',\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n  },\r\n  progress: {\r\n    marginTop: '140px',\r\n  },\r\n});\r\n\r\nfunction Loader() {\r\n  const classes = useStyles();\r\n  return (\r\n    <Box className={classes.root}>\r\n      <CircularProgress size={60} className={classes.progress} />\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default Loader;\r\n","import React from 'react';\r\nimport { Box, Typography } from '@material-ui/core';\r\nimport { makeStyles, Theme } from '@material-ui/core/styles';\r\n\r\nconst useStyles = makeStyles((theme: Theme) => ({\r\n  root: {\r\n    color: theme.palette.primary.main,\r\n    fontSize: theme.typography.fontSize,\r\n    height: '100%',\r\n    width: '100%',\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    textAlign: 'center',\r\n    padding: '140px 15px 15px 15px',\r\n  },\r\n}));\r\n\r\ninterface IProps {\r\n  text: string;\r\n}\r\n\r\nfunction PageText({ text }: IProps) {\r\n  const classes = useStyles();\r\n  return (\r\n    <Box className={classes.root}>\r\n      <Typography variant=\"h5\">{text}</Typography>\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default PageText;\r\n","interface IDeltas {\r\n  deltaX: number;\r\n  deltaY: number;\r\n}\r\n\r\n/**\r\n * Given a React ref, which should point to some HTML element,\r\n * add draggable functionality to that element so the user can\r\n * interact with it.\r\n *\r\n * It should be noted that when using this in React that this\r\n * class is directly mutating the DOM, not relying on React state\r\n * to do so. This can cause some problems when relying on React\r\n * state updates based on the values derived from this class. That\r\n * is why we primarily use refs to interact with it.\r\n *\r\n * Order of operations:\r\n * 1. User clicks \"down\" on element - this initializes event\r\n * handlers and saves initial state\r\n * 2. User moves mouse. Every mouse move event triggers a movement\r\n * of the HTML element and also performs some logic to see how far\r\n * we have moved\r\n * 3. User \"releases\" mouse - cleanup event handlers and do logic\r\n * to compare our final position to our initial position\r\n */\r\nexport class DraggableElement {\r\n  private element: HTMLElement;\r\n\r\n  private width: number = 0;\r\n  private initialX: number = 0;\r\n  private initialY: number = 0;\r\n  private mouseDownInitialX: number = 0;\r\n  private mouseDownInitialY: number = 0;\r\n\r\n  private useRotation: boolean;\r\n  private maxRotationDeg: null | number;\r\n\r\n  private updatedX: number = 0;\r\n  private updatedY: number = 0;\r\n  private mouseDownX: number = 0;\r\n  private mouseDownY: number = 0;\r\n\r\n  constructor(ref: React.MutableRefObject<any>, maxRotationDeg: number | null = null) {\r\n    this.element = ref.current;\r\n    this.width = this.element.clientWidth;\r\n    this.maxRotationDeg = maxRotationDeg;\r\n    this.useRotation = maxRotationDeg !== null;\r\n\r\n    this.element.onmousedown = this.onMouseDown;\r\n  }\r\n\r\n  onMouseDown = (e: MouseEvent): void => {\r\n    e.preventDefault();\r\n    // get the mouse cursor position at startup:\r\n    this.mouseDownX = e.clientX;\r\n    this.mouseDownY = e.clientY;\r\n\r\n    // save where we initially started dragging from\r\n    // so we can do some math later\r\n    this.mouseDownInitialX = this.mouseDownX;\r\n    this.mouseDownInitialY = this.mouseDownY;\r\n\r\n    document.onmouseup = this.onMouseUp;\r\n    // call a function whenever the cursor moves:\r\n    document.onmousemove = this.onMouseMove;\r\n  };\r\n\r\n  onMouseMove = (e: MouseEvent): void => {\r\n    e.preventDefault();\r\n    const x = e.clientX;\r\n    const y = e.clientY;\r\n    this._onMouseMove(x, y);\r\n  };\r\n\r\n  _onMouseMove = (x: number, y: number): void => {\r\n    // calculate the new cursor position:\r\n    this.updatedX = this.mouseDownX - x;\r\n    this.updatedY = this.mouseDownY - y;\r\n    this.mouseDownX = x;\r\n    this.mouseDownY = y;\r\n\r\n    // set the element's new position:\r\n    this.element.style.top = this.element.offsetTop - this.updatedY + 'px';\r\n    this.element.style.left = this.element.offsetLeft - this.updatedX + 'px';\r\n\r\n    if (this.useRotation) {\r\n      const { deltaX } = this.deltas(this.mouseDownX, this.mouseDownY);\r\n      const pctWidth = deltaX / this.width;\r\n      const rotationDeg = -1 * this.maxRotationDeg * pctWidth;\r\n\r\n      this.element.style.webkitTransform = `rotate(${rotationDeg}deg)`;\r\n    }\r\n  };\r\n\r\n  onMouseUp = (e: MouseEvent): void => {\r\n    e.preventDefault();\r\n    this._onMouseUp();\r\n  };\r\n\r\n  _onMouseUp = (): void => {\r\n    // stop moving when mouse button is released:\r\n    this.cleanup();\r\n\r\n    // revert back to intitial position\r\n    this.element.style.left = `${this.initialX}px`;\r\n    this.element.style.top = `${this.initialY}px`;\r\n    if (this.useRotation) {\r\n      this.element.style.webkitTransform = 'rotate(0deg)';\r\n    }\r\n  };\r\n\r\n  cleanup = (): void => {\r\n    document.onmouseup = null;\r\n    document.onmousemove = null;\r\n  };\r\n\r\n  deltas = (x: number, y: number): IDeltas => {\r\n    const deltaX = x - this.mouseDownInitialX;\r\n    const deltaY = y - this.mouseDownInitialX;\r\n    return { deltaX, deltaY };\r\n  };\r\n}\r\n\r\ntype StatusChange = (deltaX: number) => void;\r\n\r\n/**\r\n * This class adds hooks to the base DraggableElement class\r\n * so we can update application state based on events\r\n */\r\nexport class LikeorDislikeDraggableElement extends DraggableElement {\r\n  private onDrag: StatusChange;\r\n  private onDrop: () => void;\r\n\r\n  constructor(\r\n    ref: React.MutableRefObject<any>,\r\n    maxRotationDeg: number,\r\n    onDrag: StatusChange,\r\n    onDrop: () => void,\r\n  ) {\r\n    super(ref, maxRotationDeg);\r\n\r\n    this.onDrag = onDrag;\r\n    this.onDrop = onDrop;\r\n  }\r\n\r\n  onMouseMove = (e: MouseEvent): void => {\r\n    e.preventDefault();\r\n    const x = e.clientX;\r\n    const y = e.clientY;\r\n\r\n    const { deltaX } = this.deltas(x, y);\r\n\r\n    this.onDrag(deltaX);\r\n    this._onMouseMove(x, y);\r\n  };\r\n\r\n  onMouseUp = (): void => {\r\n    this.onDrop();\r\n    this._onMouseUp();\r\n  };\r\n}\r\n","import React, { useEffect, useRef } from 'react';\r\nimport { makeStyles } from '@material-ui/core';\r\n\r\nimport { LikeorDislikeDraggableElement } from '../utils/drag';\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    position: 'relative',\r\n    height: '100%',\r\n    width: '100%',\r\n  },\r\n  like: {\r\n    position: 'absolute',\r\n    zIndex: 20,\r\n    padding: '5px 15px',\r\n    top: 100,\r\n\r\n    color: 'green',\r\n    border: '4px solid green',\r\n    right: 15,\r\n  },\r\n  nope: {\r\n    position: 'absolute',\r\n    zIndex: 20,\r\n    padding: '5px 15px',\r\n    top: 100,\r\n\r\n    color: 'red',\r\n    border: '4px solid red',\r\n    left: 15,\r\n  },\r\n});\r\n\r\ninterface IProps {\r\n  id: string;\r\n  children: JSX.Element | JSX.Element[];\r\n  onDrag: (deltaX: number) => void;\r\n  onDrop: () => void;\r\n}\r\n\r\nconst MAX_ROTATION_DEG = 15;\r\n\r\nfunction Draggable({ id, children, onDrag, onDrop }: IProps) {\r\n  const classes = useStyles();\r\n  const elementRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    const drag = new LikeorDislikeDraggableElement(elementRef, MAX_ROTATION_DEG, onDrag, onDrop);\r\n    return () => drag.cleanup();\r\n  }, [elementRef]); // eslint-disable-line\r\n\r\n  return (\r\n    <>\r\n      <div ref={elementRef} key={id} id={id} className={classes.root}>\r\n        {children}\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Draggable;\r\n","import React from 'react';\r\nimport { Box } from '@material-ui/core';\r\n\r\nfunction StatusDisplay({ className, visible, text }) {\r\n  const style = { opacity: visible ? '0.65' : '0.0' };\r\n\r\n  return (\r\n    <Box className={className} style={style}>\r\n      {text}\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default StatusDisplay;\r\n","import React from 'react';\r\nimport { CardContent, CardMedia, Chip, Typography } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { useTranslation } from 'react-i18next';\r\n\r\nimport { FormattedProfile, FormattedMatch } from '../../../../../../typings/match';\r\n\r\nconst useStyles = makeStyles({\r\n  root: {},\r\n  tags: {\r\n    position: 'absolute',\r\n    bottom: '40%',\r\n  },\r\n  tag: {\r\n    margin: '3px 3px 0px 0px',\r\n    opacity: '0.8',\r\n  },\r\n  media: {\r\n    height: '60%',\r\n  },\r\n  content: {\r\n    height: '40%',\r\n    overflowY: 'auto',\r\n  },\r\n});\r\n\r\ninterface IProps {\r\n  profile: FormattedProfile | FormattedMatch;\r\n}\r\n\r\nconst DEFAULT_IMAGE = 'https://upload.wikimedia.org/wikipedia/commons/a/ac/No_image_available.svg';\r\n\r\nconst Profile = ({ profile }: IProps) => {\r\n  const c = useStyles();\r\n  const { t } = useTranslation();\r\n\r\n  function parseSecondaryBio(): string | undefined {\r\n    const { location, job } = profile;\r\n    if (location && job) {\r\n      return `${location} - ${job}`;\r\n    } else if (location) {\r\n      return location;\r\n    } else if (job) {\r\n      return job;\r\n    }\r\n  }\r\n\r\n  const bioSecondary = parseSecondaryBio();\r\n\r\n  return (\r\n    <>\r\n      <CardContent className={c.tags}>\r\n        {profile.tagList.map((tag) => (\r\n          <Chip className={c.tag} label={tag} color=\"primary\" />\r\n        ))}\r\n      </CardContent>\r\n      <CardMedia className={c.media} image={profile.image || DEFAULT_IMAGE} title={profile.name} />\r\n      <CardContent className={c.content}>\r\n        <Typography gutterBottom variant=\"h4\" component=\"h2\">\r\n          {profile.name}\r\n        </Typography>\r\n        <Typography gutterBottom color=\"textSecondary\" component=\"p\">\r\n          {t('APPS_MATCH_PROFILE_LAST_ACTIVE', { lastActive: profile.lastActiveFormatted })}\r\n        </Typography>\r\n        {bioSecondary && (\r\n          <Typography gutterBottom variant=\"body1\" color=\"textSecondary\" component=\"p\">\r\n            {bioSecondary}\r\n          </Typography>\r\n        )}\r\n        <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\r\n          {profile.bio}\r\n        </Typography>\r\n      </CardContent>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Profile;\r\n","import React, { useState, useRef } from 'react';\r\nimport { Card, Fab, Box, Tooltip } from '@material-ui/core';\r\nimport CancelIcon from '@material-ui/icons/Clear';\r\nimport FireIcon from '@material-ui/icons/Whatshot';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { useTranslation } from 'react-i18next';\r\n\r\nimport { FormattedProfile } from '../../../../../typings/match';\r\nimport Draggable from './Draggable';\r\nimport StatusDisplay from './StatusDisplay';\r\nimport Profile from './profile/Profile';\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    position: 'absolute',\r\n    margin: '15px 15px 25px 15px',\r\n    height: 'calc(100% - 90px)',\r\n    width: 'calc(100% - 30px)',\r\n    overflow: 'hidden',\r\n    cursor: 'pointer',\r\n  },\r\n  media: {\r\n    height: '60%',\r\n  },\r\n  content: {\r\n    height: '40%',\r\n  },\r\n  status: {\r\n    position: 'absolute',\r\n    zIndex: 20,\r\n    padding: '5px 15px',\r\n    top: 40,\r\n    fontSize: '28px',\r\n    fontWeight: 'bold',\r\n  },\r\n  statusVisible: {\r\n    transition: 'opacity 0.25s ease-in-out',\r\n  },\r\n  // when a user swipes on a profile we need to hide the transition\r\n  // otherwise the status will be transitioning out when the next\r\n  // profile shows up\r\n  statusNull: {\r\n    transition: 'opacity 0s',\r\n  },\r\n  like: {\r\n    color: 'green',\r\n    border: '6px solid green',\r\n    left: 30,\r\n    transform: 'rotate(-18deg)',\r\n  },\r\n  nope: {\r\n    color: 'red',\r\n    border: '6px solid red',\r\n    right: 30,\r\n    transform: 'rotate(18deg)',\r\n  },\r\n  buttons: {\r\n    position: 'absolute',\r\n    bottom: '3px',\r\n    width: '100%',\r\n    height: '55px',\r\n  },\r\n  button: {\r\n    margin: '0px 15px',\r\n  },\r\n});\r\n\r\ninterface IProps {\r\n  profile: FormattedProfile;\r\n  onSwipe: (id: number, liked: boolean) => void;\r\n}\r\n\r\n// this represents how far from the original mouse\r\n// click a user has to drag the profile in order for\r\n// it to be registered as a like or dislike\r\nconst DECISION_THRESHOLD_X_px = 150;\r\n\r\nconst ActiveProfile = ({ profile, onSwipe }: IProps) => {\r\n  const c = useStyles();\r\n  const { t } = useTranslation();\r\n  const [status, setStatus] = useState(null);\r\n  const statusRef = useRef(null);\r\n  const idRef = useRef(null);\r\n\r\n  // we are reading mutated state from the Draggable element so we\r\n  // keep track of it using a ref. Without this ref it will appear\r\n  // from React's point of view that the state is not updating\r\n  statusRef.current = status;\r\n  idRef.current = profile.id;\r\n\r\n  function onDrag(deltaX: number): void {\r\n    const hasDecision = status !== null;\r\n    if (!hasDecision && deltaX > DECISION_THRESHOLD_X_px) {\r\n      setStatus(true);\r\n    } else if (!hasDecision && deltaX < -DECISION_THRESHOLD_X_px) {\r\n      setStatus(false);\r\n    } else if (deltaX > -DECISION_THRESHOLD_X_px && deltaX < DECISION_THRESHOLD_X_px) {\r\n      setStatus(null);\r\n    }\r\n  }\r\n\r\n  // handles when user uses mouse to \"swipe\", or\r\n  // more specifically drag the card to one side or the other\r\n  const handleSwipe = () => {\r\n    onSwipe(idRef.current, statusRef.current);\r\n    setStatus(null);\r\n  };\r\n\r\n  // these handlers are explicit and used for when the\r\n  // user clicks on buttons\r\n  const handleLike = () => {\r\n    onSwipe(idRef.current, true);\r\n    setStatus(null);\r\n  };\r\n  const handleNope = () => {\r\n    onSwipe(idRef.current, false);\r\n    setStatus(null);\r\n  };\r\n\r\n  const isLiked = status === true;\r\n  const notLiked = status === false;\r\n\r\n  const likeClass = `${c.status} ${isLiked ? c.statusVisible : c.statusNull} ${c.like}`;\r\n  const nopeClass = `${c.status} ${notLiked ? c.statusVisible : c.statusNull} ${c.nope}`;\r\n\r\n  return (\r\n    <>\r\n      <Draggable id=\"active-profile\" onDrag={onDrag} onDrop={handleSwipe}>\r\n        <Card raised className={c.root}>\r\n          <StatusDisplay className={likeClass} text={t('APPS_MATCH_LIKED')} visible={isLiked} />\r\n          <StatusDisplay className={nopeClass} text={t('APPS_MATCH_NOPE')} visible={notLiked} />\r\n          <Profile profile={profile} />\r\n        </Card>\r\n      </Draggable>\r\n      <Box className={c.buttons} display=\"flex\" justifyContent=\"center\">\r\n        <Tooltip title={t('APPS_MATCH_DISLIKE')} aria-label=\"dislike\">\r\n          <Fab\r\n            size=\"large\"\r\n            color=\"secondary\"\r\n            aria-label=\"dislike\"\r\n            onClick={handleNope}\r\n            className={c.button}\r\n          >\r\n            <CancelIcon />\r\n          </Fab>\r\n        </Tooltip>\r\n        <Tooltip title={t('APPS_MATCH_LIKE')} aria-label=\"like\">\r\n          <Fab\r\n            size=\"large\"\r\n            color=\"primary\"\r\n            aria-label=\"like\"\r\n            onClick={handleLike}\r\n            className={c.button}\r\n          >\r\n            <FireIcon />\r\n          </Fab>\r\n        </Tooltip>\r\n      </Box>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ActiveProfile;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { Paper } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { useTranslation } from 'react-i18next';\r\n\r\nimport { useProfiles } from '../../hooks/useProfiles';\r\nimport Loader from '../Loader';\r\nimport PageText from '../PageText';\r\nimport ActiveProfile from '../ActiveProfile';\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    height: '100%',\r\n    width: '100%',\r\n    overflow: 'hidden',\r\n  },\r\n});\r\n\r\n// set a minimum load time so the user doesn't see a flash\r\n// of the loader and then the matches themselves\r\nconst MINIMUM_LOAD_TIME = 1250;\r\n\r\nconst MatchPage = () => {\r\n  const classes = useStyles();\r\n  const { t } = useTranslation();\r\n  const { profiles, error, activeProfile, setViewed } = useProfiles();\r\n  const [loaded, setLoaded] = useState(false);\r\n\r\n  useEffect(() => {\r\n    window.setTimeout(() => {\r\n      setLoaded(true);\r\n    }, MINIMUM_LOAD_TIME);\r\n  }, []);\r\n\r\n  const handleSwipe = (id: number, liked: boolean) => {\r\n    // the user didn't choose (didn't swipe far enough)\r\n    if (liked === null) return;\r\n\r\n    setViewed(id, liked);\r\n  };\r\n\r\n  if (error) return <PageText text={t('APPS_MATCH_PROFILES_ERROR')} />;\r\n  if (!loaded || !profiles) return <Loader />;\r\n  if (!activeProfile) return <PageText text={t('APPS_MATCH_NO_PROFILES')} />;\r\n\r\n  return (\r\n    <Paper className={classes.root} square>\r\n      <ActiveProfile profile={activeProfile} onSwipe={handleSwipe} />\r\n    </Paper>\r\n  );\r\n};\r\n\r\nexport default MatchPage;\r\n","import { useRecoilState, useRecoilValue } from 'recoil';\r\nimport { matchState } from './state';\r\n\r\nimport { FormattedProfile, MatchEvents } from '../../../../../typings/match';\r\nimport { useNuiRequest } from 'fivem-nui-react-lib';\r\n\r\ninterface IUseProfiles {\r\n  profiles: FormattedProfile[];\r\n  activeProfile: FormattedProfile | null;\r\n  setViewed: (index: number, liked: boolean) => void;\r\n  error: boolean;\r\n}\r\n\r\nexport const useProfiles = (): IUseProfiles => {\r\n  const Nui = useNuiRequest();\r\n  const [profiles, setProfiles] = useRecoilState(matchState.profiles);\r\n  const error = useRecoilValue(matchState.errorLoadingProfiles);\r\n\r\n  const setViewed = (id: number, liked: boolean) => {\r\n    setProfiles((profiles) =>\r\n      profiles.map((profile) => {\r\n        if (id === profile.id) return { ...profile, viewed: true, liked };\r\n        return profile;\r\n      }),\r\n    );\r\n\r\n    Nui.send(MatchEvents.SAVE_LIKES, [{ id, liked }]);\r\n  };\r\n\r\n  const filteredProfiles = profiles ? profiles.filter((profile) => !profile.viewed) : null;\r\n  const activeProfile = profiles ? filteredProfiles[0] : null;\r\n\r\n  return { profiles, activeProfile, error, setViewed };\r\n};\r\n","import { useRecoilState, useRecoilValue } from 'recoil';\r\nimport { matchState } from './state';\r\n\r\nimport { FormattedProfile } from '../../../../../typings/match';\r\n\r\ninterface IUseProfiles {\r\n  profile: FormattedProfile;\r\n  setProfile: (profile: FormattedProfile) => void;\r\n  noProfileExists: boolean;\r\n}\r\n\r\nexport const useProfile = (): IUseProfiles => {\r\n  const [profile, setProfile] = useRecoilState<FormattedProfile>(matchState.myProfile);\r\n  const noProfileExists = useRecoilValue(matchState.noProfileExists);\r\n  return { profile, setProfile, noProfileExists };\r\n};\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { TextField } from './Input';\r\n\r\nconst useStyles = makeStyles({\r\n  formContainer: {\r\n    width: '100%',\r\n    marginTop: '8px',\r\n  },\r\n  textField: {\r\n    width: '100%',\r\n  },\r\n});\r\n\r\nfunction ProfileField({ label, value, handleChange, allowChange, multiline, inputRef }) {\r\n  const classes = useStyles();\r\n  const _handleChange = (e) => handleChange(e.target.value);\r\n\r\n  return (\r\n    <div className={classes.formContainer}>\r\n      <TextField\r\n        className={classes.textField}\r\n        label={label}\r\n        value={value}\r\n        onChange={_handleChange}\r\n        disabled={!allowChange}\r\n        multiline={multiline}\r\n        inputRef={inputRef}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nProfileField.defaultProps = {\r\n  allowChange: true,\r\n  multiline: false,\r\n  inputRef: null,\r\n};\r\n\r\nexport default ProfileField;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Fab } from '@material-ui/core';\r\nimport PublishIcon from '@material-ui/icons/Publish';\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    position: 'absolute',\r\n    bottom: '15px',\r\n    right: '15px',\r\n  },\r\n});\r\n\r\nconst MINIMUM_LOAD_TIME = 750;\r\n\r\ninterface IProps {\r\n  handleClick: () => void;\r\n  loading: boolean;\r\n}\r\n\r\nexport function ProfileUpdateButton({ handleClick, loading }: IProps) {\r\n  const classes = useStyles();\r\n  const [minimumLoadPassed, setMimimumLoadPassed] = useState(true);\r\n\r\n  useEffect(() => {\r\n    setMimimumLoadPassed(false);\r\n    const timeout = window.setTimeout(() => {\r\n      setMimimumLoadPassed(true);\r\n    }, MINIMUM_LOAD_TIME);\r\n    return () => window.clearTimeout(timeout);\r\n  }, [loading]);\r\n\r\n  const isLoading = loading || !minimumLoadPassed;\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Fab color=\"primary\" onClick={handleClick} disabled={isLoading}>\r\n        <PublishIcon />\r\n      </Fab>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ProfileUpdateButton;\r\n","import { useRecoilValue } from 'recoil';\r\nimport { ResourceConfig } from '../../../../../typings/config';\r\nimport { useNotifications } from '../../notifications/hooks/useNotifications';\r\nimport { useNuiRequest } from 'fivem-nui-react-lib';\r\nimport { phoneState } from './state';\r\nimport { PhoneEvents } from '../../../../../typings/phone';\r\n\r\ninterface IUsePhone {\r\n  ResourceConfig?: ResourceConfig;\r\n  openPhone(): void;\r\n  closePhone(): void;\r\n  isPhoneOpen: boolean;\r\n  //isPhoneReady: boolean;\r\n}\r\n\r\nexport const usePhone = (): IUsePhone => {\r\n  const Nui = useNuiRequest();\r\n  const isPhoneOpen = useRecoilValue(phoneState.visibility);\r\n  const config = useRecoilValue(phoneState.resourceConfig);\r\n\r\n  const { removeAlerts } = useNotifications();\r\n\r\n  const closePhone = () => {\r\n    removeAlerts();\r\n    Nui.send(PhoneEvents.CLOSE_PHONE);\r\n  };\r\n  const openPhone = () => {\r\n    Nui.send(PhoneEvents.OPEN_PHONE);\r\n  };\r\n\r\n  return {\r\n    ResourceConfig: config as ResourceConfig,\r\n    closePhone,\r\n    openPhone,\r\n    isPhoneOpen,\r\n  };\r\n};\r\n","import React, { useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { useNuiRequest } from 'fivem-nui-react-lib';\r\nimport {\r\n  Profile as IProfile,\r\n  FormattedProfile,\r\n  MatchEvents,\r\n} from '../../../../../../typings/match';\r\nimport ProfileField from '../../../../ui/components/ProfileField';\r\nimport UpdateButton from '../../../../ui/components/UpdateButton';\r\nimport { Card } from '@material-ui/core';\r\nimport Profile from './Profile';\r\nimport { usePhone } from '../../../../os/phone/hooks/usePhone';\r\nimport PageText from '../PageText';\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    position: 'relative',\r\n    width: '100%',\r\n    height: 'calc(100% - 40px)',\r\n    padding: '15px',\r\n  },\r\n  card: {\r\n    position: 'absolute',\r\n    margin: '15px 15px 25px 15px',\r\n    height: 'calc(100% - 80px)',\r\n    width: 'calc(100% - 30px)',\r\n    overflow: 'hidden',\r\n  },\r\n  spacer: {\r\n    height: '8px',\r\n  },\r\n});\r\n\r\ninterface IProps {\r\n  profile: FormattedProfile;\r\n  showPreview: boolean;\r\n}\r\n\r\nexport function ProfileForm({ profile, showPreview }: IProps) {\r\n  const Nui = useNuiRequest();\r\n  const classes = useStyles();\r\n  const { t } = useTranslation();\r\n  const { ResourceConfig } = usePhone();\r\n\r\n  // note that this assumes we are defensively checking\r\n  // that profile is not null in a parent above this component.\r\n  // Annoyingling adding conditionals above this line to not render\r\n  // when profile === null results in a react error that different\r\n  // amounts of hooks are rendering\r\n  const [image, setImage] = useState(profile?.image || '');\r\n  const [name, setName] = useState(profile?.name || '');\r\n  const [bio, setBio] = useState(profile?.bio || '');\r\n  const [job, setJob] = useState(profile?.job || '');\r\n  const [location, setLocation] = useState(profile?.location || '');\r\n  const [tags, setTags] = useState(profile?.tags || '');\r\n\r\n  const update: FormattedProfile = {\r\n    ...profile,\r\n    image,\r\n    name,\r\n    bio,\r\n    location,\r\n    job,\r\n    tagList: tags.split(',').map((tag) => tag.trim()),\r\n  };\r\n\r\n  const handleUpdate = () => {\r\n    const updatedProfile: IProfile = {\r\n      ...update,\r\n      name: update.name.trim(),\r\n      image: update.image.trim(),\r\n      tags: update.tagList.join(','),\r\n    };\r\n    const event = profile ? MatchEvents.UPDATE_MY_PROFILE : MatchEvents.CREATE_MY_PROFILE;\r\n    Nui.send(event, updatedProfile);\r\n  };\r\n\r\n  if (!profile && !ResourceConfig.match.allowEditableProfileName) {\r\n    return <PageText text={t('APPS_MATCH_PROFILE_CONFIGURATION')} />;\r\n  }\r\n\r\n  if (showPreview) {\r\n    return (\r\n      <Card raised className={classes.card}>\r\n        <Profile profile={update} />\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <ProfileField\r\n        label={t('APPS_MATCH_EDIT_PROFILE_IMAGE')}\r\n        value={update.image}\r\n        handleChange={setImage}\r\n        allowChange\r\n      />\r\n      <ProfileField\r\n        label={t('APPS_MATCH_EDIT_PROFILE_NAME')}\r\n        value={name}\r\n        handleChange={setName}\r\n        allowChange={ResourceConfig.match.allowEditableProfileName}\r\n      />\r\n      <ProfileField\r\n        label={t('APPS_MATCH_EDIT_PROFILE_BIO')}\r\n        value={update.bio}\r\n        handleChange={setBio}\r\n        multiline\r\n      />\r\n      <ProfileField\r\n        label={t('APPS_MATCH_EDIT_PROFILE_LOCATION')}\r\n        value={update.location}\r\n        handleChange={setLocation}\r\n      />\r\n      <ProfileField\r\n        label={t('APPS_MATCH_EDIT_PROFILE_JOB')}\r\n        value={update.job}\r\n        handleChange={setJob}\r\n      />\r\n      <ProfileField label={t('APPS_MATCH_EDIT_PROFILE_TAGS')} value={tags} handleChange={setTags} />\r\n      <UpdateButton handleClick={handleUpdate} loading={false} />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ProfileForm;\r\n","import React, { useState } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Box, FormControlLabel, Switch } from '@material-ui/core';\r\n\r\nimport { useProfile } from '../../hooks/useProfile';\r\nimport Loader from '../Loader';\r\nimport ProfileForm from '../profile/ProfileForm';\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    height: '100%',\r\n    width: '100%',\r\n  },\r\n  switch: {\r\n    marginLeft: '15px',\r\n  },\r\n});\r\n\r\nfunction ProfileEditor() {\r\n  const { profile, noProfileExists } = useProfile();\r\n  const classes = useStyles();\r\n  const { t } = useTranslation();\r\n  const [showPreview, setShowPreview] = useState(false);\r\n\r\n  const toggleSwitch = () => {\r\n    setShowPreview((preview) => !preview);\r\n  };\r\n\r\n  if (!profile && !noProfileExists) return <Loader />;\r\n\r\n  return (\r\n    <Box className={classes.root}>\r\n      <Box className={classes.switch}>\r\n        <FormControlLabel\r\n          control={<Switch checked={showPreview} onChange={toggleSwitch} />}\r\n          label={t('APPS_MATCH_EDIT_PROFILE_PREVIEW')}\r\n        />\r\n      </Box>\r\n      <ProfileForm showPreview={showPreview} profile={profile} />\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default ProfileEditor;\r\n","import React, { useState } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { useHistory } from 'react-router-dom';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport { Box, Button, ListItem, makeStyles } from '@material-ui/core';\r\nimport PersonIcon from '@material-ui/icons/Person';\r\nimport ChatIcon from '@material-ui/icons/Chat';\r\n\r\nimport { FormattedMatch } from '../../../../../../typings/match';\r\nimport Profile from '../profile/Profile';\r\n\r\nconst useStyles = makeStyles({\r\n  profile: {\r\n    position: 'relative',\r\n    height: '90%',\r\n    marginTop: '15px',\r\n  },\r\n});\r\n\r\ninterface IProps {\r\n  match: FormattedMatch;\r\n}\r\n\r\nexport const Match = ({ match }: IProps) => {\r\n  const history = useHistory();\r\n  const classes = useStyles();\r\n  const { t } = useTranslation();\r\n  const [showProfile, setShowProfile] = useState(false);\r\n\r\n  const handleMessage = () => {\r\n    history.push(`/messages/new/${match.phoneNumber}`);\r\n  };\r\n\r\n  const handleProfile = () => {\r\n    setShowProfile((show) => !show);\r\n  };\r\n\r\n  const secondaryText = t('APPS_MATCH_PROFILE_MATCHED_AT', {\r\n    matchedAt: match.matchedAtFormatted,\r\n  });\r\n\r\n  return (\r\n    <>\r\n      <ListItem divider>\r\n        <ListItemText primary={match.name} secondary={secondaryText} />\r\n        <Button onClick={handleProfile}>\r\n          <PersonIcon />\r\n        </Button>\r\n        <Button onClick={handleMessage}>\r\n          <ChatIcon />\r\n        </Button>\r\n      </ListItem>\r\n      {showProfile && (\r\n        <Box className={classes.profile}>\r\n          <Profile profile={match} />\r\n        </Box>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Match;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { Box, makeStyles } from '@material-ui/core';\r\n\r\nimport { useMatches } from '../../hooks/useMatches';\r\nimport Loader from '../Loader';\r\nimport PageText from '../PageText';\r\nimport Match from '../matches/Match';\r\nimport { useNuiRequest } from 'fivem-nui-react-lib';\r\nimport { MatchEvents } from '../../../../../../typings/match';\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    height: '100%',\r\n  },\r\n});\r\n\r\nconst MINIMUM_LOAD_TIME = 1500;\r\n\r\nfunction MatchList() {\r\n  const Nui = useNuiRequest();\r\n  const classes = useStyles();\r\n  const { t } = useTranslation();\r\n  const { matches, error } = useMatches();\r\n  const [loaded, setLoaded] = useState(false);\r\n\r\n  // We make the conscious descion here to fetch matches everytime\r\n  // a user loads this page because this list is dependent on\r\n  // other player's database interactions (i.e. their likes/dislikes)\r\n  // not just the current players.\r\n  // This is less performant but means that we will always have the\r\n  // correct state when the player views this page\r\n  useEffect(() => {\r\n    Nui.send(MatchEvents.GET_MATCHES);\r\n    window.setTimeout(() => {\r\n      setLoaded(true);\r\n    }, MINIMUM_LOAD_TIME);\r\n  }, [Nui]);\r\n\r\n  if (error) return <PageText text={t('APPS_MATCH_MATCHES_ERROR')} />;\r\n  if (!loaded || !matches) return <Loader />;\r\n  if (matches.length === 0) return <PageText text={t('APPS_MATCH_NO_MATCHES')} />;\r\n\r\n  return (\r\n    <Box className={classes.root}>\r\n      {matches.map((match) => (\r\n        <Match key={match.id} match={match} />\r\n      ))}\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default MatchList;\r\n","import { useRecoilValue } from 'recoil';\r\nimport { matchState } from './state';\r\n\r\nimport { FormattedMatch } from '../../../../../typings/match';\r\n\r\ninterface IUseMatches {\r\n  matches: FormattedMatch[];\r\n  error: boolean;\r\n}\r\n\r\nexport const useMatches = (): IUseMatches => {\r\n  const matches = useRecoilValue<FormattedMatch[]>(matchState.matches);\r\n  const error = useRecoilValue(matchState.errorLoadingMatches);\r\n  return { matches, error };\r\n};\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Route } from 'react-router-dom';\r\n\r\nimport { AppWrapper } from '../../../ui/components';\r\nimport { AppTitle } from '../../../ui/components/AppTitle';\r\nimport { AppContent } from '../../../ui/components/AppContent';\r\nimport { useApp } from '../../../os/apps/hooks/useApps';\r\nimport InjectDebugData from '../../../os/debug/InjectDebugData';\r\nimport { MatchThemeProvider } from '../providers/MatchThemeProvider';\r\nimport { useNuiRequest } from 'fivem-nui-react-lib';\r\nimport MatchBottomNavigation from '../components/BottomNavigation';\r\nimport MatchPage from './views/MatchPage';\r\nimport ProfileEditor from './views/ProfileEditor';\r\nimport MatchList from './views/MatchList';\r\nimport { MatchEvents } from '../../../../../typings/match';\r\nimport { useProfile } from '../hooks/useProfile';\r\n\r\nexport const MatchApp = () => {\r\n  const Nui = useNuiRequest();\r\n  const match = useApp('MATCH');\r\n  const [activePage, setActivePage] = useState(0);\r\n  const { noProfileExists } = useProfile();\r\n\r\n  useEffect(() => {\r\n    Nui.send(MatchEvents.INITIALIZE);\r\n  }, [Nui]);\r\n\r\n  const handlePageChange = (e, page) => setActivePage(page);\r\n\r\n  return (\r\n    <MatchThemeProvider>\r\n      <AppWrapper id=\"contact-app\">\r\n        <AppTitle app={match} />\r\n        {noProfileExists ? (\r\n          <AppContent>\r\n            <ProfileEditor />\r\n          </AppContent>\r\n        ) : (\r\n          <>\r\n            <AppContent>\r\n              <Route path=\"/match/\" exact component={MatchPage} />\r\n              <Route path=\"/match/matches\" exact component={MatchList} />\r\n              <Route path=\"/match/profile\" exact component={ProfileEditor} />\r\n            </AppContent>\r\n            <MatchBottomNavigation activePage={activePage} handleChange={handlePageChange} />\r\n          </>\r\n        )}\r\n      </AppWrapper>\r\n    </MatchThemeProvider>\r\n  );\r\n};\r\n\r\nInjectDebugData(\r\n  [\r\n    {\r\n      app: 'MATCH',\r\n      method: MatchEvents.GET_PROFILES_SUCCESS,\r\n      data: [\r\n        {\r\n          id: 1,\r\n          image:\r\n            'https://cdn.vox-cdn.com/thumbor/9xCALlkm2Mc0HQk8kMr1Ui3YNbc=/0x0:5464x3070/920x613/filters:focal(2295x1098:3169x1972):format(webp)/cdn.vox-cdn.com/uploads/chorus_image/image/67031748/shutterstock_1450403549.0.jpg',\r\n          name: 'Person Alpha',\r\n          bio:\r\n            'Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo.',\r\n          createdAt: 1615932985,\r\n          updatedAt: 1615932985,\r\n          lastActive: 1616004986,\r\n          job: 'Gardener',\r\n          location: 'Grapeseed',\r\n          tags: 'gardening',\r\n          phoneNumber: '987-6543',\r\n        },\r\n        {\r\n          id: 2,\r\n          image:\r\n            'https://media.cntraveler.com/photos/5f8f09c3a078e9112956774d/16:9/w_1600%2Cc_limit/Chicago-GettyImages-1065188752.jpg',\r\n          name: 'Person Beta',\r\n          bio: 'l impedit quo minus id quod maxime placeat facere possimus',\r\n          createdAt: 1615846585,\r\n          updatedAt: 1615846585,\r\n          lastActive: 1615850185,\r\n          job: 'Mechanic',\r\n          location: 'Harmony',\r\n          tags: 'tinkering,robotics',\r\n          phoneNumber: '654-3219',\r\n        },\r\n        {\r\n          id: 3,\r\n          image: 'https://www.langan.com/wp-content/uploads/2019/02/Boston-996x554.jpg',\r\n          name: 'Person Charlie',\r\n          bio: 'ut aut reiciendis voluptatibus',\r\n          createdAt: 1615850185,\r\n          updatedAt: 1615850185,\r\n          lastActive: 1613607385,\r\n          job: 'Lawyer',\r\n          location: 'Los Santos',\r\n          tags: 'reading,coolstuff, coffee',\r\n          phoneNumber: '123-4567',\r\n        },\r\n      ],\r\n    },\r\n    {\r\n      app: 'MATCH',\r\n      method: MatchEvents.GET_MY_PROFILE_SUCCESS,\r\n      data: {\r\n        id: 4,\r\n        image:\r\n          'https://www.middlebury.edu/institute/sites/www.middlebury.edu.institute/files/styles/1040x585/public/2018-10/Nashville-skyline.jpg?fv=mS11EKrT&itok=HNhHqYUX',\r\n        name: 'Kire Says',\r\n        bio: \"Kire's cool profile that has many cool things. And others.\",\r\n        createdAt: 1615932985,\r\n        updatedAt: 1615932985,\r\n        lastActive: 1616004986,\r\n        job: 'Engineer',\r\n        location: 'Boston',\r\n        tags: 'code,books',\r\n        phoneNumber: '999-9999',\r\n      },\r\n    },\r\n    {\r\n      app: 'MATCH',\r\n      method: MatchEvents.GET_MATCHES_SUCCESS,\r\n      data: [\r\n        {\r\n          id: 5,\r\n          image:\r\n            'https://media.cntraveler.com/photos/5f8f09c3a078e9112956774d/16:9/w_1600%2Cc_limit/Chicago-GettyImages-1065188752.jpg',\r\n          name: 'Person Delta',\r\n          bio: 'l impedit quo minus id quod maxime placeat facere possimus',\r\n          createdAt: 1615846585,\r\n          updatedAt: 1615846585,\r\n          lastActive: 1615850185,\r\n          matchedAt: 1613607385,\r\n          job: 'Mechanic',\r\n          location: 'Harmony',\r\n          tags: 'tinkering,robotics',\r\n          phoneNumber: '654-3219',\r\n        },\r\n        {\r\n          id: 6,\r\n          image: 'https://www.langan.com/wp-content/uploads/2019/02/Boston-996x554.jpg',\r\n          name: 'Person Echo',\r\n          bio: 'ut aut reiciendis voluptatibus',\r\n          createdAt: 1615850185,\r\n          updatedAt: 1615850185,\r\n          lastActive: 1613607385,\r\n          job: 'Lawyer',\r\n          location: 'Los Santos',\r\n          tags: 'reading,coolstuff, coffee',\r\n          phoneNumber: '123-4567',\r\n          matchedAt: 1613607385,\r\n        },\r\n      ],\r\n    },\r\n  ],\r\n  200,\r\n);\r\n","import { atom } from 'recoil';\r\n\r\nexport const twitterState = {\r\n  profile: atom({\r\n    key: 'profile',\r\n    default: null,\r\n  }),\r\n  defaultProfileNames: atom({\r\n    key: 'defaultProfileNames',\r\n    default: null,\r\n  }),\r\n  tweets: atom({\r\n    key: 'tweets',\r\n    default: [],\r\n  }),\r\n  filteredTweets: atom({\r\n    key: 'filteredTweets',\r\n    default: [],\r\n  }),\r\n  showCreateTweetModal: atom({\r\n    key: 'showCreateTweetModal',\r\n    default: false,\r\n  }),\r\n  modalMessage: atom({\r\n    key: 'modalMessage',\r\n    default: '',\r\n  }),\r\n  createTweetLoading: atom({\r\n    key: 'createTweetLoading',\r\n    default: false,\r\n  }),\r\n  createTweetSuccessful: atom({\r\n    key: 'createTweetSuccessful',\r\n    default: null,\r\n  }),\r\n  updateProfileLoading: atom({\r\n    key: 'updateProfileLoading',\r\n    default: false,\r\n  }),\r\n  updateProfileSuccess: atom({\r\n    key: 'updateProfileSuccess',\r\n    default: null,\r\n  }),\r\n  unreadTweetsCount: atom({\r\n    key: 'unreadTweetsCount',\r\n    default: 0,\r\n  }),\r\n};\r\n","export const IMG_DEFAULT_AVATAR = 'media/twitter/egg.png';\r\nexport const IMG_INVALID_AVATAR = 'media/twitter/invalid.png';\r\nexport const APP_TWITTER = 'TWITTER';\r\n\r\nexport const SETTING_MENTIONS = 'mentions';\r\nexport const SETTINGS_ALL_TWEETS = 'all';\r\n","import { useTranslation } from 'react-i18next';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { useRecoilState, useRecoilValue } from 'recoil';\r\nimport { Tweet, Profile } from '../../../../../typings/twitter';\r\n\r\nimport { useApp } from '../../../os/apps/hooks/useApps';\r\nimport { useNotifications } from '../../../os/notifications/hooks/useNotifications';\r\nimport { useSettings } from '../../settings/hooks/useSettings';\r\nimport { SETTING_MENTIONS } from '../utils/constants';\r\nimport { twitterState } from './state';\r\n\r\nconst NOTIFICATION_ID = 'twitter:broadcast';\r\n\r\nfunction isMentioned(profileName: string, message: string) {\r\n  return message.toLowerCase().includes(profileName.toLowerCase());\r\n}\r\n\r\nexport const useTwitterNotifications = () => {\r\n  const [settings] = useSettings();\r\n  const { t } = useTranslation();\r\n  const history = useHistory();\r\n\r\n  const { addNotificationAlert, addNotification, hasNotification, removeId } = useNotifications();\r\n\r\n  const { icon, notificationIcon } = useApp('TWITTER');\r\n\r\n  const [unreadCount, setUnreadCount] = useRecoilState(twitterState.unreadTweetsCount);\r\n  const profile: Profile | null = useRecoilValue(twitterState.profile);\r\n\r\n  const setNotification = ({ profile_name, message, isRetweet }: Tweet) => {\r\n    const titleStr = isRetweet\r\n      ? 'APPS_TWITTER_NEW_RETWEET_BROADCAST'\r\n      : 'APPS_TWITTER_NEW_BROADCAST';\r\n\r\n    // profile defaults to null, if for some reason it is not initialized\r\n    // defend against this case\r\n    if (!profile) return;\r\n\r\n    // Prevents a crash if there is no current profile\r\n    // set and a Twitter broadcast occurs.\r\n    const currentProfileName = profile?.profile_name;\r\n\r\n    // we don't want notifications of our own tweets\r\n    if (currentProfileName === profile_name) return;\r\n\r\n    // if the player only wants notifications on tweets they are\r\n    // mentioned in\r\n    if (\r\n      settings.TWITTER_notiFilter.value === SETTING_MENTIONS &&\r\n      !isMentioned(currentProfileName, message)\r\n    )\r\n      return;\r\n\r\n    const notification = {\r\n      app: 'TWITTER',\r\n      id: NOTIFICATION_ID,\r\n      sound: isMentioned(currentProfileName, message),\r\n      title: t(titleStr, { profile_name }),\r\n      onClick: () => history.push('/twitter'),\r\n      content: message,\r\n      icon,\r\n      notificationIcon,\r\n    };\r\n    const newCount = unreadCount + 1;\r\n    setUnreadCount(newCount);\r\n    addNotificationAlert(notification);\r\n    if (hasNotification(NOTIFICATION_ID)) {\r\n      removeId(NOTIFICATION_ID);\r\n      addNotification({\r\n        ...notification,\r\n        title: t('APPS_TWITTER_UNREAD_MESSAGES', {\r\n          count: newCount,\r\n        }),\r\n        content: null,\r\n      });\r\n      return;\r\n    }\r\n    addNotification(notification);\r\n  };\r\n\r\n  return { setNotification, setUnreadCount, unreadCount };\r\n};\r\n","const ONE_MINUTE = 60;\r\nconst ONE_HOUR = 60 * ONE_MINUTE;\r\nconst ONE_DAY = 24 * ONE_HOUR;\r\n\r\nconst JUST_NOW = 'APPS_TWITTER_TIME_JUST_NOW';\r\nconst MINUTES = 'APPS_TWITTER_TIME_MINUTES';\r\nconst HOURS = 'APPS_TWITTER_TIME_HOURS';\r\nconst DAYS = 'APPS_TWITTER_TIME_DAYS';\r\n\r\n/**\r\n * Convert seconds to a human readable format i.e. \"Just Now\", \"2m\", \"3d\"\r\n * @param {function} t - translation object passed from a component implementing the hook\r\n * @param {number} seconds - seconds to translate to a string\r\n */\r\nexport function secondsToHumanReadable(t: (input: string) => string, seconds: number): string {\r\n  if (seconds < 60) {\r\n    return t(JUST_NOW);\r\n  } else if (seconds < ONE_HOUR) {\r\n    return `${Math.floor(seconds / ONE_MINUTE)}${t(MINUTES)}`;\r\n  } else if (seconds < ONE_DAY) {\r\n    return `${Math.floor(seconds / ONE_HOUR)}${t(HOURS)}`;\r\n  } else {\r\n    return `${Math.floor(seconds / ONE_DAY)}${t(DAYS)}`;\r\n  }\r\n}\r\n","export interface NewTweet {\r\n  message: string;\r\n  images?: string;\r\n  retweet?: number;\r\n}\r\n\r\nexport type SETTING_MENTIONS = 'mentions';\r\nexport type SETTINGS_ALL_TWEETS = 'all';\r\n\r\nexport interface Tweet extends NewTweet {\r\n  profile_name: string;\r\n  profile_id: number;\r\n  id: number;\r\n  identifier: string;\r\n  isMine: boolean;\r\n  isLiked: boolean;\r\n  isReported: boolean;\r\n  avatar_url: string;\r\n  isRetweet: number | boolean;\r\n  isRetweetedByPlayer?: boolean;\r\n  retweetIdentifier: string;\r\n  retweetId: string;\r\n  seconds_since_tweet: number;\r\n  retweetProfileName: string;\r\n  retweetAvatarUrl: string;\r\n  createdAt: string;\r\n  updatedAt: string;\r\n}\r\n\r\nexport interface Image {\r\n  id: string;\r\n  link: string;\r\n}\r\nexport interface FormattedTweet extends Omit<Tweet, 'images'> {\r\n  images: Image[];\r\n}\r\n\r\nexport interface Profile {\r\n  id: number;\r\n  profile_name: string;\r\n  identifier: string;\r\n  avatar_url?: string;\r\n  bio?: string;\r\n  location?: string;\r\n  job?: string;\r\n  createdAt: string;\r\n  updatedAt: string;\r\n}\r\n\r\nexport enum TwitterEvents {\r\n  FETCH_TWEETS = 'npwd:fetchTweets',\r\n  FETCH_TWEETS_SUCCESS = 'fetchTweets',\r\n  FETCH_TWEETS_FAILURE = 'fetchTweetsFailed',\r\n  FETCH_TWEETS_FILTERED = 'npwd:fetchTweetsFiltered',\r\n  FETCH_TWEETS_FILTERED_SUCCESS = 'fetchTweetsFiltered',\r\n  FETCH_TWEETS_FILTERED_FAILURE = 'fetchTweetsFilteredFailed',\r\n  CREATE_PROFILE = 'npwd:createTwitterProfile',\r\n  CREATE_PROFILE_RESULT = 'npwd:createProfileResult',\r\n  GET_OR_CREATE_PROFILE = 'npwd:getOrCreateTwitterProfile',\r\n  GET_OR_CREATE_PROFILE_NULL = 'getOrCreateTwitterProfileNull',\r\n  GET_OR_CREATE_PROFILE_SUCCESS = 'getOrCreateTwitterProfile',\r\n  GET_OR_CREATE_PROFILE_FAILURE = 'getOrCreateTwitterProfileFailed',\r\n  UPDATE_PROFILE = 'npwd:updateTwitterProfile',\r\n  UPDATE_PROFILE_LOADING = 'updateProfileLoading',\r\n  UPDATE_PROFILE_RESULT = 'updateProfileResult',\r\n  CREATE_TWEET = 'npwd:createTweet',\r\n  CREATE_TWEET_LOADING = 'createTweetLoading',\r\n  CREATE_TWEET_RESULT = 'createTweetResult',\r\n  CREATE_TWEET_BROADCAST = 'createTweetBroadcast',\r\n  CREATE_TWEET_FAILURE = 'createTweetResultFailed',\r\n  DELETE_TWEET = 'npwd:deleteTweet',\r\n  DELETE_TWEET_SUCCESS = 'deleteTweetSuccess',\r\n  DELETE_TWEET_FAILURE = 'deleteTweetFailed',\r\n  TOGGLE_LIKE = 'npwd:toggleLike',\r\n  TOGGLE_LIKE_SUCCESS = 'toggleLikeSuccess',\r\n  TOGGLE_LIKE_FAILURE = 'toggleLikeFailed',\r\n  RETWEET = 'npwd:retweet',\r\n  RETWEET_SUCCESS = 'npwd:retweetSuccess',\r\n  RETWEET_EXISTS = 'npwd:retweetExists',\r\n  RETWEET_FAILURE = 'npwd:retweetFailed',\r\n  REPORT = 'npwd:reportTweet',\r\n  REPORT_SUCCESS = 'reportTweetSuccess',\r\n  REPORT_FAILURE = 'reportTweetFailed',\r\n}\r\n","import React, { useState } from 'react';\r\nimport { Button, CircularProgress } from '@material-ui/core';\r\nimport FavoriteBorderIcon from '@material-ui/icons/FavoriteBorder';\r\nimport FavoriteIcon from '@material-ui/icons/Favorite';\r\nimport { useNuiRequest } from 'fivem-nui-react-lib';\r\nimport { TwitterEvents } from '../../../../../../typings/twitter';\r\n\r\nconst LOADING_TIME = 1250;\r\n\r\nfunction LikeButton({ tweetId, isLiked }) {\r\n  const Nui = useNuiRequest();\r\n  const [liked, setLiked] = useState(isLiked);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleClick = () => {\r\n    Nui.send(TwitterEvents.TOGGLE_LIKE, tweetId);\r\n    setLoading(true);\r\n    window.setTimeout(() => {\r\n      setLiked(!liked);\r\n      setLoading(false);\r\n    }, LOADING_TIME);\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <Button disabled>\r\n        <CircularProgress size={22} />\r\n      </Button>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Button onClick={handleClick}>\r\n      {liked ? <FavoriteIcon color=\"primary\" /> : <FavoriteBorderIcon />}\r\n    </Button>\r\n  );\r\n}\r\n\r\nexport default LikeButton;\r\n","import React from 'react';\r\nimport { useSetRecoilState } from 'recoil';\r\nimport { Button } from '@material-ui/core';\r\nimport ReplyIcon from '@material-ui/icons/Reply';\r\n\r\nimport { twitterState } from '../../hooks/state';\r\n\r\nexport const ReplyButton = ({ profile_name }) => {\r\n  const setModalVisible = useSetRecoilState(twitterState.showCreateTweetModal);\r\n  const setMessage = useSetRecoilState(twitterState.modalMessage);\r\n\r\n  const handleClick = () => {\r\n    setMessage(`@${profile_name} `);\r\n    setModalVisible(true);\r\n  };\r\n\r\n  return (\r\n    <Button onClick={handleClick}>\r\n      <ReplyIcon />\r\n    </Button>\r\n  );\r\n};\r\n\r\nexport default ReplyButton;\r\n","import React from 'react';\r\nimport { IconButton } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport { PictureReveal } from '../../../../ui/components/PictureReveal';\r\nimport { PictureResponsive } from '../../../../ui/components/PictureResponsive';\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  root: {\r\n    margin: '2px 15px',\r\n  },\r\n  imageContainer: {\r\n    // catch the close button here so it doesn't go all the way up to the modal\r\n    position: 'relative',\r\n    display: 'inline-block',\r\n  },\r\n  imgButton: {\r\n    position: 'absolute', // show the close button in the top right of the image\r\n    top: '2px',\r\n    right: '5px',\r\n    backgroundColor: '#000',\r\n    opacity: 0.7,\r\n    '&:hover': {\r\n      // fixes a bug where when the user closes one image material-ui puts\r\n      // the hover status on the previous image\r\n      backgroundColor: '#000',\r\n    },\r\n  },\r\n}));\r\n\r\nexport const Image = ({ link, handleClick }) => {\r\n  const classes = useStyles();\r\n  return (\r\n    <div className={classes.imageContainer}>\r\n      {handleClick && (\r\n        <IconButton className={classes.imgButton} onClick={handleClick} size=\"small\">\r\n          <CloseIcon />\r\n        </IconButton>\r\n      )}\r\n      <PictureReveal>\r\n        <PictureResponsive alt=\"small avatar\" src={link} />\r\n      </PictureReveal>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Image;\r\n","import { Box } from '@material-ui/core';\r\nimport React from 'react';\r\n\r\nimport Image from './Image';\r\n\r\nexport const ImageDisplay = ({ visible, images, removeImage, small }) => {\r\n  if (!visible || !images || images.length === 0) return null;\r\n\r\n  return (\r\n    <Box p={1}>\r\n      {images.map((image) => (\r\n        <Image\r\n          key={image.id}\r\n          link={image.link}\r\n          handleClick={removeImage ? () => removeImage(image.id) : null}\r\n        />\r\n      ))}\r\n    </Box>\r\n  );\r\n};\r\n\r\nImageDisplay.defaultProps = {\r\n  removeImage: null,\r\n  small: false,\r\n};\r\n\r\nexport default ImageDisplay;\r\n","import React, { useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nimport { usePhone } from '../../../os/phone/hooks/usePhone';\r\nimport { IMG_DEFAULT_AVATAR, IMG_INVALID_AVATAR } from '../utils/constants';\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: '100%',\r\n  },\r\n  img: {\r\n    borderRadius: '50%',\r\n    objectFit: 'cover',\r\n  },\r\n});\r\n\r\nfunction Avatar({ avatarUrl, showInvalidImage, height, width }) {\r\n  const classes = useStyles();\r\n  const [showImageError, setShowImageError] = useState(false);\r\n  const { ResourceConfig } = usePhone();\r\n\r\n  const handleImageError = () => setShowImageError(true);\r\n  const handleImageLoad = () => setShowImageError(false);\r\n\r\n  if (!ResourceConfig || !ResourceConfig.twitter.enableAvatars) return null;\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      {showImageError && (\r\n        <img\r\n          className={classes.img}\r\n          src={showInvalidImage ? IMG_INVALID_AVATAR : IMG_DEFAULT_AVATAR}\r\n          alt=\"Invalid avatar\"\r\n          style={{ height, width }}\r\n        />\r\n      )}\r\n      <img\r\n        className={classes.img}\r\n        src={avatarUrl || IMG_DEFAULT_AVATAR}\r\n        alt=\"Your profile avatar\"\r\n        onError={handleImageError}\r\n        onLoad={handleImageLoad}\r\n        style={{ display: showImageError ? 'none' : 'block', height, width }}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nAvatar.defaultProps = {\r\n  avatarUrl: null,\r\n  showInvalidImage: false,\r\n  height: '125px',\r\n  width: '125px',\r\n};\r\n\r\nexport default Avatar;\r\n","import React, { useState } from 'react';\r\nimport { CircularProgress, makeStyles, Button } from '@material-ui/core';\r\nimport { useNuiRequest } from 'fivem-nui-react-lib';\r\nimport { Repeat } from '@material-ui/icons';\r\nimport { TwitterEvents } from '../../../../../../typings/twitter';\r\n\r\ninterface IProps {\r\n  tweetId: number;\r\n  retweetId: string;\r\n  isRetweet: boolean | number;\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  iconFilled: {\r\n    color: theme.palette.primary.main,\r\n  },\r\n}));\r\n\r\nconst LOADING_TIME = 1250;\r\n\r\nexport const RetweetButton = ({ tweetId, isRetweet, retweetId }: IProps) => {\r\n  const Nui = useNuiRequest();\r\n  const [retweeted, setRetweeted] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const classes = useStyles();\r\n\r\n  const handleClick = () => {\r\n    // don't allow someone to spam retweet\r\n    // note that this is enforced by the server currently, not the UI\r\n    // so if a player refreshes the page they won't see the filled\r\n    // button anymore\r\n    if (retweeted) return;\r\n\r\n    // if someone is retweeting something that is itself a retweet\r\n    // then we want to retweet the original post (if we haven't already)\r\n    const idToRetweet = isRetweet ? retweetId : tweetId;\r\n    Nui.send(TwitterEvents.RETWEET, idToRetweet);\r\n    setLoading(true);\r\n    window.setTimeout(() => {\r\n      setRetweeted(true);\r\n      setLoading(false);\r\n    }, LOADING_TIME);\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <Button disabled>\r\n        <CircularProgress size={22} />\r\n      </Button>\r\n    );\r\n  }\r\n\r\n  const className = retweeted ? classes.iconFilled : '';\r\n\r\n  return (\r\n    <Button onClick={handleClick}>\r\n      <Repeat className={className} />\r\n    </Button>\r\n  );\r\n};\r\n\r\nexport default RetweetButton;\r\n","import React from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Repeat } from '@material-ui/icons';\r\n\r\ninterface IProps {\r\n  profileName: string;\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    color: theme.palette.secondary.main,\r\n    fontSize: '16px',\r\n    justifyContent: 'flex-start',\r\n    width: '100%',\r\n    paddingBottom: '8px',\r\n    marginBottom: '6px',\r\n    marginTop: '-6px',\r\n  },\r\n}));\r\n\r\nfunction Retweet({ profileName }: IProps) {\r\n  const { t } = useTranslation();\r\n  const classes = useStyles();\r\n  return (\r\n    <div className={classes.root}>\r\n      <Repeat /> {profileName} {t('APPS_TWITTER_RETWEETED')}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Retweet;\r\n","import React, { useState } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { Button, CircularProgress, MenuItem } from '@material-ui/core';\r\nimport DoneIcon from '@material-ui/icons/Done';\r\nimport { useNuiRequest } from 'fivem-nui-react-lib';\r\nimport { TwitterEvents } from '../../../../../../typings/twitter';\r\n\r\nconst LOADING_TIME = 1250;\r\n\r\nfunction ReportButton({ handleClose, tweetId, isReported }) {\r\n  const Nui = useNuiRequest();\r\n  const { t } = useTranslation();\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleClick = () => {\r\n    Nui.send(TwitterEvents.REPORT, tweetId);\r\n    setLoading(true);\r\n    window.setTimeout(() => {\r\n      setLoading(false);\r\n      handleClose();\r\n    }, LOADING_TIME);\r\n  };\r\n\r\n  if (isReported) {\r\n    return (\r\n      <MenuItem onClick={handleClose}>\r\n        <DoneIcon />\r\n        <span style={{ marginLeft: '5px' }}>{t('APPS_TWITTER_REPORTED')}</span>\r\n      </MenuItem>\r\n    );\r\n  }\r\n\r\n  if (loading) {\r\n    return (\r\n      <Button disabled>\r\n        <CircularProgress id=\"twitter-report-progress\" size={22} />\r\n      </Button>\r\n    );\r\n  }\r\n\r\n  return <MenuItem onClick={handleClick}>{t('APPS_TWITTER_REPORT')}</MenuItem>;\r\n}\r\n\r\nexport default ReportButton;\r\n","import React, { useState } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { Button, Menu, MenuItem } from '@material-ui/core';\r\nimport MoreIcon from '@material-ui/icons/MoreVert';\r\nimport { usePhone } from '../../../../os/phone/hooks/usePhone';\r\nimport { useNuiRequest } from 'fivem-nui-react-lib';\r\nimport ReportButton from '../buttons/ReportButton';\r\nimport { TwitterEvents } from '../../../../../../typings/twitter';\r\n\r\nexport const ShowMore = ({ id, isReported, isMine }) => {\r\n  const Nui = useNuiRequest();\r\n  const { t } = useTranslation();\r\n  const [anchorEl, setAnchorEl] = useState<Element | null>(null);\r\n  const { ResourceConfig } = usePhone();\r\n\r\n  if (!ResourceConfig) return null;\r\n\r\n  const handleClick = (event: React.MouseEvent) => {\r\n    const element = event.currentTarget;\r\n    setAnchorEl(element);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  const handleDeleteTweet = () => {\r\n    Nui.send(TwitterEvents.DELETE_TWEET, id);\r\n    handleClose();\r\n  };\r\n\r\n  const allowedToDelete = ResourceConfig.twitter.allowDeleteTweets && isMine;\r\n  const allowedToReport = ResourceConfig.twitter.allowReportTweets && !isMine;\r\n\r\n  // if the user cannot perform any actions in show more then don't\r\n  // allow them to interact with it\r\n  let _handleClick = allowedToDelete || allowedToReport ? handleClick : () => null;\r\n\r\n  return (\r\n    <>\r\n      <Button\r\n        aria-controls=\"simple-menu\"\r\n        aria-haspopup=\"true\"\r\n        onClick={_handleClick}\r\n        style={{ marginRight: 15 }}\r\n      >\r\n        <MoreIcon />\r\n      </Button>\r\n      <Menu\r\n        id=\"simple-menu\"\r\n        anchorEl={anchorEl}\r\n        keepMounted\r\n        open={Boolean(anchorEl)}\r\n        onClose={handleClose}\r\n        transformOrigin={{\r\n          vertical: -30,\r\n          horizontal: 'left',\r\n        }}\r\n      >\r\n        {allowedToDelete && (\r\n          <MenuItem onClick={handleDeleteTweet}>{t('APPS_TWITTER_DELETE')}</MenuItem>\r\n        )}\r\n        {allowedToReport && (\r\n          <ReportButton handleClose={handleClose} isReported={isReported} tweetId={id} />\r\n        )}\r\n      </Menu>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ShowMore;\r\n","import React, { memo } from 'react';\r\nimport DOMPurify from 'dompurify';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { ListItemAvatar, Avatar as MuiAvatar, ListItem, Typography } from '@material-ui/core';\r\n\r\nimport { Tweet as ITweet } from '../../../../../../typings/twitter';\r\nimport { secondsToHumanReadable } from '../../utils/time';\r\nimport LikeButton from '../buttons/LikeButton';\r\nimport ReplyButton from '../buttons/ReplyButton';\r\nimport ImageDisplay from '../images/ImageDisplay';\r\nimport Avatar from '../Avatar';\r\nimport { RetweetButton } from '../buttons/RetweetButton';\r\nimport { usePhone } from '../../../../os/phone/hooks/usePhone';\r\nimport Retweet from './Retweet';\r\nimport ShowMore from './ShowMore';\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    overflowX: 'hidden',\r\n    display: 'flex',\r\n    flexFlow: 'column nowrap',\r\n    width: '100%',\r\n    marginTop: '6px',\r\n  },\r\n  container: {\r\n    display: 'flex',\r\n    flexFlow: 'row nowrap',\r\n    alignItems: 'flex-start',\r\n    width: '100%',\r\n  },\r\n  content: {\r\n    display: 'flex',\r\n    marginTop: '-10px', // easier to do this here than override the MUI styles\r\n    flexFlow: 'column nowrap',\r\n    width: '100%',\r\n  },\r\n  primary: {\r\n    display: 'flex',\r\n    flexFlow: 'row nowrap',\r\n    width: '100%',\r\n    alignItems: 'flex-end',\r\n  },\r\n  profile: {\r\n    fontSize: '18px',\r\n    fontWeight: 'bold',\r\n  },\r\n  date: {\r\n    marginLeft: '10px',\r\n    fontSize: '14px',\r\n  },\r\n  message: {\r\n    fontSize: '18px',\r\n    wordBreak: 'break-all',\r\n  },\r\n  buttonContainer: {\r\n    display: 'flex',\r\n    flexFlow: 'row nowrap',\r\n    justifyContent: 'space-between',\r\n    width: '100%',\r\n    marginLeft: '-20px', // easier to do this here than override the MUI styles\r\n    marginTop: '3px',\r\n  },\r\n});\r\n\r\nexport const Tweet = (tweet: ITweet) => {\r\n  const {\r\n    id,\r\n    message,\r\n    images,\r\n    avatar_url,\r\n    profile_name,\r\n    retweetProfileName,\r\n    retweetAvatarUrl,\r\n    retweetId,\r\n    seconds_since_tweet,\r\n    isLiked,\r\n    isMine,\r\n    isReported,\r\n    isRetweet,\r\n  } = tweet;\r\n  const classes = useStyles();\r\n  const { t } = useTranslation();\r\n  const { ResourceConfig } = usePhone();\r\n\r\n  if (!ResourceConfig) return null;\r\n  const { enableAvatars, enableImages } = ResourceConfig.twitter;\r\n\r\n  // this is a workaround to transfer string new lines and returns that\r\n  // are stored into the database into html for the UI to render\r\n\r\n  // We are replacing with <br /> to eventually render in HTML\r\n  const formattedMessage = message.replace(/\\n\\r?/g, '<br />');\r\n\r\n  // Therefore we need to sanitize this message to protect against XSS\r\n  const sanitizedMessage = DOMPurify.sanitize(formattedMessage, {\r\n    // Be as strict as possible, whitelisting <br> tag\r\n    ALLOWED_TAGS: ['br'],\r\n  });\r\n\r\n  const profileName = isRetweet ? retweetProfileName : profile_name;\r\n  const formattedProfileName = profileName ? `@${profileName}` : '';\r\n\r\n  const avatarUrl = isRetweet ? retweetAvatarUrl : avatar_url;\r\n\r\n  return (\r\n    <ListItem className={classes.root} divider>\r\n      {isRetweet && <Retweet profileName={profile_name} />}\r\n      <div className={classes.container}>\r\n        {enableAvatars && (\r\n          <ListItemAvatar>\r\n            <MuiAvatar>\r\n              <Avatar avatarUrl={avatarUrl} height=\"40px\" width=\"40px\" />\r\n            </MuiAvatar>\r\n          </ListItemAvatar>\r\n        )}\r\n        <div className={classes.content}>\r\n          <div className={classes.primary}>\r\n            <div className={classes.profile}>{formattedProfileName}</div>\r\n            <Typography\r\n              className={classes.date}\r\n              component=\"div\"\r\n              variant=\"body2\"\r\n              color=\"textSecondary\"\r\n            >\r\n              {secondsToHumanReadable(t, seconds_since_tweet)}\r\n            </Typography>\r\n          </div>\r\n          <div\r\n            className={classes.message}\r\n            dangerouslySetInnerHTML={{\r\n              __html: sanitizedMessage,\r\n            }}\r\n          />\r\n          {enableImages && <ImageDisplay visible images={images} small />}\r\n          <div className={classes.buttonContainer}>\r\n            <ReplyButton profile_name={profile_name} />\r\n            <LikeButton tweetId={id} isLiked={isLiked} />\r\n            {!isMine && <RetweetButton tweetId={id} retweetId={retweetId} isRetweet={isRetweet} />}\r\n            <ShowMore isMine={isMine} isReported={isReported} id={id} />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </ListItem>\r\n  );\r\n};\r\n\r\nexport default memo(Tweet);\r\n","import React from 'react';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Skeleton from '@material-ui/lab/Skeleton';\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: '100%',\r\n    padding: '15px',\r\n    display: 'flex',\r\n    flexFlow: 'row nowrap',\r\n    marginTop: '3px',\r\n    marginBottom: '3px',\r\n  },\r\n  left: {},\r\n  right: {\r\n    marginLeft: '15px',\r\n    marginTop: '-5px',\r\n  },\r\n});\r\n\r\nexport default function TweetSkeleton() {\r\n  const classes = useStyles();\r\n  return (\r\n    <>\r\n      <div className={classes.root}>\r\n        <div className={classes.left}>\r\n          <Skeleton variant=\"circle\" width={60} height={60} />\r\n        </div>\r\n        <div className={classes.right}>\r\n          <Skeleton variant=\"text\" />\r\n          <Skeleton variant=\"rect\" width={250} height={118} />\r\n        </div>\r\n      </div>\r\n\r\n      <Divider />\r\n    </>\r\n  );\r\n}\r\n","import React from 'react';\r\n\r\nimport { List } from '../../../../ui/components/List';\r\nimport TweetSkeleton from './TweetSkeleton';\r\n\r\nexport function TweetSkeletonList() {\r\n  return (\r\n    <List>\r\n      <TweetSkeleton />\r\n      <TweetSkeleton />\r\n      <TweetSkeleton />\r\n      <TweetSkeleton />\r\n      <TweetSkeleton />\r\n      <TweetSkeleton />\r\n      <TweetSkeleton />\r\n      <TweetSkeleton />\r\n      <TweetSkeleton />\r\n      <TweetSkeleton />\r\n    </List>\r\n  );\r\n}\r\n\r\nexport default TweetSkeletonList;\r\n","import React, { useEffect, useState, memo } from 'react';\r\n\r\nimport { List } from '../../../../ui/components/List';\r\nimport Tweet from './Tweet';\r\nimport TweetSkeletonList from './TweetSkeletonList';\r\n\r\nconst MINIMUM_LOAD_TIME = 500;\r\n\r\nexport function TweetList({ tweets }) {\r\n  const [minimumLoadPassed, setMimimumLoadPassed] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const timeout = window.setTimeout(() => {\r\n      setMimimumLoadPassed(true);\r\n    }, MINIMUM_LOAD_TIME);\r\n    return () => window.clearTimeout(timeout);\r\n  }, []);\r\n\r\n  // we add a minimum (but short) load time here so that\r\n  // there isn't a quick flash of loading and immediately\r\n  // another flash to the tweets screen.\r\n  const hasLoaded = tweets && minimumLoadPassed;\r\n\r\n  if (!hasLoaded) return <TweetSkeletonList />;\r\n  return (\r\n    <List>\r\n      {tweets.map((tweet) => (\r\n        <Tweet key={tweet.id} {...tweet} />\r\n      ))}\r\n    </List>\r\n  );\r\n}\r\n\r\nexport default memo(TweetList); // only re-render if our tweets change\r\n","import React, { useEffect } from 'react';\r\nimport { useNuiRequest } from 'fivem-nui-react-lib';\r\nimport { useTweets } from '../../hooks/useTweets';\r\nimport { useTwitterNotifications } from '../../hooks/useTwitterNotifications';\r\nimport TweetList from './TweetList';\r\nimport { TwitterEvents } from '../../../../../../typings/twitter';\r\n\r\nexport function TweetListContainer() {\r\n  const Nui = useNuiRequest();\r\n  const { tweets } = useTweets();\r\n  const { setUnreadCount } = useTwitterNotifications();\r\n\r\n  useEffect(() => {\r\n    Nui.send(TwitterEvents.FETCH_TWEETS, {});\r\n  }, [Nui]);\r\n\r\n  useEffect(() => {\r\n    if (tweets?.length) {\r\n      setUnreadCount(0);\r\n    }\r\n  }, [setUnreadCount, tweets]);\r\n\r\n  return <TweetList tweets={tweets} />;\r\n}\r\n\r\nexport default TweetListContainer;\r\n","import { useRecoilValue } from 'recoil';\r\nimport { twitterState } from './state';\r\n\r\nexport const useTweets = () => {\r\n  const tweets = useRecoilValue(twitterState.tweets);\r\n  return { tweets };\r\n};\r\n","// this is a hack. We are saving images in the database as\r\n// delimiter separated URLS, but most common delimiters (comma, pipe\r\n// hash, etc.) are often found in URLS (even though it's not technically\r\n// within specification). To get around this we have our own delimiter\r\n// here we'll use to join and split these strings\r\nexport const IMAGE_DELIMITER = '||!||';\r\n","import { useRecoilState } from 'recoil';\r\nimport { twitterState } from './state';\r\n\r\nexport const useModal = () => {\r\n  const [modalVisible, setModalVisible] = useRecoilState(twitterState.showCreateTweetModal);\r\n  const [message, setMessage] = useRecoilState(twitterState.modalMessage);\r\n  return { modalVisible, setModalVisible, message, setMessage };\r\n};\r\n","import React, { memo } from 'react';\r\nimport { Picker } from 'emoji-mart';\r\nimport { useTheme } from '@material-ui/core';\r\n\r\nexport const EmojiSelect = ({ visible, onEmojiClick }) => {\r\n  const theme = useTheme();\r\n\r\n  if (!visible) return null;\r\n\r\n  return (\r\n    <Picker onClick={onEmojiClick} set=\"google\" theme={theme.palette.type} showPreview={false} />\r\n  );\r\n};\r\n\r\nexport default memo(EmojiSelect); // The picker is an expensive render\r\n","import React, { memo, useCallback, useEffect, useRef } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { TextField } from '../../../../ui/components/Input';\r\n\r\nconst useStyles = makeStyles({\r\n  textField: {\r\n    flex: '1 1 100%',\r\n    padding: '10px 15px',\r\n    marginTop: '15px',\r\n  },\r\n  textFieldInput: {\r\n    fontSize: '22px',\r\n  },\r\n});\r\n\r\nexport const ImagePrompt = ({ visible, value, handleChange }) => {\r\n  const textFieldRef = useRef(null);\r\n  const { t } = useTranslation();\r\n  const classes = useStyles();\r\n\r\n  useEffect(() => {\r\n    textFieldRef.current && textFieldRef.current.focus();\r\n  }, [visible]);\r\n\r\n  const handleImageChange = useCallback((e) => handleChange(e.target.value), [handleChange]);\r\n\r\n  if (!visible) return null;\r\n  return (\r\n    <TextField\r\n      value={value}\r\n      inputProps={{ className: classes.textFieldInput }}\r\n      className={classes.textField}\r\n      onChange={handleImageChange}\r\n      multiline\r\n      size=\"small\"\r\n      placeholder={t('APPS_TWITTER_IMAGE_PLACEHOLDER')}\r\n      inputRef={textFieldRef}\r\n    />\r\n  );\r\n};\r\n\r\nexport default memo(ImagePrompt);\r\n","export function getNewLineCount(message: string): number {\r\n  return message.split(/\\r\\n|\\r|\\n/).length;\r\n}\r\n","import React, { memo, useEffect, useCallback, useRef } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { usePhone } from '../../../../os/phone/hooks/usePhone';\r\nimport { getNewLineCount } from '../../utils/message';\r\nimport { TextField } from '../../../../ui/components/Input';\r\n\r\nconst useStyles = makeStyles({\r\n  textField: {\r\n    flex: '1 1 100%',\r\n    padding: '10px 15px',\r\n    marginTop: '15px',\r\n    overflowY: 'auto',\r\n    maxHeight: '300px',\r\n  },\r\n  textFieldInput: {\r\n    fontSize: '22px',\r\n    paddingTop: '8px',\r\n  },\r\n});\r\n\r\nexport const TweetMessage = ({ modalVisible, message, handleChange }) => {\r\n  const textFieldInputRef = useRef(null);\r\n  const classes = useStyles();\r\n  const { ResourceConfig } = usePhone();\r\n  const { t } = useTranslation();\r\n\r\n  const { characterLimit, newLineLimit } = ResourceConfig.twitter;\r\n\r\n  useEffect(() => {\r\n    textFieldInputRef.current && textFieldInputRef.current.focus();\r\n    // we pass in modalVisible to this component so that we can\r\n    // intelligently decide when to focus the input field.\r\n  }, [modalVisible]);\r\n\r\n  const _handleChange = useCallback(\r\n    (e) => {\r\n      // when the user types scroll the text field to the bottom\r\n      // so that we always have the latest line and error message\r\n      // in view\r\n      e.preventDefault();\r\n      textFieldInputRef.current.scrollTop = textFieldInputRef.current.scrollHeight;\r\n      handleChange(e.target.value);\r\n    },\r\n    [handleChange],\r\n  );\r\n\r\n  if (!ResourceConfig) return null;\r\n\r\n  let errorMessage = null;\r\n\r\n  const overCharacterLimit = message.trim().length > characterLimit;\r\n  const characterWarningPrompt = `${t(\r\n    'APPS_TWITTER_TWEET_MESSAGE_CHAR_LIMIT',\r\n  )} (${characterLimit})`;\r\n\r\n  const overNewLineLimit = getNewLineCount(message) > newLineLimit;\r\n  const newLineWarningPrompt = `${t(\r\n    'APPS_TWITTER_TWEET_MESSAGE_NEW_LINE_LIMIT',\r\n  )} (${newLineLimit})`;\r\n\r\n  if (overCharacterLimit) {\r\n    errorMessage = characterWarningPrompt;\r\n  } else if (overNewLineLimit) {\r\n    errorMessage = newLineWarningPrompt;\r\n  }\r\n\r\n  return (\r\n    <TextField\r\n      value={message}\r\n      inputProps={{ className: classes.textFieldInput }}\r\n      className={classes.textField}\r\n      onChange={_handleChange}\r\n      multiline\r\n      placeholder={t('APPS_TWITTER_TWEET_MESSAGE_PLACEHOLDER')}\r\n      inputRef={textFieldInputRef}\r\n      error={errorMessage !== null}\r\n      helperText={errorMessage || null}\r\n      // ref={textFieldRef}\r\n    />\r\n  );\r\n};\r\n\r\nexport default memo(TweetMessage);\r\n","import { Button, ButtonProps, fade, makeStyles } from '@material-ui/core';\r\nimport React from 'react';\r\n\r\ntype StatusButtonStyleColor = 'success' | 'error' | 'warning' | 'info';\r\n\r\ninterface IStatusButtonStyleProps {\r\n  color: StatusButtonStyleColor;\r\n}\r\n\r\nconst useStyles = makeStyles(\r\n  (theme) => ({\r\n    root: {\r\n      color: ({ color }: IStatusButtonStyleProps) => theme.palette[color].main,\r\n      '&:hover': {\r\n        backgroundColor: ({ color }: IStatusButtonStyleProps) =>\r\n          fade(theme.palette[color].light, theme.palette.action.hoverOpacity),\r\n      },\r\n    },\r\n    outlined: {\r\n      border: ({ color }: IStatusButtonStyleProps) =>\r\n        `1px solid ${fade(theme.palette[color].main, 0.5)}`,\r\n      '&:hover': {\r\n        border: ({ color }: IStatusButtonStyleProps) => `1px solid ${theme.palette[color].main}`,\r\n      },\r\n      '&$disabled': {\r\n        border: `1px solid ${theme.palette.action.disabled}`,\r\n      },\r\n    },\r\n    contained: {\r\n      color: ({ color }: IStatusButtonStyleProps) => theme.palette[color].contrastText,\r\n      backgroundColor: ({ color }: IStatusButtonStyleProps) => theme.palette[color].main,\r\n      '&:hover': {\r\n        backgroundColor: ({ color }: IStatusButtonStyleProps) => theme.palette[color].dark,\r\n      },\r\n    },\r\n  }),\r\n  { name: 'MuiButton' },\r\n);\r\n\r\nexport const StatusButton = ({\r\n  color = 'info',\r\n  variant,\r\n  className,\r\n  ...props\r\n}: Omit<ButtonProps, 'color'> & { color: StatusButtonStyleColor }) => {\r\n  const classes = useStyles({ color });\r\n  return (\r\n    <Button\r\n      variant={variant}\r\n      className={`${classes.root} ${classes[variant] || ''} ${className}`}\r\n      {...props}\r\n    />\r\n  );\r\n};\r\n","import React from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Button } from '@material-ui/core';\r\nimport { StatusButton } from '../../../../ui/components/StatusButton';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  buttons: {\r\n    display: 'flex',\r\n    flexFlow: 'row nowrap',\r\n    justifyContent: 'flex-end',\r\n    alignItems: 'justify-content',\r\n    marginRight: '15px',\r\n  },\r\n  close: {\r\n    marginLeft: '8px',\r\n  },\r\n}));\r\n\r\nexport const ControlButtons = ({ showImagePrompt, showEmoji, onCloseClick, onPrimaryClick }) => {\r\n  const classes = useStyles();\r\n  const { t } = useTranslation();\r\n\r\n  const imagePromptVisible = showImagePrompt && !showEmoji;\r\n  const primaryButtonText = imagePromptVisible\r\n    ? t('APPS_TWITTER_SUBMIT_IMAGE')\r\n    : t('APPS_TWITTER_TWEET');\r\n  const showCloseButton = showImagePrompt || showEmoji;\r\n\r\n  return (\r\n    <div className={classes.buttons}>\r\n      <Button variant=\"contained\" color=\"primary\" onClick={onPrimaryClick}>\r\n        {primaryButtonText}\r\n      </Button>\r\n      {showCloseButton && (\r\n        <StatusButton\r\n          className={classes.close}\r\n          variant=\"contained\"\r\n          color=\"error\"\r\n          onClick={onCloseClick}\r\n        >\r\n          {t('APPS_TWITTER_CLOSE_IMAGE')}\r\n        </StatusButton>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ControlButtons;\r\n","import React, { memo } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Button } from '@material-ui/core';\r\nimport InsertPhotoIcon from '@material-ui/icons/InsertPhoto';\r\nimport EmojiIcon from '@material-ui/icons/SentimentSatisfied';\r\nimport { usePhone } from '../../../../os/phone/hooks/usePhone';\r\n\r\nconst useStyles = makeStyles({\r\n  buttons: {\r\n    display: 'flex',\r\n    flexFlow: 'row nowrap',\r\n    justifyContent: 'flex-start',\r\n    paddingLeft: '5px', // re-align left buttons after overriding material-ui spacing\r\n  },\r\n  button: {\r\n    background: 'transparent',\r\n    minWidth: '45px', // override default material-ui spacing between buttons\r\n  },\r\n});\r\n\r\nexport const IconButtons = ({ onImageClick, onEmojiClick }) => {\r\n  const classes = useStyles();\r\n  const { ResourceConfig } = usePhone();\r\n\r\n  if (!ResourceConfig) return null;\r\n  const { enableImages, enableEmojis } = ResourceConfig.twitter;\r\n\r\n  return (\r\n    <div className={classes.buttons}>\r\n      {enableImages && (\r\n        <Button className={classes.button} onClick={onImageClick}>\r\n          <InsertPhotoIcon color=\"action\" />\r\n        </Button>\r\n      )}\r\n      {enableEmojis && (\r\n        <Button className={classes.button} onClick={onEmojiClick}>\r\n          <EmojiIcon color=\"action\" />\r\n        </Button>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default memo(IconButtons);\r\n","import React, { useCallback, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { v4 as uuidv4 } from 'uuid';\r\nimport { useNuiRequest } from 'fivem-nui-react-lib';\r\nimport Modal from '../../../ui/components/Modal';\r\nimport { IMAGE_DELIMITER } from '../utils/images';\r\nimport { isImageValid } from '../../../common/utils/isImageValid';\r\nimport { useModal } from '../hooks/useModal';\r\nimport EmojiSelect from './EmojiSelect';\r\nimport ImageDisplay from './images/ImageDisplay';\r\nimport ImagePrompt from './images/ImagePrompt';\r\nimport TweetMessage from './tweet/TweetMessage';\r\nimport ControlButtons from './buttons/ControlButtons';\r\nimport IconButtons from './buttons/IconButtons';\r\nimport { usePhone } from '../../../os/phone/hooks/usePhone';\r\nimport { getNewLineCount } from '../utils/message';\r\nimport { NewTweet, TwitterEvents } from '../../../../../typings/twitter';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    zIndex: 10,\r\n    marginTop: '15px',\r\n    width: '90%',\r\n    display: 'flex',\r\n    flexFlow: 'column nowrap',\r\n    position: 'absolute',\r\n    top: '80px',\r\n  },\r\n  button: {\r\n    margin: 5,\r\n    marginTop: 20,\r\n  },\r\n  buttonsContainer: {\r\n    paddingBottom: '8px',\r\n    display: 'flex',\r\n    flexFlow: 'row nowrap',\r\n    justifyContent: 'space-between',\r\n    flex: '1 0 45px',\r\n  },\r\n  emojiPicker: {\r\n    background: 'none',\r\n    border: 'none',\r\n    boxShadow: 'none',\r\n  },\r\n}));\r\n\r\ninterface Image {\r\n  id: string;\r\n  link: string;\r\n}\r\n\r\nexport const AddTweetModal = () => {\r\n  const Nui = useNuiRequest();\r\n  const classes = useStyles();\r\n  const { message, setMessage, modalVisible, setModalVisible } = useModal();\r\n  const { ResourceConfig } = usePhone();\r\n\r\n  const [showEmoji, setShowEmoji] = useState(false);\r\n  const [showImagePrompt, setShowImagePrompt] = useState(false);\r\n  const [link, setLink] = useState('');\r\n\r\n  const [images, setImages] = useState<Image[]>([]);\r\n  const { characterLimit, newLineLimit } = ResourceConfig.twitter;\r\n\r\n  const reset = () => {\r\n    setShowImagePrompt(false);\r\n    setShowEmoji(false);\r\n\r\n    setLink('');\r\n    setImages([]);\r\n    setMessage('');\r\n  };\r\n\r\n  const _handleClose = () => {\r\n    reset();\r\n    setModalVisible(false);\r\n  };\r\n\r\n  const handleimageChange = useCallback((link) => setLink(link), []);\r\n\r\n  const handleMessageChange = useCallback((message) => setMessage(message), [setMessage]);\r\n\r\n  if (!ResourceConfig) return null;\r\n\r\n  const isValidMessage = (message) => {\r\n    if (message.length > characterLimit) return false;\r\n    if (getNewLineCount(message) < newLineLimit) return true;\r\n  };\r\n\r\n  const submitTweet = () => {\r\n    const cleanedMessage = message.trim();\r\n    if (cleanedMessage.length === 0) return;\r\n    if (!isValidMessage(cleanedMessage)) return;\r\n\r\n    const data: NewTweet = {\r\n      message,\r\n      images:\r\n        images && images.length > 0 ? images.map((image) => image.link).join(IMAGE_DELIMITER) : '',\r\n    };\r\n    Nui.send(TwitterEvents.CREATE_TWEET, data);\r\n    _handleClose();\r\n  };\r\n\r\n  const addImage = () => {\r\n    // strip any whitespace from the link in case the user\r\n    // added some spaces/returns accidentally\r\n    const cleanedLink = link.replace('/ /g', '');\r\n    // because we're only storing strings in the database we need\r\n    // to give this an arbirtrary (but unique) id so that we can\r\n    // correctly filter an array of images when the user wants to\r\n    // delete them. This handles an edge case where the user adds\r\n    // two of the same image.\r\n    const image = { id: uuidv4(), link: cleanedLink };\r\n    // it's worth noting that we only perform this validation on\r\n    // the client of the user who is submitting the image. When\r\n    // other users see this image on their TweetList it will be\r\n    // from the database and should already have passed through\r\n    // this logic\r\n    isImageValid(cleanedLink)\r\n      .then(() => setImages([...images, image]))\r\n      .catch((e) => console.error(e));\r\n\r\n    setShowImagePrompt(false);\r\n    setLink('');\r\n  };\r\n  const removeImage = (id) => setImages(images.filter((image) => id !== image.id));\r\n\r\n  const toggleShowImagePrompt = () => {\r\n    setShowEmoji(false); // clear the emoji so we can switch between emoji/images\r\n    setShowImagePrompt(!showImagePrompt);\r\n  };\r\n  const toggleShowEmoji = () => {\r\n    // clear the images so we can seemlessly toggle between emoji/images\r\n    setShowImagePrompt(false);\r\n    setShowEmoji(!showEmoji);\r\n  };\r\n\r\n  // this is when a user clicks on an emoji icon itself (i.e. a smiley face)\r\n  // not the emoji icon on the UI\r\n  const handleSelectEmoji = (emojiObject, e) => {\r\n    setMessage(message.concat(emojiObject.native));\r\n  };\r\n\r\n  if (!ResourceConfig) return null;\r\n\r\n  return (\r\n    <Modal visible={modalVisible} handleClose={_handleClose}>\r\n      <TweetMessage\r\n        modalVisible={modalVisible}\r\n        message={message}\r\n        handleChange={handleMessageChange}\r\n      />\r\n      <ImagePrompt visible={showImagePrompt} value={link} handleChange={handleimageChange} />\r\n      <EmojiSelect visible={showEmoji} onEmojiClick={handleSelectEmoji} />\r\n      <ImageDisplay\r\n        visible={!showEmoji && images.length > 0}\r\n        images={images}\r\n        removeImage={removeImage}\r\n      />\r\n      <div className={classes.buttonsContainer}>\r\n        <IconButtons\r\n          onImageClick={\r\n            images.length < ResourceConfig.twitter.maxImages ? toggleShowImagePrompt : null\r\n          }\r\n          onEmojiClick={toggleShowEmoji}\r\n        />\r\n        <ControlButtons\r\n          showImagePrompt={showImagePrompt}\r\n          showEmoji={showEmoji}\r\n          onPrimaryClick={showImagePrompt ? addImage : submitTweet}\r\n          onCloseClick={showEmoji ? toggleShowEmoji : toggleShowImagePrompt}\r\n        />\r\n      </div>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default AddTweetModal;\r\n","/**\r\n * Returns a Promise that validates that the URL successfully\r\n * loads in the browser. If the URL doesn't load the promise is\r\n * rejected.\r\n * @param {string} link - a URL we are trying to validate\r\n * @returns {Promise<string>} link - Will resolve the promise with the link string\r\n * if valid. Will reject if failed.\r\n */\r\nexport function isImageValid(link: string): Promise<string> {\r\n  return new Promise((res, rej) => {\r\n    const image = new Image();\r\n    image.src = link;\r\n    image.onerror = () => rej(`Invalid image, ${link}`);\r\n    image.onload = () => res(link);\r\n  });\r\n}\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Fab } from '@material-ui/core';\r\nimport CreateIcon from '@material-ui/icons/Create';\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  root: {\r\n    position: 'absolute',\r\n    bottom: '75px',\r\n    right: '10px',\r\n  },\r\n  button: {\r\n    background: '#00acee',\r\n  },\r\n}));\r\n\r\nexport function TweetButton({ openModal }) {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Fab className={classes.button} color=\"primary\" onClick={openModal}>\r\n        <CreateIcon />\r\n      </Fab>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default TweetButton;\r\n","import React from 'react';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport { makeStyles } from '@material-ui/core';\r\nimport TwitterIcon from '@material-ui/icons/Twitter';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    height: '60px',\r\n    width: '100%',\r\n    display: 'flex',\r\n    flexFlow: 'row nowrap',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    background: '#424242',\r\n  },\r\n  icon: {\r\n    color: '#00acee',\r\n    fontSize: 30,\r\n  },\r\n}));\r\n\r\nexport function TwitterTitle() {\r\n  const classes = useStyles();\r\n  return (\r\n    <Paper elevation={24} variant=\"outlined\" square className={classes.root}>\r\n      <TwitterIcon className={classes.icon} />\r\n    </Paper>\r\n  );\r\n}\r\n\r\nexport default TwitterTitle;\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { BottomNavigation, BottomNavigationAction } from '@material-ui/core';\r\nimport HomeIcon from '@material-ui/icons/Home';\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport ProfileIcon from '@material-ui/icons/Person';\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: '100%',\r\n  },\r\n});\r\n\r\nexport function TwitterBottomNavigation({ activePage, handleChange }) {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <BottomNavigation value={activePage} onChange={handleChange} className={classes.root}>\r\n      <BottomNavigationAction component={Link} to=\"/twitter\" icon={<HomeIcon />} />\r\n      <BottomNavigationAction component={Link} to=\"/twitter/search\" icon={<SearchIcon />} />\r\n      <BottomNavigationAction component={Link} to=\"/twitter/profile\" icon={<ProfileIcon />} />\r\n    </BottomNavigation>\r\n  );\r\n}\r\n\r\nexport default TwitterBottomNavigation;\r\n","import { useRecoilValue, useRecoilState } from 'recoil';\r\nimport { twitterState } from './state';\r\n\r\ninterface IProfile {\r\n  profile_name?: string;\r\n  bio?: string;\r\n  job?: string;\r\n  location?: string;\r\n  avatar_url?: string;\r\n}\r\n\r\ninterface IUseProfile {\r\n  profile: IProfile;\r\n  updateProfileLoading: any;\r\n  updateProfileSuccessful: any;\r\n  setUpdateProfileSuccessful: any;\r\n}\r\n\r\nexport const useProfile = (): IUseProfile => {\r\n  const profile = useRecoilValue(twitterState.profile);\r\n  const updateProfileLoading = useRecoilValue(twitterState.updateProfileLoading);\r\n  const [updateProfileSuccessful, setUpdateProfileSuccessful] = useRecoilState(\r\n    twitterState.updateProfileSuccess,\r\n  );\r\n  return {\r\n    profile,\r\n    updateProfileLoading,\r\n    updateProfileSuccessful,\r\n    setUpdateProfileSuccessful,\r\n  };\r\n};\r\n","import React from 'react';\r\n\r\nimport UpdateButton from '../../../../ui/components/UpdateButton';\r\nimport { useProfile } from '../../hooks/useProfile';\r\n\r\ninterface IProps {\r\n  handleClick: () => void;\r\n}\r\n\r\nexport function ProfileUpdateButton({ handleClick }: IProps) {\r\n  const { updateProfileLoading } = useProfile();\r\n\r\n  return <UpdateButton loading={updateProfileLoading} handleClick={handleClick} />;\r\n}\r\n\r\nexport default ProfileUpdateButton;\r\n","import React, { useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { useNuiRequest } from 'fivem-nui-react-lib';\r\nimport { useProfile } from '../../hooks/useProfile';\r\nimport Avatar from '../Avatar';\r\nimport ProfileUpdateButton from '../buttons/ProfileUpdateButton';\r\nimport { usePhone } from '../../../../os/phone/hooks/usePhone';\r\nimport { TwitterEvents } from '../../../../../../typings/twitter';\r\nimport ProfileField from '../../../../ui/components/ProfileField';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    position: 'relative',\r\n    width: '100%',\r\n    height: '100%',\r\n    padding: '15px',\r\n  },\r\n  spacer: {\r\n    height: '8px',\r\n  },\r\n}));\r\n\r\nexport function Profile() {\r\n  const Nui = useNuiRequest();\r\n  const classes = useStyles();\r\n  const { t } = useTranslation();\r\n  const { profile } = useProfile();\r\n  const { ResourceConfig } = usePhone();\r\n\r\n  // note that this assumes we are defensively checking\r\n  // that profile is not null in a parent above this component.\r\n  // Annoyingling adding conditionals above this line to not render\r\n  // when profile === null results in a react error that different\r\n  // amounts of hooks are rendering\r\n  const [avatarUrl, handleAvatarChange] = useState(profile.avatar_url || '');\r\n  const [name, handleNameChange] = useState(profile.profile_name || '');\r\n  const [bio, handleBioChange] = useState(profile.bio || '');\r\n  const [location, handleLocationChange] = useState(profile.location || '');\r\n  const [job, handleJobChange] = useState(profile.job || '');\r\n\r\n  const handleUpdate = () => {\r\n    const data = {\r\n      avatar_url: avatarUrl,\r\n      profile_name: name,\r\n      bio,\r\n      location,\r\n      job,\r\n    };\r\n    Nui.send(TwitterEvents.UPDATE_PROFILE, data);\r\n  };\r\n\r\n  // fetching the config is an asynchronous call so defend against it\r\n  if (!ResourceConfig) return null;\r\n\r\n  const { enableAvatars, allowEditableProfileName } = ResourceConfig.twitter;\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      {enableAvatars && <Avatar avatarUrl={avatarUrl} showInvalidImage />}\r\n      <div className={classes.spacer} />\r\n      <ProfileField\r\n        label={t('APPS_TWITTER_EDIT_PROFILE_AVATAR')}\r\n        value={avatarUrl}\r\n        handleChange={handleAvatarChange}\r\n        allowChange={enableAvatars}\r\n      />\r\n      <ProfileField\r\n        label={t('APPS_TWITTER_EDIT_PROFILE_NAME')}\r\n        value={name}\r\n        handleChange={handleNameChange}\r\n        allowChange={allowEditableProfileName}\r\n      />\r\n      <ProfileField\r\n        label={t('APPS_TWITTER_EDIT_PROFILE_BIO')}\r\n        value={bio}\r\n        handleChange={handleBioChange}\r\n        multiline\r\n      />\r\n      <ProfileField\r\n        label={t('APPS_TWITTER_EDIT_PROFILE_LOCATION')}\r\n        value={location}\r\n        handleChange={handleLocationChange}\r\n      />\r\n      <ProfileField\r\n        label={t('APPS_TWITTER_EDIT_PROFILE_JOB')}\r\n        value={job}\r\n        handleChange={handleJobChange}\r\n      />\r\n      <ProfileUpdateButton handleClick={handleUpdate} />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Profile;\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Fab } from '@material-ui/core';\r\nimport SearchIcon from '@material-ui/icons/Search';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    position: 'absolute',\r\n    bottom: '15px',\r\n    right: '15px',\r\n  },\r\n}));\r\n\r\nexport function ProfileUpdateButton({ handleClick }) {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Fab color=\"primary\" onClick={handleClick}>\r\n        <SearchIcon />\r\n      </Fab>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ProfileUpdateButton;\r\n","import React, { useState } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport TweetList from './tweet/TweetList';\r\nimport { useNuiRequest } from 'fivem-nui-react-lib';\r\nimport SearchButton from './buttons/SearchButton';\r\nimport { useFilteredTweets } from '../hooks/useFilteredTweets';\r\nimport { TwitterEvents } from '../../../../../typings/twitter';\r\nimport { TextField } from '../../../ui/components/Input';\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: '100%',\r\n  },\r\n  searchContainer: {\r\n    padding: '15px',\r\n  },\r\n  search: {\r\n    width: '100%',\r\n  },\r\n});\r\n\r\nfunction TwitterSearch() {\r\n  const Nui = useNuiRequest();\r\n  const classes = useStyles();\r\n  const { t } = useTranslation();\r\n  const [searchValue, setSearchValue] = useState('');\r\n  const { tweets } = useFilteredTweets();\r\n\r\n  const handleChange = (e) => setSearchValue(e.target.value);\r\n\r\n  const handleSubmit = () => {\r\n    const cleanedSearchValue = searchValue.trim();\r\n    if (!cleanedSearchValue) return;\r\n\r\n    Nui.send(TwitterEvents.FETCH_TWEETS_FILTERED, cleanedSearchValue);\r\n  };\r\n\r\n  const filteredTweets = tweets || [];\r\n\r\n  return (\r\n    <>\r\n      <div className={classes.root}>\r\n        <div className={classes.searchContainer}>\r\n          <TextField\r\n            className={classes.search}\r\n            placeholder={t('APPS_TWITTER_SEARCH_TWEETS_PLACEHOLDER')}\r\n            label={t('APPS_TWITTER_SEARCH_TWEETS')}\r\n            value={searchValue}\r\n            onChange={handleChange}\r\n            size=\"medium\"\r\n            inputRef={(input) => input && input.focus()}\r\n          />\r\n        </div>\r\n        {filteredTweets.length > 0 && <TweetList tweets={tweets} />}\r\n      </div>\r\n      <SearchButton handleClick={handleSubmit} />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default TwitterSearch;\r\n","import { useRecoilState } from 'recoil';\r\nimport { twitterState } from './state';\r\n\r\nexport const useFilteredTweets = () => {\r\n  const [tweets, setTweets] = useRecoilState(twitterState.filteredTweets);\r\n  return { tweets, setTweets };\r\n};\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Select from '@material-ui/core/Select';\r\nimport { useTranslation } from 'react-i18next';\r\n\r\nimport ProfileUpdateButton from '../buttons/ProfileUpdateButton';\r\n\r\ninterface IProps {\r\n  handleUpdate: () => void;\r\n  profileName: string;\r\n  setProfileName: (name: string) => void;\r\n  defaultProfileNames: string[];\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    position: 'relative',\r\n    width: '100%',\r\n    height: '100%',\r\n    padding: '15px',\r\n  },\r\n  formControl: {\r\n    width: '100%',\r\n  },\r\n}));\r\n\r\nexport function DefaultProfilePrompt({\r\n  profileName,\r\n  setProfileName,\r\n  handleUpdate,\r\n  defaultProfileNames,\r\n}: IProps): JSX.Element {\r\n  const classes = useStyles();\r\n  const { t } = useTranslation();\r\n\r\n  const handleChange = (event: React.ChangeEvent<any>): void => {\r\n    event.preventDefault();\r\n    setProfileName(event.target.value);\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <FormControl className={classes.formControl}>\r\n        <InputLabel htmlFor=\"profile-name\">\r\n          {t('APPS_TWITTER_EDIT_DEFAULT_PROFILE_NAME')}\r\n        </InputLabel>\r\n        <Select\r\n          value={profileName}\r\n          onChange={handleChange}\r\n          inputProps={{\r\n            name: 'profileName',\r\n            id: 'profile-name',\r\n          }}\r\n        >\r\n          <option value=\"\" />\r\n          {defaultProfileNames.map((name) => (\r\n            <option key={name} value={name}>\r\n              {name}\r\n            </option>\r\n          ))}\r\n        </Select>\r\n      </FormControl>\r\n      <ProfileUpdateButton handleClick={handleUpdate} />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default DefaultProfilePrompt;\r\n","import React, { useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { useNuiRequest } from 'fivem-nui-react-lib';\r\nimport ProfileField from '../../../../ui/components/ProfileField';\r\nimport { useProfile } from '../../hooks/useProfile';\r\nimport ProfileUpdateButton from '../buttons/ProfileUpdateButton';\r\nimport { useRecoilValue } from 'recoil';\r\nimport { twitterState } from '../../hooks/state';\r\nimport { usePhone } from '../../../../os/phone/hooks/usePhone';\r\nimport { TwitterEvents } from '../../../../../../typings/twitter';\r\nimport DefaultProfilePrompt from './DefaultProfilePrompt';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    position: 'relative',\r\n    width: '100%',\r\n    height: '100%',\r\n    padding: '15px',\r\n  },\r\n  spacer: {\r\n    height: '8px',\r\n  },\r\n}));\r\n\r\nexport function ProfilePrompt() {\r\n  const Nui = useNuiRequest();\r\n  const classes = useStyles();\r\n  const { t } = useTranslation();\r\n  const { profile } = useProfile();\r\n  const defaultProfileNames = useRecoilValue(twitterState.defaultProfileNames);\r\n  const [profileName, setProfileName] = useState(profile?.profile_name || '');\r\n  const { ResourceConfig } = usePhone();\r\n\r\n  const showDefaultProfileNames = !ResourceConfig.twitter.allowEditableProfileName && !profile;\r\n  const eventName = showDefaultProfileNames\r\n    ? TwitterEvents.CREATE_PROFILE\r\n    : TwitterEvents.UPDATE_PROFILE;\r\n\r\n  const handleUpdate = () => {\r\n    Nui.send(eventName, {\r\n      ...profile,\r\n      profile_name: profileName,\r\n    });\r\n  };\r\n\r\n  // case where profile doesn't exist, couldn't be created automatically\r\n  // and the player is not allowed to edit their own profile name\r\n  if (showDefaultProfileNames) {\r\n    return (\r\n      <DefaultProfilePrompt\r\n        profileName={profileName}\r\n        defaultProfileNames={defaultProfileNames}\r\n        setProfileName={setProfileName}\r\n        handleUpdate={handleUpdate}\r\n      />\r\n    );\r\n  }\r\n\r\n  // case where profile doesn't exist, couldn't be created automatically\r\n  // but the player IS allowed to edit their own profile name\r\n  return (\r\n    <div className={classes.root}>\r\n      <ProfileField\r\n        label={t('APPS_TWITTER_EDIT_PROFILE_NAME')}\r\n        value={profileName}\r\n        handleChange={setProfileName}\r\n        allowChange\r\n      />\r\n      <ProfileUpdateButton handleClick={handleUpdate} />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ProfilePrompt;\r\n","import { common } from '@material-ui/core/colors';\r\n\r\nexport const TWITTER_APP_PRIMARY_COLOR = '#00acee';\r\nexport const TWITTER_APP_TEXT_COLOR = common.white;\r\n\r\nconst theme = {\r\n  palette: {\r\n    primary: {\r\n      main: TWITTER_APP_PRIMARY_COLOR,\r\n      dark: '#0488ba',\r\n      light: '#3dbbeb',\r\n      contrastText: TWITTER_APP_TEXT_COLOR,\r\n    },\r\n    secondary: {\r\n      main: '#999',\r\n    },\r\n  },\r\n};\r\n\r\nexport default theme;\r\n","import { createAppThemeProvider } from '../../../os/apps/utils/createAppThemeProvider';\r\n\r\nimport twitterTheme from '../twitter.theme';\r\n\r\nexport const TwitterThemeProvider = createAppThemeProvider(twitterTheme);\r\n","import React, { useState } from 'react';\r\nimport { Switch, Route } from 'react-router-dom';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nimport { AppWrapper } from '../../../ui/components';\r\nimport { AppContent } from '../../../ui/components/AppContent';\r\nimport TweetListContainer from './tweet/TweetListContainer';\r\nimport AddTweetModal from './AddTweetModal';\r\nimport { useModal } from '../hooks/useModal';\r\nimport TweetButton from './buttons/TweetButton';\r\nimport TwitterTitle from './TwitterTitle';\r\nimport BottomNavigation from './BottomNavigation';\r\nimport TwitterProfile from './profile/Profile';\r\nimport TwitterSearch from './TwitterSearch';\r\n\r\nimport './twitter.css';\r\nimport 'emoji-mart/css/emoji-mart.css';\r\nimport { useProfile } from '../hooks/useProfile';\r\nimport ProfilePrompt from './profile/ProfilePrompt';\r\nimport InjectDebugData from '../../../os/debug/InjectDebugData';\r\nimport { TwitterThemeProvider } from '../providers/TwitterThemeProvider';\r\nimport { TwitterEvents } from '../../../../../typings/twitter';\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  backgroundModal: {\r\n    background: 'black',\r\n    opacity: '0.6',\r\n    position: 'absolute',\r\n    top: 0,\r\n    left: 0,\r\n    right: 0,\r\n    bottom: 0,\r\n    zIndex: 5,\r\n  },\r\n}));\r\n\r\nexport const TwitterApp = () => {\r\n  const classes = useStyles();\r\n  const { modalVisible, setModalVisible } = useModal();\r\n  const [activePage, setActivePage] = useState(0);\r\n  const { profile } = useProfile();\r\n\r\n  // before any other action can be taken by the user we force\r\n  // them have a profile name.\r\n  const promptProfileName = !profile || !profile.profile_name || !profile.profile_name.trim();\r\n\r\n  const openModal = () => setModalVisible(true);\r\n  const handlePageChange = (e, page) => setActivePage(page);\r\n  const showTweetButton = !promptProfileName && activePage === 0;\r\n\r\n  return (\r\n    <TwitterThemeProvider>\r\n      <AppWrapper id=\"twitter-app\">\r\n        <AddTweetModal />\r\n        <div className={modalVisible ? classes.backgroundModal : undefined} />\r\n        <TwitterTitle />\r\n        <AppContent>\r\n          {promptProfileName ? (\r\n            <ProfilePrompt />\r\n          ) : (\r\n            <Switch>\r\n              <Route path=\"/twitter\" exact component={TweetListContainer} />\r\n              <Route path=\"/twitter/search\" component={TwitterSearch} />\r\n              <Route path=\"/twitter/profile\" component={TwitterProfile} />\r\n            </Switch>\r\n          )}\r\n        </AppContent>\r\n        {showTweetButton && <TweetButton openModal={openModal} />}\r\n        {!promptProfileName && (\r\n          <BottomNavigation activePage={activePage} handleChange={handlePageChange} />\r\n        )}\r\n      </AppWrapper>\r\n    </TwitterThemeProvider>\r\n  );\r\n};\r\n\r\nInjectDebugData([\r\n  {\r\n    app: 'TWITTER',\r\n    method: TwitterEvents.GET_OR_CREATE_PROFILE,\r\n    data: {\r\n      profile_name: 'Angular_Dev',\r\n      bio: 'Angular FTW',\r\n      job: 'Googler @ Google',\r\n      location: '1600 Amphitheatre Parkway, CA, USA',\r\n      avatar_url: 'https://i.tasoagc.dev/i9Ig',\r\n    },\r\n  },\r\n  {\r\n    app: 'TWITTER',\r\n    method: TwitterEvents.FETCH_TWEETS,\r\n    data: [\r\n      {\r\n        id: 59,\r\n        message: 'XSS\\n<script src=\"test.js\">Test</script>\\nBro',\r\n        avatar_url: 'http://i.tasoagc.dev/jtKL',\r\n        seconds_since_tweet: 500,\r\n        isMine: false,\r\n        isRetweetedByPlayer: true,\r\n        updateAt: '2021-02-08 14:37:46',\r\n        visible: 1,\r\n        likes: 50000,\r\n        profile_name: 'jQuery Main',\r\n        images: 'http://i.tasoagc.dev/0xdp',\r\n      },\r\n      {\r\n        id: 2,\r\n        message: 'GCPhone will never die',\r\n        avatar_url: 'http://i.tasoagc.dev/jtKL',\r\n        seconds_since_tweet: 500,\r\n        isMine: false,\r\n        updateAt: '2021-02-08 14:37:46',\r\n        visible: 1,\r\n        likes: 50000,\r\n        profile_name: 'GCPhone_v9999',\r\n        images: 'http://i.tasoagc.dev/0xdp',\r\n      },\r\n      {\r\n        id: 1,\r\n        message: 'I love angular',\r\n        avatar_url: 'https://i.tasoagc.dev/i9Ig',\r\n        seconds_since_tweet: 800,\r\n        isMine: true,\r\n        updateAt: '2021-02-08 14:37:46',\r\n        visible: 1,\r\n        likes: 50000,\r\n        profile_name: 'Angular_Dev',\r\n        images: 'http://i.tasoagc.dev/i9Ig',\r\n      },\r\n      {\r\n        id: 3,\r\n        message:\r\n          'Anyways uhm... I bought a whole bunch of shungite, rocks, ' +\r\n          'do you know what shungite is? Anybody know what shungite is. No, no ' +\r\n          'Suge Knight, I think hes locked up in prison.',\r\n        avatar_url: 'http://i.tasoagc.dev/0v64',\r\n        seconds_since_tweet: 800,\r\n        isMine: true,\r\n        updateAt: '2021-02-08 14:37:46',\r\n        visible: 1,\r\n        likes: 50000,\r\n        profile_name: 'The_Doc',\r\n      },\r\n    ],\r\n  },\r\n]);\r\n\r\nInjectDebugData(\r\n  [\r\n    {\r\n      app: 'TWITTER',\r\n      method: TwitterEvents.CREATE_TWEET_BROADCAST,\r\n      data: {\r\n        id: 111,\r\n        profile_id: 111,\r\n        profile_name: 'Kidz',\r\n        isMine: false,\r\n        isReported: false,\r\n        message: 'I have tweeted this because Im badass',\r\n      },\r\n    },\r\n    {\r\n      app: 'TWITTER',\r\n      method: TwitterEvents.CREATE_TWEET_BROADCAST,\r\n      data: {\r\n        id: 111,\r\n        profile_id: 111,\r\n        profile_name: 'ItsChip',\r\n        isMine: false,\r\n        isReported: false,\r\n        message:\r\n          'I have tweeted this because Im even more badass... And I need this to be longer so I will continue to write',\r\n      },\r\n    },\r\n  ],\r\n  3000,\r\n);\r\n","import { atom } from 'recoil';\r\n\r\nexport const exampleState = {\r\n  example: atom({\r\n    key: 'exampleState',\r\n    default: null,\r\n  }),\r\n};\r\n","import { createAppThemeProvider } from '../../../os/apps/utils/createAppThemeProvider';\r\n\r\nimport exampleTheme from '../example.theme';\r\n\r\nexport const ExampleThemeProvider = createAppThemeProvider(exampleTheme);\r\n","const theme = {\r\n  palette: {\r\n    primary: {\r\n      main: '#f23123',\r\n    },\r\n  },\r\n};\r\n\r\nexport default theme;\r\n","import { useEffect, useState } from 'react';\r\nimport { usePreviousState } from '../../../common/utils/usePreviousState';\r\nimport { useSoundProvider } from './useSoundProvider';\r\n\r\ninterface ISoundOptions {\r\n  volume?: number;\r\n  interrupt?: boolean;\r\n  loop?: boolean;\r\n}\r\n\r\nconst DEFAULT_OPTIONS = { volume: 1, interrupt: false, loop: false };\r\n\r\n/**\r\n * A hook allowing to play sound\r\n * @param url The url of the sound you would like to play\r\n *\r\n * @param { volume, interrupt, loop} Additional options\r\n **/\r\nconst useSound = (url: string, options: ISoundOptions = DEFAULT_OPTIONS) => {\r\n  const { volume: vol, loop: isLoop, interrupt } = options;\r\n\r\n  const [isPlaying, setPlaying] = useState<boolean>(false);\r\n\r\n  const { mount, play, stop, playing, volume, loop, remove, isMounted } = useSoundProvider();\r\n\r\n  const previousInterrupt = usePreviousState(interrupt);\r\n  const previousUrl = usePreviousState(url);\r\n\r\n  useEffect(() => {\r\n    const changed = previousUrl !== url;\r\n    if (changed) {\r\n      stop(previousUrl);\r\n      remove(previousUrl);\r\n    }\r\n    if (!isMounted(url)) {\r\n      mount(url, vol, isLoop, changed && isPlaying);\r\n      return;\r\n    }\r\n    if (changed && isPlaying) {\r\n      play(url);\r\n    }\r\n    volume(url, vol);\r\n    loop(url, isLoop);\r\n  }, [\r\n    url,\r\n    vol,\r\n    isLoop,\r\n    isMounted,\r\n    volume,\r\n    loop,\r\n    mount,\r\n    previousUrl,\r\n    stop,\r\n    remove,\r\n    isPlaying,\r\n    play,\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    if (interrupt) {\r\n      stop(url);\r\n      setPlaying(false);\r\n      return;\r\n    }\r\n    if (!playing(url) && previousInterrupt) {\r\n      play();\r\n      setPlaying(true);\r\n    }\r\n  }, [interrupt, play, playing, previousInterrupt, stop, url]);\r\n\r\n  return {\r\n    play: () => {\r\n      play(url);\r\n      setPlaying(true);\r\n    },\r\n    stop: () => {\r\n      stop(url);\r\n      setPlaying(false);\r\n    },\r\n    playing: isPlaying,\r\n  };\r\n};\r\n\r\nexport default useSound;\r\n","export interface MarketplaceListing extends MarketplaceListingBase {\r\n  id: number;\r\n  identifier?: string;\r\n  username: string;\r\n  name: string;\r\n  number: string;\r\n}\r\n\r\nexport interface MarketplaceListingBase {\r\n  title: string;\r\n  url: string;\r\n  description: string;\r\n}\r\n\r\nexport enum MarketplaceEvents {\r\n  ADD_LISTING = 'npwd:addListing',\r\n  FETCH_LISTING = 'npwd:fetchAllListings',\r\n  DELETE_LISTING = 'npwd:marketplaceDeleteListing',\r\n  REPORT_LISTING = 'npwd:reportListing',\r\n  BROADCAST_ADD = 'npwd:sendMarketplaceBroadcastAdd',\r\n  BROADCAST_DELETE = 'npwd:sendMarketplaceBroadcastDelete',\r\n}\r\n\r\nexport interface MarketplaceBroadcastAddDTO {\r\n  listing: MarketplaceListing;\r\n}\r\n\r\nexport interface MarketplaceDeleteDTO {\r\n  id: number;\r\n}\r\n\r\nexport interface MarketplaceReportDTO {\r\n  id: number;\r\n}\r\n","import { IAlertProps } from './alerts';\r\n\r\nexport type AlertCategory =\r\n  | 'NOTES_ADD_SUCCESS'\r\n  | 'NOTES_ADD_FAILED'\r\n  | 'NOTES_UPDATE_SUCCESS'\r\n  | 'NOTES_UPDATE_FAILED'\r\n  | 'NOTES_DELETE_SUCCESS'\r\n  | 'NOTES_DELETE_FAILED';\r\n\r\nexport interface INotesAlert {\r\n  alert: AlertCategory;\r\n  setAlert: (type: AlertCategory) => void;\r\n}\r\n\r\nexport interface BeforeDBNote {\r\n  title: string;\r\n  content: string;\r\n}\r\n\r\nexport interface NoteItem extends BeforeDBNote {\r\n  id: number;\r\n  title: string;\r\n  content: string;\r\n}\r\n\r\nexport interface DeleteNoteDTO {\r\n  id: number;\r\n}\r\n\r\nexport enum NotesEvents {\r\n  ADD_NOTE = 'npwd:addNote',\r\n  FETCH_ALL_NOTES = 'npwd:fetchAllNotes',\r\n  DELETE_NOTE = 'npwd:deleteNote',\r\n  UPDATE_NOTE = 'npwd:updateNote',\r\n}\r\n\r\nexport interface NoteServerResponse<T = unknown> {\r\n  alert?: IAlertProps;\r\n  action: 'SEND' | 'UPDATE' | 'DELETE' | 'ADD';\r\n  suceeded: boolean;\r\n  refetch?: boolean;\r\n  data?: T;\r\n}\r\n","import { atom, selector, useRecoilState, useRecoilValue, useSetRecoilState } from 'recoil';\r\nimport { ServerPromiseResp } from '../../../../../typings/common';\r\nimport { MarketplaceEvents, MarketplaceListing } from '../../../../../typings/marketplace';\r\nimport { fetchNui } from '../../../utils/fetchNui';\r\nimport { isEnvBrowser } from '../../../utils/misc';\r\n\r\nconst defaultData: MarketplaceListing[] = [\r\n  {\r\n    id: 1,\r\n    name: 'Some guy',\r\n    number: '111-1134',\r\n    username: 'Taso',\r\n    title: 'eeeeeeeeeeeeeeeeeeeeeeeee',\r\n    description:\r\n      'skldfsdEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEE',\r\n    url: 'https://beta.iodine.gg/706Y3.jpeg',\r\n  },\r\n  {\r\n    id: 2,\r\n    name: 'Some other dude',\r\n    number: '666-6666',\r\n    username: 'Taso',\r\n    title: 'Material',\r\n    description: 'Selling my wife',\r\n    url: '',\r\n  },\r\n];\r\n\r\nconst listingState = atom<MarketplaceListing[]>({\r\n  key: 'listings',\r\n  default: selector({\r\n    key: 'defaultListings',\r\n    get: async () => {\r\n      try {\r\n        const resp = await fetchNui<ServerPromiseResp<MarketplaceListing[]>>(\r\n          MarketplaceEvents.FETCH_LISTING,\r\n        );\r\n\r\n        return resp.data;\r\n      } catch (e) {\r\n        if (isEnvBrowser()) {\r\n          return defaultData;\r\n        }\r\n        console.error(e);\r\n        return [];\r\n      }\r\n    },\r\n  }),\r\n});\r\n\r\nexport const useListingValue = () => useRecoilValue(listingState);\r\nexport const useSetListings = () => useSetRecoilState(listingState);\r\nexport const useListings = () => useRecoilState(listingState);\r\n","import { Box, Tooltip, Button } from '@material-ui/core';\r\nimport { makeStyles, Theme } from '@material-ui/core/styles';\r\nimport React from 'react';\r\nimport { MarketplaceEvents, MarketplaceListing } from '../../../../../../typings/marketplace';\r\nimport { useSimcard } from '../../../../os/simcard/hooks/useSimcard';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport ReportIcon from '@material-ui/icons/Report';\r\nimport ChatIcon from '@material-ui/icons/Chat';\r\nimport PhoneIcon from '@material-ui/icons/Phone';\r\nimport { useNuiRequest } from 'fivem-nui-react-lib';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { useHistory } from 'react-router';\r\nimport { CallEvents } from '../../../../../../typings/call';\r\nimport { fetchNui } from '../../../../utils/fetchNui';\r\nimport { useSnackbar } from '../../../../ui/hooks/useSnackbar';\r\nimport { ServerPromiseResp } from '../../../../../../typings/common';\r\n\r\nconst useStyles = makeStyles((theme: Theme) => ({\r\n  icon: {\r\n    color: theme.palette.primary.main,\r\n  },\r\n}));\r\n\r\nexport const ListingActions: React.FC<MarketplaceListing> = ({ children, ...listing }) => {\r\n  const Nui = useNuiRequest();\r\n  const classes = useStyles();\r\n  const { number: myNumber } = useSimcard();\r\n  const { t } = useTranslation();\r\n  const history = useHistory();\r\n  const { addAlert } = useSnackbar();\r\n\r\n  const handleDeleteListing = () => {\r\n    fetchNui<ServerPromiseResp>(MarketplaceEvents.DELETE_LISTING, {\r\n      id: listing.id,\r\n    }).then((resp) => {\r\n      if (resp.status !== 'ok') {\r\n        return addAlert({\r\n          message: t('APPS_MARKETPLACE_DELETE_LISTING_FAILED'),\r\n          type: 'error',\r\n        });\r\n      }\r\n\r\n      addAlert({\r\n        message: t('APPS_MARKETPLACE_DELETE_LISTING_SUCCESS'),\r\n        type: 'success',\r\n      });\r\n    });\r\n  };\r\n\r\n  const handleReportListing = () => {\r\n    fetchNui<ServerPromiseResp>(MarketplaceEvents.REPORT_LISTING, {\r\n      listingId: listing.id,\r\n    }).then((resp) => {\r\n      if (resp.status !== 'ok') {\r\n        return addAlert({\r\n          message: t('APPS_MARKETPLACE_REPORT_LISTING_FAILED'),\r\n          type: 'error',\r\n        });\r\n      }\r\n\r\n      addAlert({\r\n        message: t('APPS_MARKETPLACE_REPORT_LISTING_SUCCESS'),\r\n        type: 'success',\r\n      });\r\n    });\r\n  };\r\n\r\n  const handleCall = () => {\r\n    Nui.send(CallEvents.INITIALIZE_CALL, {\r\n      number: listing.number,\r\n    });\r\n  };\r\n\r\n  const handleMessage = () => {\r\n    history.push(`/messages/new/${listing.number}`);\r\n  };\r\n\r\n  return (\r\n    <Box justifyContent=\"space-between\" alignItems=\"center\">\r\n      <div style={{ float: 'left' }}>\r\n        {listing.number !== myNumber && (\r\n          <>\r\n            <Tooltip title={t('GENERIC_MESSAGE')}>\r\n              <Button onClick={handleMessage}>\r\n                <ChatIcon className={classes.icon} />\r\n              </Button>\r\n            </Tooltip>\r\n            <Tooltip title={`${t('GENERIC_CALL')}: ${listing.number}`}>\r\n              <Button onClick={handleCall}>\r\n                <PhoneIcon className={classes.icon} />\r\n              </Button>\r\n            </Tooltip>\r\n          </>\r\n        )}\r\n      </div>\r\n\r\n      <div style={{ float: 'right' }}>\r\n        {listing.number === myNumber ? (\r\n          <Tooltip title={t('GENERIC_DELETE')}>\r\n            <Button onClick={handleDeleteListing}>\r\n              <DeleteIcon />\r\n            </Button>\r\n          </Tooltip>\r\n        ) : (\r\n          <Tooltip title={t('GENERIC_REPORT')}>\r\n            <Button onClick={handleReportListing}>\r\n              <ReportIcon />\r\n            </Button>\r\n          </Tooltip>\r\n        )}\r\n      </div>\r\n    </Box>\r\n  );\r\n};\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Typography, Paper } from '@material-ui/core';\r\nimport { ListItem } from '../../../../ui/components/ListItem';\r\nimport { PictureResponsive } from '../../../../ui/components/PictureResponsive';\r\nimport { MarketplaceListing } from '../../../../../../typings/marketplace';\r\nimport { ListingActions } from './ListingActions';\r\nimport { PictureReveal } from '../../../../ui/components/PictureReveal';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    overflowX: 'hidden',\r\n    display: 'flex',\r\n    flexFlow: 'row nowrap',\r\n    alignItems: 'flex-start',\r\n    width: '100%',\r\n    marginTop: '3px',\r\n  },\r\n  content: {\r\n    display: 'flex',\r\n    marginTop: '-10px',\r\n    flexFlow: 'column nowrap',\r\n    width: '100%',\r\n  },\r\n  paper: {\r\n    overflow: 'auto',\r\n    display: 'flex',\r\n    flexFlow: 'column',\r\n    alignItems: 'flex',\r\n    height: 'auto',\r\n    background: theme.palette.background.default,\r\n    marginBottom: 20,\r\n  },\r\n  listingContent: {\r\n    padding: 10,\r\n    minWidth: 100,\r\n    maxWidth: '100%',\r\n    width: '100%',\r\n    overflowWrap: 'break-word',\r\n    wordWrap: 'break-word',\r\n  },\r\n}));\r\n\r\nexport const MarketplaceItem: React.FC<MarketplaceListing> = ({ children, ...listing }) => {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <ListItem className={classes.root}>\r\n      <div className={classes.content}>\r\n        <Paper elevation={2} className={classes.paper}>\r\n          <div style={{ margin: 10 }}>\r\n            <Typography style={{ margin: 5 }} variant=\"h5\">\r\n              {listing.name}\r\n            </Typography>\r\n            <Typography variant=\"h5\" style={{ padding: 5 }}>\r\n              {listing.title}\r\n            </Typography>\r\n          </div>\r\n\r\n          {listing.url ? (\r\n            <PictureReveal>\r\n              <PictureResponsive src={listing.url} alt={`${listing.name}`} />\r\n            </PictureReveal>\r\n          ) : (\r\n            <Typography style={{ margin: 10 }}>\r\n              No image provided{' '}\r\n              <span role=\"img\" aria-label=\"emoji\">\r\n                \r\n              </span>\r\n            </Typography>\r\n          )}\r\n\r\n          <Typography variant=\"body1\" className={classes.listingContent}>\r\n            {listing.description}\r\n          </Typography>\r\n          <ListingActions {...listing} />\r\n        </Paper>\r\n      </div>\r\n    </ListItem>\r\n  );\r\n};\r\n","import React from 'react';\r\nimport { List } from '../../../../ui/components/List';\r\nimport { useListingValue } from '../../hooks/state';\r\nimport { MarketplaceItem } from './MarketplaceItem';\r\n\r\nexport const MarketplaceList: React.FC = () => {\r\n  const listings = useListingValue();\r\n\r\n  return (\r\n    <List>\r\n      {listings.map((listing) => (\r\n        <MarketplaceItem key={listing.id} {...listing} />\r\n      ))}\r\n    </List>\r\n  );\r\n};\r\n","import React from 'react';\r\nimport { MarketplaceList } from './MarketplaceList';\r\nimport { LoadingSpinner } from '../../../../ui/components/LoadingSpinner';\r\n\r\nexport const MarketplaceListContainer: React.FC = () => {\r\n  return (\r\n    <React.Suspense fallback={<LoadingSpinner />}>\r\n      <MarketplaceList />\r\n    </React.Suspense>\r\n  );\r\n};\r\n","import React, { useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Link } from 'react-router-dom';\r\nimport { BottomNavigation, BottomNavigationAction } from '@material-ui/core';\r\nimport { AddCircle, Home } from '@material-ui/icons/';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: '100%',\r\n    backgroundColor: theme.palette.background.default,\r\n  },\r\n  icon: {\r\n    color: theme.palette.primary.main,\r\n  },\r\n}));\r\n\r\nexport const NavigationBar = () => {\r\n  const classes = useStyles();\r\n  const [activePage, setActivePage] = useState(0);\r\n  return (\r\n    <BottomNavigation\r\n      value={activePage}\r\n      onChange={(event, newPage) => {\r\n        setActivePage(newPage);\r\n      }}\r\n      showLabels\r\n      className={classes.root}\r\n    >\r\n      <BottomNavigationAction component={Link} icon={<Home />} to=\"/marketplace\" />\r\n      <BottomNavigationAction component={Link} icon={<AddCircle />} to=\"/marketplace/new\" />\r\n    </BottomNavigation>\r\n  );\r\n};\r\n","import React, { useEffect, useState, useCallback } from 'react';\r\nimport { makeStyles, Button, Box } from '@material-ui/core';\r\nimport { MarketplaceEvents, MarketplaceListing } from '../../../../../../typings/marketplace';\r\nimport { useSnackbar } from '../../../../ui/hooks/useSnackbar';\r\nimport { useTranslation } from 'react-i18next';\r\nimport ImageIcon from '@material-ui/icons/Image';\r\nimport { useHistory, useLocation } from 'react-router-dom';\r\nimport qs from 'qs';\r\nimport { useQueryParams } from '../../../../common/hooks/useQueryParams';\r\nimport { deleteQueryFromLocation } from '../../../../common/utils/deleteQueryFromLocation';\r\nimport { TextField } from '../../../../ui/components/Input';\r\nimport { fetchNui } from '../../../../utils/fetchNui';\r\nimport { ServerPromiseResp } from '../../../../../../typings/common';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: '100%',\r\n    margin: 'auto',\r\n    textAlign: 'center',\r\n  },\r\n  input: {\r\n    marginBottom: 25,\r\n  },\r\n  textFieldInput: {\r\n    fontSize: 22,\r\n  },\r\n  multilineFieldInput: {\r\n    fontSize: 20,\r\n  },\r\n  postButton: {\r\n    display: 'block',\r\n    margin: 'auto',\r\n    background: theme.palette.primary.main,\r\n    width: '80%',\r\n    fontSize: 20,\r\n  },\r\n}));\r\n\r\nexport const ListingForm = () => {\r\n  const classes = useStyles();\r\n  const { t } = useTranslation();\r\n  const { addAlert } = useSnackbar();\r\n  const history = useHistory();\r\n  const { pathname, search } = useLocation();\r\n  const query = useQueryParams();\r\n\r\n  const [title, setTitle] = useState('');\r\n  const [url, setUrl] = useState('');\r\n  const [description, setDescription] = useState('');\r\n\r\n  const addListing = () => {\r\n    if (title !== '' && description !== '') {\r\n      fetchNui<ServerPromiseResp<MarketplaceListing[]>>(MarketplaceEvents.ADD_LISTING, {\r\n        title,\r\n        description,\r\n        url,\r\n      }).then((resp) => {\r\n        if (resp.status !== 'ok') {\r\n          return addAlert({\r\n            message: t('APPS_MARKETPLACE_CREATE_LISTING_FAILED'),\r\n            type: 'error',\r\n          });\r\n        }\r\n\r\n        addAlert({\r\n          message: t('APPS_MARKETPLACE_CREATE_LISTING_SUCCESS'),\r\n          type: 'success',\r\n        });\r\n        history.push('/marketplace');\r\n      });\r\n    } else {\r\n      addAlert({\r\n        message: t('APPS_MARKETPLACE_REQUIRED_FIELDS'),\r\n        type: 'error',\r\n      });\r\n    }\r\n  };\r\n\r\n  /*const handleChooseImage = () => {\r\n\t\thistory.push(`/camera?${qs.stringify({\r\n\t\t\treferal: encodeURIComponent(pathname + search),\r\n\t\t})}`)\r\n\t}*/\r\n\r\n  const handleChooseImage = useCallback(() => {\r\n    history.push(\r\n      `/camera?${qs.stringify({\r\n        referal: encodeURIComponent(pathname + search),\r\n      })}`,\r\n    );\r\n  }, [history, pathname, search]);\r\n\r\n  useEffect(() => {\r\n    if (!query?.image) return;\r\n    setUrl(query?.image);\r\n    history.replace(deleteQueryFromLocation({ pathname, search }, 'image'));\r\n  }, [query?.image, history, pathname, search]);\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <h1>New Listing</h1>\r\n      <TextField\r\n        className={classes.input}\r\n        onChange={(e) => setTitle(e.target.value)}\r\n        label={t('GENERIC_REQUIRED')}\r\n        placeholder={t('APPS_MARKETPLACE_FORM_TITLE')}\r\n        inputProps={{\r\n          className: classes.textFieldInput,\r\n          maxLength: 25,\r\n        }}\r\n        style={{ width: '80%' }}\r\n        size=\"medium\"\r\n        InputLabelProps={{\r\n          shrink: true,\r\n        }}\r\n      />\r\n\r\n      <Box display=\"flex\" alignItems=\"center\" paddingLeft={5}>\r\n        <div>\r\n          <ImageIcon />\r\n        </div>\r\n        <div>\r\n          <Button onClick={handleChooseImage}>Choose a image</Button>\r\n        </div>\r\n      </Box>\r\n      <TextField\r\n        className={classes.input}\r\n        placeholder={t('APPS_MARKETPLACE_FORM_IMAGE')}\r\n        value={url}\r\n        onChange={(e) => setUrl(e.currentTarget.value)}\r\n        inputProps={{ className: classes.textFieldInput }}\r\n        style={{ width: '80%' }}\r\n        size=\"medium\"\r\n        variant=\"outlined\"\r\n      />\r\n\r\n      <TextField\r\n        className={classes.input}\r\n        onChange={(e) => setDescription(e.target.value)}\r\n        label={t('GENERIC_REQUIRED')}\r\n        placeholder={t('APPS_MARKETPLACE_FORM_DESCRIPTION')}\r\n        inputProps={{\r\n          className: classes.multilineFieldInput,\r\n          maxLength: 130,\r\n        }}\r\n        style={{ width: '80%' }}\r\n        size=\"medium\"\r\n        InputLabelProps={{\r\n          shrink: true,\r\n        }}\r\n        multiline\r\n        rows={4}\r\n        variant=\"outlined\"\r\n      />\r\n      <Button onClick={addListing} className={classes.postButton}>\r\n        Post\r\n      </Button>\r\n    </div>\r\n  );\r\n};\r\n","import React from 'react';\r\nimport { ListingForm } from './ListingForm';\r\n\r\nexport const ListingFormContainer = () => {\r\n  return (\r\n    <div>\r\n      <ListingForm />\r\n    </div>\r\n  );\r\n};\r\n","import { common, red } from '@material-ui/core/colors';\r\n\r\nexport const SELLOUT_APP_PRIMARY_COLOR = red[500];\r\nexport const SELLOUT_APP_ICON_COLOR = common.white;\r\nexport const SELLOUT_APP_TEXT_COLOR = common.black;\r\n\r\nconst theme = {\r\n  palette: {\r\n    primary: {\r\n      main: SELLOUT_APP_PRIMARY_COLOR,\r\n      dark: red[700],\r\n      light: red[200],\r\n      contrastText: SELLOUT_APP_TEXT_COLOR,\r\n    },\r\n  },\r\n};\r\n\r\nexport default theme;\r\n","import { createAppThemeProvider } from '../../../os/apps/utils/createAppThemeProvider';\r\n\r\nimport selloutTheme from '../marketplace.theme';\r\n\r\nexport const MarketplaceThemeProvider = createAppThemeProvider(selloutTheme);\r\n","import React from 'react';\r\nimport { AppWrapper } from '../../../ui/components';\r\nimport { AppContent } from '../../../ui/components/AppContent';\r\nimport { MarketplaceListContainer } from './MarketplaceList/MarketplaceListContainer';\r\nimport { NavigationBar } from './navigation/NavigationBar';\r\nimport { Switch, Route } from 'react-router-dom';\r\nimport { ListingFormContainer } from './form/ListingFormContainer';\r\nimport { MarketplaceThemeProvider } from '../providers/MarketplaceThemeProvider';\r\nimport { AppTitle } from '../../../ui/components/AppTitle';\r\nimport { useApp } from '../../../os/apps/hooks/useApps';\r\n\r\nexport const MarketplaceApp = () => {\r\n  const marketplaceApp = useApp('MARKETPLACE');\r\n\r\n  return (\r\n    <MarketplaceThemeProvider>\r\n      <AppWrapper id=\"sellout-app\">\r\n        <AppTitle app={marketplaceApp} />\r\n        <AppContent>\r\n          <Switch>\r\n            <Route path=\"/marketplace\" exact component={MarketplaceListContainer} />\r\n            <Route path=\"/marketplace/new\" component={ListingFormContainer} />\r\n          </Switch>\r\n        </AppContent>\r\n        <NavigationBar />\r\n      </AppWrapper>\r\n    </MarketplaceThemeProvider>\r\n  );\r\n};\r\n","import { NoteItem } from '../../../../../typings/notes';\r\n\r\nexport const BrowserNotesData: NoteItem[] = [\r\n  {\r\n    id: 1,\r\n    title: 'You suck',\r\n    content: 'Nice note bro',\r\n  },\r\n  {\r\n    id: 2,\r\n    title: 'You suck',\r\n    content: 'Nice note bro',\r\n  },\r\n  {\r\n    id: 3,\r\n    title: 'You suck',\r\n    content: 'Nice note bro',\r\n  },\r\n  {\r\n    id: 4,\r\n    title: 'You suck',\r\n    content: 'Nice note bro',\r\n  },\r\n];\r\n","export interface GalleryPhoto {\r\n  image: string;\r\n  id: number;\r\n}\r\n\r\nexport enum PhotoEvents {\r\n  TAKE_PHOTO = 'npwd:TakePhoto',\r\n  TAKE_PHOTO_SUCCESS = 'npwd:TakePhotoSuccess',\r\n  TAKE_PHOTO_ERROR = 'npwd:TakePhotoError',\r\n  UPLOAD_PHOTO = 'npwd:UploadPhoto',\r\n  UPLOAD_PHOTO_SUCCESS = 'npwd:UploadPhotoSuccess',\r\n  FETCH_PHOTOS = 'npwd:FetchPhotos',\r\n  SEND_PHOTOS = 'npwd:SendPhotos',\r\n  DELETE_PHOTO = 'npwd:deletePhoto',\r\n  DELETE_PHOTO_SUCCESS = 'npwd:deletePhotoSuccess',\r\n}\r\n","import { atom, selector, useRecoilState, useRecoilValue, useSetRecoilState } from 'recoil';\r\nimport { fetchNui } from '../../../utils/fetchNui';\r\nimport { ServerPromiseResp } from '../../../../../typings/common';\r\nimport { NoteItem, NotesEvents } from '../../../../../typings/notes';\r\nimport LogDebugEvent from '../../../os/debug/LogDebugEvents';\r\nimport { isEnvBrowser } from '../../../utils/misc';\r\nimport { BrowserNotesData } from '../utils/constants';\r\n\r\nexport const noteStates = {\r\n  noteItems: atom({\r\n    key: 'noteItem',\r\n    default: selector<NoteItem[]>({\r\n      key: 'defaultNoteItems',\r\n      get: async () => {\r\n        try {\r\n          const resp = await fetchNui<ServerPromiseResp<NoteItem[]>>(NotesEvents.FETCH_ALL_NOTES);\r\n          LogDebugEvent({ action: 'FetchNotes', data: resp.data });\r\n          return resp.data;\r\n        } catch (e) {\r\n          if (isEnvBrowser()) {\r\n            return BrowserNotesData;\r\n          }\r\n          console.error(e);\r\n          return [];\r\n        }\r\n      },\r\n    }),\r\n  }),\r\n  selectedNote: atom<Partial<NoteItem> | null>({\r\n    key: 'selectedNote',\r\n    default: null,\r\n  }),\r\n};\r\n\r\nexport const useSetSelectedNote = () => useSetRecoilState(noteStates.selectedNote);\r\nexport const useSelectedNoteValue = () => useRecoilValue(noteStates.selectedNote);\r\nexport const useSelectedNote = () => useRecoilState(noteStates.selectedNote);\r\n\r\nexport const useNotesValue = () => useRecoilValue(noteStates.noteItems);\r\nexport const useSetNotes = () => useSetRecoilState(noteStates.noteItems);\r\n","import React from 'react';\r\nimport { Box, List, ListItem, ListItemText, Typography } from '@material-ui/core';\r\nimport { useNotesValue } from '../hooks/state';\r\nimport { useSetSelectedNote } from '../hooks/state';\r\nimport { NoteItem } from '../../../../../typings/notes';\r\nimport { makeStyles, Theme } from '@material-ui/core/styles';\r\nimport { Notes } from '@material-ui/icons';\r\n\r\nconst useStyles = makeStyles((theme: Theme) => ({\r\n  noNotes: {\r\n    color: theme.palette.text.secondary,\r\n  },\r\n}));\r\n\r\n// TODO: add search bar later\r\nconst NoteList = () => {\r\n  const classes = useStyles();\r\n  const notes = useNotesValue();\r\n  const setNote = useSetSelectedNote();\r\n\r\n  const handleNoteModal = (note: NoteItem) => {\r\n    setNote(note);\r\n  };\r\n\r\n  if (notes && notes.length)\r\n    return (\r\n      <List disablePadding>\r\n        {notes.map((note) => (\r\n          <ListItem key={note.id} button divider onClick={() => handleNoteModal(note)}>\r\n            <ListItemText>{note.title}</ListItemText>\r\n          </ListItem>\r\n        ))}\r\n      </List>\r\n    );\r\n\r\n  return (\r\n    <Box\r\n      display=\"flex\"\r\n      justifyContent=\"center\"\r\n      alignItems=\"center\"\r\n      flexDirection=\"column\"\r\n      height=\"100%\"\r\n      className={classes.noNotes}\r\n    >\r\n      <Typography color=\"inherit\" variant=\"h6\" style={{ fontWeight: 300 }}>\r\n        You have no notes\r\n      </Typography>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default NoteList;\r\n","import { makeStyles } from '@material-ui/core';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  modalRoot: {\r\n    zIndex: 20,\r\n    position: 'absolute',\r\n    height: '99%',\r\n    width: '100%',\r\n    background: theme.palette.background.default,\r\n  },\r\n  input: {\r\n    marginBottom: 20,\r\n  },\r\n  inputPropsTitle: {\r\n    fontSize: 28,\r\n  },\r\n  inputPropsContent: {\r\n    fontSize: 20,\r\n    lineHeight: 1.2,\r\n  },\r\n}));\r\n\r\nexport default useStyles;\r\n","import { useSetNotes } from './state';\r\nimport { useCallback } from 'react';\r\nimport { NoteItem } from '../../../../../typings/notes';\r\n\r\ninterface UseNotesActionsValue {\r\n  deleteNote: (id: number) => void;\r\n  addNote: (note: NoteItem) => void;\r\n  updateNote: (note: NoteItem) => void;\r\n}\r\n\r\nexport const useNotesActions = (): UseNotesActionsValue => {\r\n  const setNotes = useSetNotes();\r\n\r\n  const deleteNote = useCallback(\r\n    (id) => {\r\n      setNotes((curNotes) => [...curNotes].filter((note) => note.id !== id));\r\n    },\r\n    [setNotes],\r\n  );\r\n\r\n  const addNote = useCallback(\r\n    (note: NoteItem) => {\r\n      setNotes((curNotes) => [...curNotes, note]);\r\n    },\r\n    [setNotes],\r\n  );\r\n\r\n  const updateNote = useCallback(\r\n    (note: NoteItem) => {\r\n      setNotes((curNotes) => {\r\n        const targetIndex = curNotes.findIndex((storedNote) => storedNote.id === note.id);\r\n        const newNotesArray = [...curNotes];\r\n        newNotesArray[targetIndex] = note;\r\n        return newNotesArray;\r\n      });\r\n    },\r\n    [setNotes],\r\n  );\r\n\r\n  return { deleteNote, addNote, updateNote };\r\n};\r\n","import { Button, Slide, Paper, Typography, Container, Box } from '@material-ui/core';\r\nimport React, { useEffect, useState } from 'react';\r\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\r\nimport useStyles from './modal.styles';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { StatusButton } from '../../../ui/components/StatusButton';\r\nimport { DeleteNoteDTO, NoteItem, NotesEvents } from '../../../../../typings/notes';\r\nimport { TextField } from '../../../ui/components/Input';\r\nimport { fetchNui } from '../../../utils/fetchNui';\r\nimport { useSelectedNote } from '../hooks/state';\r\nimport { ServerPromiseResp } from '../../../../../typings/common';\r\nimport { useSnackbar } from '../../../ui/hooks/useSnackbar';\r\nimport { useNotesActions } from '../hooks/useNotesActions';\r\n\r\nexport const NoteModal = () => {\r\n  const classes = useStyles();\r\n  const { addNote, deleteNote, updateNote } = useNotesActions();\r\n  const { t } = useTranslation();\r\n  const [selectedNote, setSelectedNote] = useSelectedNote();\r\n  const [noteTitle, setNoteTitle] = useState('');\r\n  const [noteContent, setNoteContent] = useState('');\r\n  const { addAlert } = useSnackbar();\r\n\r\n  const isNewNote = !Boolean(selectedNote?.id);\r\n\r\n  useEffect(() => {\r\n    if (selectedNote !== null) {\r\n      setNoteContent(selectedNote.content);\r\n      setNoteTitle(selectedNote.title);\r\n    }\r\n  }, [selectedNote]);\r\n\r\n  const handleNoteSave = () => {\r\n    fetchNui<ServerPromiseResp<NoteItem>>(NotesEvents.ADD_NOTE, {\r\n      title: noteTitle,\r\n      content: noteContent,\r\n    }).then((resp) => {\r\n      if (resp.status !== 'ok') {\r\n        return addAlert({\r\n          message: t('APPS_NOTES_ADD_FAILED'),\r\n          type: 'error',\r\n        });\r\n      }\r\n\r\n      addNote(resp.data);\r\n\r\n      addAlert({\r\n        message: t('APPS_NOTES_ADD_SUCCESS'),\r\n        type: 'success',\r\n      });\r\n      setSelectedNote(null);\r\n    });\r\n  };\r\n\r\n  const handleDeleteNote = () => {\r\n    fetchNui<ServerPromiseResp<DeleteNoteDTO>>(NotesEvents.DELETE_NOTE, selectedNote).then(\r\n      (resp) => {\r\n        if (resp.status !== 'ok') {\r\n          return addAlert({\r\n            message: t('APPS_NOTES_DELETE_FAILED'),\r\n            type: 'error',\r\n          });\r\n        }\r\n\r\n        deleteNote(resp.data.id);\r\n\r\n        addAlert({\r\n          message: t('APPS_NOTES_DELETE_SUCCESS'),\r\n          type: 'success',\r\n        });\r\n      },\r\n    );\r\n    setSelectedNote(null);\r\n  };\r\n\r\n  const handleUpdateNote = () => {\r\n    fetchNui<ServerPromiseResp>(NotesEvents.ADD_NOTE, selectedNote).then((resp) => {\r\n      if (resp.status !== 'ok') {\r\n        return addAlert({\r\n          message: t('APPS_NOTES_UPDATE_FAILED'),\r\n          type: 'error',\r\n        });\r\n      }\r\n\r\n      updateNote({ id: selectedNote.id, title: noteTitle, content: noteContent });\r\n\r\n      addAlert({\r\n        message: t('APPS_NOTES_UPDATE_SUCCESS'),\r\n        type: 'success',\r\n      });\r\n    });\r\n    setSelectedNote(null);\r\n  };\r\n\r\n  const handleTitleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    setNoteTitle(e.target.value);\r\n  };\r\n\r\n  const handleContentChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    setNoteContent(e.target.value);\r\n  };\r\n\r\n  const _handleClose = () => {\r\n    setSelectedNote(null);\r\n  };\r\n\r\n  if (selectedNote === null) return null;\r\n\r\n  return (\r\n    <Slide direction=\"left\" in={Boolean(selectedNote)} mountOnEnter unmountOnExit>\r\n      <Paper className={classes.modalRoot} square>\r\n        <Container>\r\n          <Box>\r\n            <Box py={2}>\r\n              <Button\r\n                color=\"primary\"\r\n                size=\"large\"\r\n                startIcon={<ArrowBackIcon fontSize=\"large\" />}\r\n                onClick={_handleClose}\r\n              >\r\n                {t('APPS_NOTES')}\r\n              </Button>\r\n            </Box>\r\n            <TextField\r\n              className={classes.input}\r\n              rowsMax={1}\r\n              label={t('GENERIC_TITLE')}\r\n              inputProps={{\r\n                className: classes.inputPropsTitle,\r\n                maxLength: 25,\r\n              }}\r\n              fullWidth\r\n              value={noteTitle}\r\n              onChange={handleTitleChange}\r\n            />\r\n            <TextField\r\n              className={classes.input}\r\n              inputProps={{\r\n                className: classes.inputPropsContent,\r\n                maxLength: 250,\r\n              }}\r\n              label={t('GENERIC_CONTENT')}\r\n              multiline\r\n              fullWidth\r\n              rows={16}\r\n              variant=\"outlined\"\r\n              value={noteContent}\r\n              onChange={handleContentChange}\r\n            />\r\n            <Typography paragraph>{noteContent.length}/250</Typography>\r\n            {isNewNote ? (\r\n              <>\r\n                <Box display=\"inline\" p={1}>\r\n                  <Button\r\n                    color=\"primary\"\r\n                    variant=\"contained\"\r\n                    disabled={noteTitle.length <= 0}\r\n                    onClick={handleNoteSave}\r\n                  >\r\n                    {t('GENERIC_SAVE')}\r\n                  </Button>\r\n                </Box>\r\n                <Box display=\"inline\" p={1}>\r\n                  <StatusButton color=\"error\" variant=\"contained\" onClick={_handleClose}>\r\n                    {t('GENERIC_CANCEL')}\r\n                  </StatusButton>\r\n                </Box>\r\n              </>\r\n            ) : (\r\n              <>\r\n                <Box display=\"inline\" p={1}>\r\n                  <Button\r\n                    color=\"primary\"\r\n                    variant=\"contained\"\r\n                    onClick={handleUpdateNote}\r\n                    disabled={noteTitle.length <= 0}\r\n                  >\r\n                    {t('GENERIC_UPDATE')}\r\n                  </Button>\r\n                </Box>\r\n                <Box display=\"inline\" p={1}>\r\n                  <StatusButton color=\"error\" variant=\"contained\" onClick={handleDeleteNote}>\r\n                    {t('GENERIC_DELETE')}\r\n                  </StatusButton>\r\n                </Box>\r\n              </>\r\n            )}\r\n          </Box>\r\n        </Container>\r\n      </Paper>\r\n    </Slide>\r\n  );\r\n};\r\n","import { makeStyles } from '@material-ui/core';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  backgroundModal: {\r\n    background: 'black',\r\n    opacity: '0.6',\r\n    position: 'absolute',\r\n    top: 0,\r\n    left: 0,\r\n    right: 0,\r\n    bottom: 0,\r\n    zIndex: 5,\r\n  },\r\n  absolute: {\r\n    position: 'absolute',\r\n    right: theme.spacing(3),\r\n    bottom: theme.spacing(5),\r\n  },\r\n}));\r\n\r\nexport default useStyles;\r\n","import { common, yellow } from '@material-ui/core/colors';\r\n\r\nexport const NOTES_APP_PRIMARY_COLOR = yellow[800];\r\nexport const NOTES_APP_ICON_COLOR = common.white;\r\nexport const NOTES_APP_TEXT_COLOR = common.black;\r\n\r\nconst theme = {\r\n  palette: {\r\n    primary: {\r\n      main: NOTES_APP_PRIMARY_COLOR,\r\n      dark: yellow[900],\r\n      light: yellow[500],\r\n      contrastText: NOTES_APP_TEXT_COLOR,\r\n    },\r\n  },\r\n};\r\n\r\nexport default theme;\r\n","import { createAppThemeProvider } from '../../../os/apps/utils/createAppThemeProvider';\r\nimport notesTheme from '../notes.theme';\r\n\r\nexport const NotesThemeProvider = createAppThemeProvider(notesTheme);\r\n","import React from 'react';\r\nimport { AppWrapper } from '../../ui/components';\r\nimport { AppContent } from '../../ui/components/AppContent';\r\nimport { AppTitle } from '../../ui/components/AppTitle';\r\nimport { useApp } from '../../os/apps/hooks/useApps';\r\nimport NoteList from './list/NoteList';\r\nimport { NoteModal } from './modal/NoteModal';\r\nimport { Fab } from '@material-ui/core';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport useStyles from './notes.styles';\r\nimport { NotesThemeProvider } from './providers/NotesThemeProvider';\r\nimport { Route } from 'react-router-dom';\r\nimport { useSetSelectedNote } from './hooks/state';\r\nimport { LoadingSpinner } from '../../ui/components/LoadingSpinner';\r\n\r\nexport const NotesApp = () => {\r\n  const classes = useStyles();\r\n  const notesApp = useApp('NOTES');\r\n  const setSelectedNote = useSetSelectedNote();\r\n\r\n  const onClickCreate = () => {\r\n    setSelectedNote({ title: '', content: '' });\r\n  };\r\n\r\n  return (\r\n    <NotesThemeProvider>\r\n      <AppWrapper id=\"notes-app\">\r\n        <AppTitle app={notesApp} />\r\n        <NoteModal />\r\n        <AppContent>\r\n          <React.Suspense fallback={<LoadingSpinner />}>\r\n            <Route path=\"/notes\" component={NoteList} />\r\n          </React.Suspense>\r\n        </AppContent>\r\n        <Fab className={classes.absolute} onClick={onClickCreate} color=\"primary\">\r\n          <AddIcon />\r\n        </Fab>\r\n      </AppWrapper>\r\n    </NotesThemeProvider>\r\n  );\r\n};\r\n","import { makeStyles, Theme } from '@material-ui/core/styles';\r\n\r\nconst useStyles = makeStyles((theme: Theme) => ({\r\n  root: {\r\n    flexGrow: 1,\r\n  },\r\n  photo: {\r\n    border: '1px inset #fff',\r\n    height: 129,\r\n    width: 129,\r\n    maxWidth: 150,\r\n    maxHeight: 150,\r\n    backgroundPosition: 'center',\r\n    backgroundRepeat: 'no-repeat',\r\n    backgroundSize: 'cover',\r\n  },\r\n}));\r\n\r\nexport default useStyles;\r\n","import { atom } from 'recoil';\r\nimport { GalleryPhoto } from '../../../../../typings/photo';\r\n\r\nexport const photoState = {\r\n  photos: atom<GalleryPhoto[]>({\r\n    key: 'galleryPhotos',\r\n    default: [],\r\n  }),\r\n};\r\n","import React from 'react';\r\nimport { Box, Button, CircularProgress } from '@material-ui/core';\r\nimport useStyles from './grid.styles';\r\nimport { useCamera } from '../../hooks/useCamera';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { useQueryParams } from '../../../../common/hooks/useQueryParams';\r\nimport { addQueryToLocation } from '../../../../common/utils/addQueryToLocation';\r\nimport { getLocationFromUrl } from '../../../../common/utils/getLocationFromUrl';\r\n\r\nexport const GalleryGrid = () => {\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n  const query = useQueryParams();\r\n\r\n  const referal = query.referal ? decodeURIComponent(query.referal) : '/camera/image';\r\n\r\n  const { photos, isLoading, takePhoto } = useCamera();\r\n\r\n  const handlePhotoOpen = (photo) => {\r\n    history.push(addQueryToLocation(getLocationFromUrl(referal), 'image', photo.image));\r\n  };\r\n\r\n  if (!photos)\r\n    return (\r\n      <Box display=\"flex\" flexWrap=\"wrap\" alignContent=\"flex-start\" className={classes.root}>\r\n        <Box>\r\n          <Button onClick={takePhoto} style={{ borderRadius: 0 }} className={classes.photo}>\r\n            <AddIcon fontSize=\"large\" />\r\n          </Button>\r\n        </Box>\r\n      </Box>\r\n    );\r\n\r\n  return (\r\n    <div>\r\n      <Box display=\"flex\" flexWrap=\"wrap\" alignContent=\"flex-start\" className={classes.root}>\r\n        <Box>\r\n          <Button\r\n            disabled={isLoading}\r\n            onClick={takePhoto}\r\n            style={{ borderRadius: 0 }}\r\n            className={classes.photo}\r\n          >\r\n            {isLoading ? <CircularProgress /> : <AddIcon fontSize=\"large\" />}\r\n          </Button>\r\n        </Box>\r\n        {photos.map((photo) => (\r\n          <Box key={photo.id} onClick={() => handlePhotoOpen(photo)}>\r\n            <div style={{ backgroundImage: `url(${photo.image})` }} className={classes.photo} />\r\n          </Box>\r\n        ))}\r\n      </Box>\r\n    </div>\r\n  );\r\n};\r\n","import { useCallback, useState } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { SetterOrUpdater, useRecoilState } from 'recoil';\r\nimport { GalleryPhoto, PhotoEvents } from '../../../../../typings/photo';\r\nimport { useNuiEvent, useNuiCallback } from 'fivem-nui-react-lib/';\r\nimport { useSnackbar } from '../../../ui/hooks/useSnackbar';\r\nimport { photoState } from './state';\r\n\r\ninterface IUseCamera {\r\n  photos: GalleryPhoto[];\r\n  setPhotos: SetterOrUpdater<GalleryPhoto[]>;\r\n  takePhoto: () => void;\r\n  isLoading: boolean;\r\n}\r\n\r\nexport const useCamera = (): IUseCamera => {\r\n  const { t } = useTranslation();\r\n  const { addAlert } = useSnackbar();\r\n\r\n  const [photos, setPhotos] = useRecoilState<GalleryPhoto[]>(photoState.photos);\r\n\r\n  const [isUploading, setUploading] = useState(false);\r\n\r\n  const onPhotoSuccess = useCallback(\r\n    (photo) => {\r\n      setUploading(false);\r\n      if (!photo?.image) return;\r\n      setPhotos((curr) => [photo, ...curr]);\r\n    },\r\n    [setPhotos],\r\n  );\r\n\r\n  const onPhotoError = useCallback(\r\n    (i18nKey) => {\r\n      setUploading(false);\r\n      addAlert({ type: 'error', message: t(i18nKey) });\r\n    },\r\n    [addAlert, t],\r\n  );\r\n\r\n  const [_takePhoto] = useNuiCallback<void, GalleryPhoto>(\r\n    'CAMERA',\r\n    PhotoEvents.TAKE_PHOTO,\r\n    onPhotoSuccess,\r\n    onPhotoError,\r\n  );\r\n\r\n  useNuiEvent('CAMERA', PhotoEvents.UPLOAD_PHOTO, () => setUploading(true));\r\n\r\n  const takePhoto = () => {\r\n    // Timeout at 1 minute\r\n    _takePhoto(undefined, { timeout: 60000 });\r\n  };\r\n\r\n  return {\r\n    photos,\r\n    setPhotos,\r\n    takePhoto,\r\n    isLoading: isUploading,\r\n  };\r\n};\r\n","import qs from 'qs';\r\nimport url from 'parse-url';\r\n\r\ninterface IRouterLocation {\r\n  pathname: string;\r\n  search: string;\r\n}\r\n\r\nexport const addQueryToLocation = (\r\n  { pathname = '', search = '' }: Record<string, unknown> & IRouterLocation,\r\n  key = '',\r\n  value = '',\r\n) => {\r\n  const { query } = url(pathname + search);\r\n  return `${pathname}?${qs.stringify({\r\n    ...query,\r\n    [key]: value,\r\n  })}`;\r\n};\r\n","import parseUrl from 'parse-url';\r\n\r\nexport const getLocationFromUrl = (url: String) => {\r\n  const { pathname, search } = parseUrl(url);\r\n  const searchStr = '?' + (search || '');\r\n  return { pathname, search: searchStr };\r\n};\r\n","import { makeStyles, Theme } from '@material-ui/core/styles';\r\n\r\nconst useStyles = makeStyles((theme: Theme) => ({\r\n  backgroundModal: {\r\n    background: 'black',\r\n    opacity: '0.6',\r\n    position: 'absolute',\r\n    top: 0,\r\n    left: 0,\r\n    right: 0,\r\n    bottom: 0,\r\n    zIndex: 5,\r\n  },\r\n  modal: {\r\n    position: 'absolute',\r\n    height: '100%',\r\n    width: '100%',\r\n  },\r\n  modalHide: {\r\n    display: 'none',\r\n  },\r\n  image: {\r\n    width: 'auto',\r\n    height: 380,\r\n    maxWidth: 'auto',\r\n    maxHeight: 380,\r\n    backgroundPosition: 'center',\r\n    backgroundSize: 'cover',\r\n    backgroundRepeat: 'no-repeat',\r\n    marginTop: '4em',\r\n  },\r\n  actionDiv: {\r\n    marginTop: 15,\r\n    display: 'flex',\r\n    justifyContent: 'space-evenly',\r\n  },\r\n\r\n  // share modal\r\n  shareModal: {\r\n    marginBottom: 50,\r\n  },\r\n  innerShareModal: {\r\n    marginTop: 40,\r\n    textAlign: 'center',\r\n  },\r\n}));\r\n\r\nexport default useStyles;\r\n","import React from 'react';\r\nimport Modal from '../../../../ui/components/Modal';\r\nimport { Button } from '@material-ui/core';\r\nimport MessageIcon from '@material-ui/icons/Message';\r\nimport { setClipboard } from '../../../../os/phone/hooks/useClipboard';\r\n\r\nimport useStyles from './modal.styles';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { GalleryPhoto } from '../../../../../../typings/photo';\r\n\r\ninterface IShareModalProps {\r\n  meta: GalleryPhoto;\r\n  referal: string;\r\n  onClose(): void;\r\n}\r\n\r\nexport const ShareModal = ({ meta, onClose, referal }: IShareModalProps) => {\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n\r\n  const handleCopyImage = () => {\r\n    setClipboard(meta.image);\r\n    history.push(referal);\r\n  };\r\n\r\n  return (\r\n    <Modal visible={!!meta} handleClose={onClose}>\r\n      <div className={classes.shareModal}>\r\n        <div className={classes.innerShareModal}>\r\n          <>\r\n            <h4 style={{ textAlign: 'center', marginTop: 20 }}>\r\n              Where do you want to share the photo?\r\n            </h4>\r\n            <Button>{<MessageIcon />} Message</Button>\r\n            <h4>Or just copy the image here:</h4>\r\n            <Button onClick={handleCopyImage} variant=\"contained\">\r\n              Copy image\r\n            </Button>\r\n          </>\r\n        </div>\r\n      </div>\r\n    </Modal>\r\n  );\r\n};\r\n","import React, { useMemo, useState, useCallback } from 'react';\r\nimport useStyles from './modal.styles';\r\nimport { Button, Paper } from '@material-ui/core';\r\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport ShareIcon from '@material-ui/icons/Share';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { useQueryParams } from '../../../../common/hooks/useQueryParams';\r\nimport { ShareModal } from './ShareModal';\r\nimport { GalleryPhoto, PhotoEvents } from '../../../../../../typings/photo';\r\nimport { useNuiRequest } from 'fivem-nui-react-lib';\r\n\r\nexport const GalleryModal = () => {\r\n  const Nui = useNuiRequest();\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n  const query = useQueryParams();\r\n  const referal = query.referal || '/camera';\r\n\r\n  const [shareOpen, setShareOpen] = useState(null);\r\n\r\n  const meta: GalleryPhoto = useMemo(\r\n    () => ({ id: parseInt(query.id), image: query.image as string }),\r\n    [query],\r\n  );\r\n\r\n  const _handleClose = () => {\r\n    history.push(referal);\r\n  };\r\n\r\n  const handleDeletePhoto = () => {\r\n    Nui.send(PhotoEvents.DELETE_PHOTO, {\r\n      image: meta.image,\r\n    });\r\n    history.push(referal);\r\n  };\r\n\r\n  const handleSharePhoto = useCallback(() => {\r\n    setShareOpen(meta);\r\n  }, [meta]);\r\n\r\n  if (!meta) return null;\r\n\r\n  return (\r\n    <>\r\n      <ShareModal referal={referal} meta={shareOpen} onClose={() => setShareOpen(null)} />\r\n      <Paper className={classes.modal}>\r\n        <div className={shareOpen ? classes.backgroundModal : null} />\r\n        <Button onClick={_handleClose}>\r\n          <ArrowBackIcon />\r\n        </Button>\r\n        <div className={classes.image} style={{ backgroundImage: `url(${meta.image})` }} />\r\n        <div className={classes.actionDiv}>\r\n          <Button onClick={handleDeletePhoto}>\r\n            <DeleteIcon fontSize=\"large\" />\r\n          </Button>\r\n          <Button onClick={handleSharePhoto}>\r\n            <ShareIcon fontSize=\"large\" />\r\n          </Button>\r\n        </div>\r\n      </Paper>\r\n    </>\r\n  );\r\n};\r\n","import React from 'react';\r\nimport { AppWrapper } from '../../../ui/components';\r\nimport { AppContent } from '../../../ui/components/AppContent';\r\nimport { GalleryGrid } from './grid/GalleryGrid';\r\nimport { GalleryModal } from './modal/GalleryModal';\r\nimport InjectDebugData from '../../../os/debug/InjectDebugData';\r\nimport { Route, Switch } from 'react-router-dom';\r\nimport { PhotoEvents } from '../../../../../typings/photo';\r\n\r\nInjectDebugData([\r\n  {\r\n    app: 'CAMERA',\r\n    method: PhotoEvents.SEND_PHOTOS,\r\n    data: [\r\n      {\r\n        id: 1,\r\n        image: 'https://beta.iodine.gg/noDcb.jpeg',\r\n      },\r\n      {\r\n        id: 2,\r\n        image: 'https://beta.iodine.gg/teUcY.jpeg',\r\n      },\r\n    ],\r\n  },\r\n]);\r\n\r\nconst CameraApp = () => {\r\n  return (\r\n    <AppWrapper id=\"camera-app\">\r\n      <AppContent>\r\n        <Switch>\r\n          <Route path=\"/camera\" exact component={GalleryGrid} />\r\n          <Route path=\"/camera/image\" exact component={GalleryModal} />\r\n        </Switch>\r\n      </AppContent>\r\n    </AppWrapper>\r\n  );\r\n};\r\n\r\nexport default CameraApp;\r\n","import { memo, useEffect } from 'react';\r\nimport { useNuiRequest } from 'fivem-nui-react-lib';\r\n\r\nconst Component = ({ children, id, emitOnOpen }) => {\r\n  const Nui = useNuiRequest();\r\n  useEffect(() => {\r\n    if (emitOnOpen) Nui.send(`npwd:app:${id}`);\r\n  }, [Nui, id, emitOnOpen]);\r\n  return children;\r\n};\r\n\r\nconst AppWithStartup = memo(Component, () => true);\r\n\r\nexport { AppWithStartup };\r\n","import React from 'react';\r\nimport { Route } from 'react-router-dom';\r\nimport { AppWithStartup } from './AppWithStartup';\r\n\r\nexport const AppRoute = ({ id, emitOnOpen, component: Component, ...rest }) => {\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={() => (\r\n        <AppWithStartup id={id} emitOnOpen={emitOnOpen}>\r\n          <Component />\r\n        </AppWithStartup>\r\n      )}\r\n    />\r\n  );\r\n};\r\n","import React from 'react';\r\nimport { blue, common, grey, purple } from '@material-ui/core/colors';\r\nimport { DialerApp } from '../../../apps/dialer/components/DialerApp';\r\nimport { ContactsApp } from '../../../apps/contacts/components/ContactsApp';\r\nimport { CalculatorApp } from '../../../apps/calculator/components/CalculatorApp';\r\nimport { SettingsApp } from '../../../apps/settings/components/SettingsApp';\r\nimport { MessagesApp } from '../../../apps/messages/components/MessagesApp';\r\nimport { MatchApp } from '../../../apps/match/components/MatchApp';\r\nimport { TwitterApp } from '../../../apps/twitter/components/TwitterApp';\r\nimport { ExampleApp } from '../../../apps/example/components/ExampleApp';\r\nimport { MarketplaceApp } from '../../../apps/marketplace/components/MarketplaceApp';\r\nimport { NotesApp } from '../../../apps/notes/NotesApp';\r\nimport CameraApp from '../../../apps/camera/components/CameraApp';\r\nimport { AppRoute } from '../components/AppRoute';\r\n\r\nimport {\r\n  MESSAGES_APP_PRIMARY_COLOR,\r\n  MESSAGES_APP_TEXT_COLOR,\r\n} from '../../../apps/messages/messages.theme';\r\nimport {\r\n  CONTACTS_APP_PRIMARY_COLOR,\r\n  CONTACTS_APP_TEXT_COLOR,\r\n} from '../../../apps/contacts/contacts.theme';\r\nimport {\r\n  SELLOUT_APP_PRIMARY_COLOR,\r\n  SELLOUT_APP_ICON_COLOR,\r\n} from '../../../apps/marketplace/marketplace.theme';\r\nimport { NOTES_APP_ICON_COLOR, NOTES_APP_PRIMARY_COLOR } from '../../../apps/notes/notes.theme';\r\nimport { DIALER_APP_PRIMARY_COLOR, DIALER_APP_TEXT_COLOR } from '../../../apps/dialer/dialer.theme';\r\nimport {\r\n  TWITTER_APP_PRIMARY_COLOR,\r\n  TWITTER_APP_TEXT_COLOR,\r\n} from '../../../apps/twitter/twitter.theme';\r\nimport { MATCH_APP_PRIMARY_COLOR, MATCH_APP_TEXT_COLOR } from '../../../apps/match/match.theme';\r\nimport { SvgIconProps } from '@material-ui/core';\r\nimport { INotificationIcon } from '../../notifications/providers/NotificationsProvider';\r\n\r\nexport interface IAppConfig {\r\n  id: string;\r\n  nameLocale: string;\r\n  backgroundColor: string;\r\n  color: string;\r\n  path: string;\r\n  Route: React.FC;\r\n}\r\n\r\nexport type IApp = IAppConfig & {\r\n  notification: INotificationIcon;\r\n  icon: JSX.Element;\r\n  notificationIcon: JSX.Element;\r\n  NotificationIcon: React.FC<SvgIconProps>;\r\n  Icon?: React.FC<SvgIconProps>;\r\n};\r\n\r\nexport const APPS: IAppConfig[] = [\r\n  {\r\n    id: 'DIALER',\r\n    nameLocale: 'APPS_DIALER',\r\n    backgroundColor: DIALER_APP_PRIMARY_COLOR,\r\n    color: DIALER_APP_TEXT_COLOR,\r\n    path: '/phone',\r\n    Route: () => <AppRoute id=\"DIALER\" path=\"/phone\" component={DialerApp} emitOnOpen={false} />,\r\n  },\r\n  {\r\n    id: 'MESSAGES',\r\n    nameLocale: 'APPS_MESSAGES',\r\n    backgroundColor: MESSAGES_APP_PRIMARY_COLOR,\r\n    color: MESSAGES_APP_TEXT_COLOR,\r\n    path: '/messages',\r\n    Route: () => (\r\n      <AppRoute id=\"MESSAGES\" path=\"/messages\" component={MessagesApp} emitOnOpen={true} />\r\n    ),\r\n  },\r\n  {\r\n    id: 'CONTACTS',\r\n    nameLocale: 'APPS_CONTACTS',\r\n    backgroundColor: CONTACTS_APP_PRIMARY_COLOR,\r\n    color: CONTACTS_APP_TEXT_COLOR,\r\n    path: '/contacts',\r\n    Route: () => (\r\n      <AppRoute id=\"CONTACTS\" path=\"/contacts\" component={ContactsApp} emitOnOpen={false} />\r\n    ),\r\n  },\r\n  {\r\n    id: 'CALCULATOR',\r\n    nameLocale: 'APPS_CALCULATOR',\r\n    backgroundColor: purple[500],\r\n    color: grey[50],\r\n    path: '/calculator',\r\n    Route: () => (\r\n      <AppRoute id=\"CALCULATOR\" path=\"/calculator\" component={CalculatorApp} emitOnOpen={false} />\r\n    ),\r\n  },\r\n  {\r\n    id: 'SETTINGS',\r\n    nameLocale: 'APPS_SETTINGS',\r\n    backgroundColor: '#383838',\r\n    color: grey[50],\r\n    path: '/settings',\r\n    Route: () => (\r\n      <AppRoute id=\"SETTINGS\" path=\"/settings\" component={SettingsApp} emitOnOpen={false} />\r\n    ),\r\n  },\r\n  /* Hiding the bank app while the bank resource gets done */\r\n  /*{\r\n    id: 'BANK',\r\n    nameLocale: 'APPS_BANK',\r\n    backgroundColor: blue[900],\r\n    color: common.white,\r\n    path: '/bank',\r\n    Route: () => <AppRoute id=\"BANK\" path=\"/bank\" component={BankApp} />,\r\n  },*/\r\n  {\r\n    id: 'MATCH',\r\n    nameLocale: 'APPS_MATCH',\r\n    backgroundColor: MATCH_APP_PRIMARY_COLOR,\r\n    color: MATCH_APP_TEXT_COLOR,\r\n    path: '/match',\r\n    Route: () => <AppRoute id=\"MATCH\" path=\"/match\" component={MatchApp} emitOnOpen={true} />,\r\n  },\r\n  {\r\n    id: 'TWITTER',\r\n    nameLocale: 'APPS_TWITTER',\r\n    backgroundColor: TWITTER_APP_PRIMARY_COLOR,\r\n    color: TWITTER_APP_TEXT_COLOR,\r\n    path: '/twitter',\r\n    Route: () => <AppRoute id=\"TWITTER\" path=\"/twitter\" component={TwitterApp} emitOnOpen={true} />,\r\n  },\r\n  {\r\n    id: 'MARKETPLACE',\r\n    nameLocale: 'APPS_MARKETPLACE',\r\n    backgroundColor: SELLOUT_APP_PRIMARY_COLOR,\r\n    color: SELLOUT_APP_ICON_COLOR,\r\n    path: '/marketplace',\r\n    Route: () => (\r\n      <AppRoute\r\n        id=\"MARKETPLACE\"\r\n        path=\"/marketplace\"\r\n        component={MarketplaceApp}\r\n        emitOnOpen={false}\r\n      />\r\n    ),\r\n  },\r\n  {\r\n    id: 'NOTES',\r\n    nameLocale: 'APPS_NOTES',\r\n    backgroundColor: NOTES_APP_PRIMARY_COLOR,\r\n    color: NOTES_APP_ICON_COLOR,\r\n    path: '/notes',\r\n    Route: () => <AppRoute id=\"NOTES\" path=\"/notes\" component={NotesApp} emitOnOpen={true} />,\r\n  },\r\n  {\r\n    id: 'CAMERA',\r\n    nameLocale: 'APPS_CAMERA',\r\n    backgroundColor: grey['A400'],\r\n    color: common.white,\r\n    path: '/camera',\r\n    Route: () => <AppRoute id=\"CAMERA\" path=\"/camera\" component={CameraApp} emitOnOpen={true} />,\r\n  },\r\n];\r\n\r\n// Example app only in dev\r\nif (process.env.NODE_ENV === 'development') {\r\n  APPS.push({\r\n    id: 'EXAMPLE',\r\n    nameLocale: 'APPS_EXAMPLE',\r\n    backgroundColor: blue[500],\r\n    color: blue[50],\r\n    path: '/example',\r\n    Route: () => (\r\n      <AppRoute id=\"EXAMPLE\" path=\"/example\" component={ExampleApp} emitOnOpen={false} />\r\n    ),\r\n  });\r\n}\r\n","import React, { useCallback, useMemo } from 'react';\r\nimport { useNotifications } from '../../notifications/hooks/useNotifications';\r\nimport { createLazyAppIcon } from '../utils/createLazyAppIcon';\r\nimport { APPS, IApp } from '../config/apps';\r\nimport { SvgIconComponent } from '@material-ui/icons';\r\nimport { useTheme } from '@material-ui/core';\r\nimport { useSettings, useSettingsValue } from '../../../apps/settings/hooks/useSettings';\r\n\r\nexport interface IconSetObject {\r\n  custom: boolean;\r\n  name: string;\r\n}\r\n\r\nexport const useApps = () => {\r\n  const { icons } = useNotifications();\r\n  const theme = useTheme();\r\n  const curIconSet = useSettingsValue().iconSet.value as IconSetObject;\r\n\r\n  const apps: IApp[] = useMemo(() => {\r\n    return APPS.map((app) => {\r\n      const SvgIcon = React.lazy<SvgIconComponent>(\r\n        () => import(`${__dirname}/../icons/${curIconSet.name}/svg/${app.id}`),\r\n      );\r\n      const AppIcon = React.lazy<SvgIconComponent>(\r\n        () => import(`${__dirname}/../icons/${curIconSet.name}/app/${app.id}`),\r\n      );\r\n\r\n      const NotificationIcon = createLazyAppIcon(SvgIcon);\r\n      const Icon = createLazyAppIcon(AppIcon);\r\n\r\n      if (curIconSet.custom) {\r\n        return {\r\n          ...app,\r\n          notification: icons.find((i) => i.key === app.id),\r\n          NotificationIcon,\r\n          Icon,\r\n          notificationIcon: (\r\n            <NotificationIcon htmlColor={theme.palette.text.primary} fontSize=\"small\" />\r\n          ),\r\n          icon: <Icon />,\r\n        };\r\n      }\r\n\r\n      return {\r\n        ...app,\r\n        notification: icons.find((i) => i.key === app.id),\r\n        NotificationIcon,\r\n        notificationIcon: <NotificationIcon htmlColor={app.color} fontSize=\"small\" />,\r\n        icon: <Icon />,\r\n      };\r\n    });\r\n  }, [icons, curIconSet, theme]);\r\n\r\n  const getApp = useCallback((id: string): IApp => apps.find((a) => a.id === id) || null, [apps]);\r\n  return { apps, getApp };\r\n};\r\n\r\nexport const useApp = (id: string): IApp => {\r\n  const { getApp } = useApps();\r\n  return getApp(id);\r\n};\r\n","import React from 'react';\r\nimport { AppWrapper } from '../../../ui/components';\r\nimport { Box } from '@material-ui/core';\r\nimport { GridMenu } from '../../../ui/components/GridMenu';\r\nimport { useApps } from '../../../os/apps/hooks/useApps';\r\n\r\nexport const HomeApp = () => {\r\n  const { apps } = useApps();\r\n  return (\r\n    <AppWrapper>\r\n      <Box component=\"div\" mt={6} px={1}>\r\n        {apps && <GridMenu xs={3} items={apps} />}\r\n      </Box>\r\n    </AppWrapper>\r\n  );\r\n};\r\n","import React from 'react';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport {\r\n  IconButton,\r\n  ListItem,\r\n  ListItemAvatar,\r\n  ListItemText,\r\n  makeStyles,\r\n  Theme,\r\n} from '@material-ui/core';\r\nimport { INotification } from '../providers/NotificationsProvider';\r\n\r\nconst useStyles = makeStyles<Theme, { cantClose: boolean }>((theme) => ({\r\n  closeNotifBtn: {\r\n    position: 'absolute',\r\n    right: '8px',\r\n    top: '8px',\r\n  },\r\n  notificationItem: {\r\n    paddingRight: ({ cantClose }) => (cantClose ? '8px' : '28px'),\r\n    position: 'relative',\r\n  },\r\n}));\r\n\r\nexport const NotificationItem = ({\r\n  onClose,\r\n  onClickClose,\r\n  ...notification\r\n}: INotification & {\r\n  onClose: (e: any) => void;\r\n  onClickClose: (e: any) => void;\r\n}) => {\r\n  const { title, icon, content, cantClose, onClick } = notification;\r\n  const classes = useStyles({ cantClose });\r\n\r\n  return (\r\n    <ListItem\r\n      divider\r\n      button\r\n      onClick={(e) => {\r\n        if (onClick) {\r\n          onClick(notification);\r\n          onClickClose(e);\r\n        }\r\n      }}\r\n      className={classes.notificationItem}\r\n    >\r\n      {icon && <ListItemAvatar>{icon}</ListItemAvatar>}\r\n      <ListItemText secondary={content}>{title}</ListItemText>\r\n      {!cantClose && (\r\n        <IconButton className={classes.closeNotifBtn} size=\"small\" onClick={onClose}>\r\n          <CloseIcon color=\"primary\" />\r\n        </IconButton>\r\n      )}\r\n    </ListItem>\r\n  );\r\n};\r\n","import { useRecoilValue } from 'recoil';\r\nimport { phoneState } from './state';\r\n\r\nconst usePhoneTime = () => {\r\n  return useRecoilValue<null | string>(phoneState.phoneTime);\r\n};\r\n\r\nexport default usePhoneTime;\r\n","import React, { useEffect } from 'react';\r\nimport {\r\n  makeStyles,\r\n  Typography,\r\n  Grid,\r\n  IconButton,\r\n  Slide,\r\n  Paper,\r\n  Box,\r\n  List,\r\n  Divider,\r\n} from '@material-ui/core';\r\nimport SignalIcon from '@material-ui/icons/SignalCellular3Bar';\r\nimport Battery90Icon from '@material-ui/icons/Battery90';\r\nimport ArrowDropUpIcon from '@material-ui/icons/ArrowDropUp';\r\nimport Default from '../../../config/default.json';\r\nimport { useNotifications } from '../hooks/useNotifications';\r\nimport { NotificationItem } from './NotificationItem';\r\nimport usePhoneTime from '../../phone/hooks/usePhoneTime';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    backgroundColor: theme.palette.background.default,\r\n    height: '30px',\r\n    width: '100%',\r\n    color: theme.palette.text.primary,\r\n    zIndex: 99,\r\n    paddingLeft: '15px',\r\n    paddingRight: '10px',\r\n    position: 'relative',\r\n    '&:hover': {\r\n      cursor: 'pointer',\r\n    },\r\n  },\r\n  item: {\r\n    margin: '0 6px',\r\n  },\r\n  text: {\r\n    position: 'relative',\r\n    lineHeight: '30px',\r\n    color: theme.palette.text.primary,\r\n  },\r\n  icon: {\r\n    padding: '4px',\r\n    color: theme.palette.text.primary,\r\n  },\r\n  drawer: {\r\n    backgroundColor: theme.palette.background.default,\r\n    width: '100%',\r\n    position: 'absolute',\r\n    top: '30px',\r\n    zIndex: 98,\r\n  },\r\n  closeNotifBtn: {\r\n    position: 'absolute',\r\n    right: '8px',\r\n    top: '8px',\r\n  },\r\n  notificationItem: {\r\n    position: 'relative',\r\n  },\r\n  collapseBtn: {\r\n    margin: '0 auto',\r\n  },\r\n}));\r\n\r\nexport const NotificationBar = () => {\r\n  const classes = useStyles();\r\n\r\n  const {\r\n    icons,\r\n    notifications,\r\n    removeNotification,\r\n    barUncollapsed,\r\n    setBarUncollapsed,\r\n  } = useNotifications();\r\n\r\n  const time = usePhoneTime();\r\n\r\n  useEffect(() => {\r\n    if (notifications.length === 0) {\r\n      setBarUncollapsed(false);\r\n    }\r\n  }, [notifications, setBarUncollapsed]);\r\n\r\n  return (\r\n    <>\r\n      <Grid\r\n        className={classes.root}\r\n        container\r\n        justify=\"space-between\"\r\n        wrap=\"nowrap\"\r\n        onClick={() => {\r\n          setBarUncollapsed((curr) => !curr);\r\n        }}\r\n      >\r\n        <Grid container item wrap=\"nowrap\">\r\n          {icons.map((notifIcon) => (\r\n            <Grid item key={notifIcon.key} component={IconButton} className={classes.icon}>\r\n              {notifIcon.icon}\r\n            </Grid>\r\n          ))}\r\n        </Grid>\r\n        {time && (\r\n          <Grid item className={classes.item}>\r\n            <Typography className={classes.text} variant=\"button\">\r\n              {time}\r\n            </Typography>\r\n          </Grid>\r\n        )}\r\n        <Grid container item wrap=\"nowrap\" justify=\"flex-end\" alignItems=\"center\">\r\n          <Grid item>\r\n            <SignalIcon fontSize=\"small\" />\r\n          </Grid>\r\n          <Grid item className={classes.item}>\r\n            <Typography className={classes.text} variant=\"button\">\r\n              {Default.cellProvider}\r\n            </Typography>\r\n          </Grid>\r\n          <Grid item>\r\n            <Battery90Icon style={{ transform: 'rotate(90deg)', display: 'block' }} />\r\n          </Grid>\r\n        </Grid>\r\n      </Grid>\r\n      <Slide direction=\"down\" in={barUncollapsed} mountOnEnter unmountOnExit>\r\n        <Paper square className={classes.drawer}>\r\n          <Box py={2}>\r\n            <List>\r\n              <Divider />\r\n              {notifications.map((notification, idx) => (\r\n                <NotificationItem\r\n                  key={idx}\r\n                  {...notification}\r\n                  onClose={(e) => {\r\n                    e.stopPropagation();\r\n                    notification.onClose?.(notification);\r\n                    removeNotification(idx);\r\n                  }}\r\n                  onClickClose={() => {\r\n                    setBarUncollapsed(false);\r\n                    if (!notification.cantClose) {\r\n                      removeNotification(idx);\r\n                    }\r\n                  }}\r\n                />\r\n              ))}\r\n            </List>\r\n          </Box>\r\n          <Box display=\"flex\">\r\n            <IconButton\r\n              className={classes.collapseBtn}\r\n              size=\"small\"\r\n              onClick={() => setBarUncollapsed(false)}\r\n            >\r\n              <ArrowDropUpIcon />\r\n            </IconButton>\r\n          </Box>\r\n        </Paper>\r\n      </Slide>\r\n    </>\r\n  );\r\n};\r\n","import React from 'react';\r\nimport { makeStyles, BottomNavigation, BottomNavigationAction } from '@material-ui/core';\r\nimport KeyboardArrowLeftIcon from '@material-ui/icons/KeyboardArrowLeft';\r\nimport AppsIcon from '@material-ui/icons/Apps';\r\nimport RadioButtonUncheckedIcon from '@material-ui/icons/RadioButtonUnchecked';\r\nimport { useHistory, useRouteMatch } from 'react-router-dom';\r\nimport { usePhone } from '../../phone/hooks/usePhone';\r\nimport { useNotifications } from '../../notifications/hooks/useNotifications';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    zIndex: 2,\r\n    backgroundColor: theme.palette.background.default,\r\n  },\r\n}));\r\n\r\nexport const Navigation = () => {\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n  const { isExact } = useRouteMatch('/');\r\n  const { closePhone } = usePhone();\r\n  const { setBarUncollapsed } = useNotifications();\r\n  return (\r\n    <BottomNavigation\r\n      className={classes.root}\r\n      onChange={(_e, value) => {\r\n        setBarUncollapsed(false);\r\n        value();\r\n      }}\r\n    >\r\n      <BottomNavigationAction\r\n        label=\"Back\"\r\n        value={() => !isExact && history.goBack()}\r\n        icon={<KeyboardArrowLeftIcon />}\r\n      />\r\n      <BottomNavigationAction label=\"Home\" value={() => history.push('/')} icon={<AppsIcon />} />\r\n      <BottomNavigationAction\r\n        label=\"Close\"\r\n        value={closePhone}\r\n        icon={<RadioButtonUncheckedIcon />}\r\n      />\r\n    </BottomNavigation>\r\n  );\r\n};\r\n","import { useSetRecoilState } from 'recoil';\r\nimport { simcardState } from './state';\r\nimport { useSimcard } from './useSimcard';\r\nimport InjectDebugData from '../../debug/InjectDebugData';\r\nimport { useNuiEvent } from 'fivem-nui-react-lib';\r\nimport { PhoneEvents } from '../../../../../typings/phone';\r\n\r\nInjectDebugData([\r\n  {\r\n    app: 'SIMCARD',\r\n    method: PhoneEvents.SET_NUMBER,\r\n    data: '111-1134',\r\n  },\r\n]);\r\n\r\nexport const useSimcardService = () => {\r\n  const setNumber = useSetRecoilState(simcardState.number);\r\n  useNuiEvent('SIMCARD', PhoneEvents.SET_NUMBER, setNumber);\r\n  return useSimcard();\r\n};\r\n","import { useRecoilState, useSetRecoilState } from 'recoil';\r\nimport { v4 as uuidv4 } from 'uuid';\r\n\r\nimport { useNuiEvent } from 'fivem-nui-react-lib';\r\nimport { IMAGE_DELIMITER } from '../utils/images';\r\nimport { APP_TWITTER } from '../utils/constants';\r\nimport { twitterState } from './state';\r\nimport { IAlert, useSnackbar } from '../../../ui/hooks/useSnackbar';\r\nimport { useTwitterNotifications } from './useTwitterNotifications';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { Tweet, FormattedTweet, Profile, TwitterEvents } from '../../../../../typings/twitter';\r\n\r\n/**\r\n * Perform all necessary processing/transforms from the raw database\r\n * data to what the frontend expects\r\n * @param {object} tweet - full JSON returned from the server/database\r\n */\r\nfunction processTweet(tweet: Tweet): FormattedTweet {\r\n  // we store images in the database as a varchar field with\r\n  // comma separated links to images, so here we split them\r\n  // back into their distinct members\r\n  const imageLinks = tweet.images ? tweet.images.split(IMAGE_DELIMITER) : [];\r\n  const images = imageLinks.map((link) => ({ id: uuidv4(), link }));\r\n  return { ...tweet, images };\r\n}\r\n\r\n/**\r\n * in the case a tweet is broadcasted we can make some assumptions\r\n * that it is brand new and hasn't been liked. We should also need\r\n * to overwrite isMine since that will be true (sourced from another\r\n * player's tweet)\r\n}\r\n * @param tweet - tweet to process\r\n * @param playerIdentifier - the current player's identifier\r\n * @returns Formatted Tweet\r\n */\r\nfunction processBroadcastedTweet(tweet: Tweet, profile: Profile): FormattedTweet {\r\n  const processedTweet = processTweet(tweet);\r\n  const isLiked = false;\r\n  const isMine = profile?.identifier === tweet.identifier;\r\n  return { ...processedTweet, isMine, isLiked };\r\n}\r\n\r\n/**\r\n * Service to handle all NUI <> client interactions. We take\r\n * this opportunity to act as a middleware layer between the\r\n * client and the react components. Because I'm terrible with lua\r\n * I have given up on parsing/cleaning database query results there\r\n * there and have moved that logic here instead.\r\n */\r\nexport const useTwitterService = () => {\r\n  const { addAlert } = useSnackbar();\r\n  const { setNotification } = useTwitterNotifications();\r\n  const { t } = useTranslation();\r\n\r\n  const [profile, setProfile] = useRecoilState<Profile>(twitterState.profile);\r\n  const setUpdateProfileLoading = useSetRecoilState(twitterState.updateProfileLoading);\r\n\r\n  const [currentTweets, setTweets] = useRecoilState(twitterState.tweets);\r\n  const setFilteredTweets = useSetRecoilState(twitterState.filteredTweets);\r\n  const setCreateLoading = useSetRecoilState(twitterState.createTweetLoading);\r\n  const setDefaultProfileNames = useSetRecoilState(twitterState.defaultProfileNames);\r\n\r\n  const _setTweets = (tweets) => {\r\n    setTweets(tweets.map(processTweet));\r\n  };\r\n  const _setFilteredTweets = (tweets) => {\r\n    setFilteredTweets(tweets.map(processTweet));\r\n  };\r\n\r\n  // these tweets are coming directly from other player clients\r\n  const handleTweetBroadcast = (tweet: Tweet) => {\r\n    setNotification(tweet);\r\n    const processedTweet = processBroadcastedTweet(tweet, profile);\r\n    const updatedTweets = [processedTweet].concat(currentTweets);\r\n    setTweets(updatedTweets);\r\n  };\r\n\r\n  const handleAddAlert = ({ message, type }: IAlert) => {\r\n    addAlert({\r\n      message: t(`APPS_${message}`),\r\n      type,\r\n    });\r\n  };\r\n\r\n  useNuiEvent(APP_TWITTER, TwitterEvents.GET_OR_CREATE_PROFILE, setProfile);\r\n  useNuiEvent(APP_TWITTER, TwitterEvents.GET_OR_CREATE_PROFILE_NULL, setDefaultProfileNames);\r\n  useNuiEvent(APP_TWITTER, TwitterEvents.CREATE_PROFILE_RESULT, handleAddAlert);\r\n  useNuiEvent(APP_TWITTER, TwitterEvents.UPDATE_PROFILE_LOADING, setUpdateProfileLoading);\r\n  useNuiEvent(APP_TWITTER, TwitterEvents.UPDATE_PROFILE_RESULT, handleAddAlert);\r\n  useNuiEvent(APP_TWITTER, TwitterEvents.FETCH_TWEETS, _setTweets);\r\n  useNuiEvent(APP_TWITTER, TwitterEvents.FETCH_TWEETS_FILTERED, _setFilteredTweets);\r\n  useNuiEvent(APP_TWITTER, TwitterEvents.CREATE_TWEET_LOADING, setCreateLoading);\r\n  useNuiEvent(APP_TWITTER, TwitterEvents.CREATE_TWEET_RESULT, handleAddAlert);\r\n  useNuiEvent(APP_TWITTER, TwitterEvents.CREATE_TWEET_BROADCAST, handleTweetBroadcast);\r\n  useNuiEvent(APP_TWITTER, TwitterEvents.RETWEET_EXISTS, handleAddAlert);\r\n};\r\n","export interface IBankCredentials {\r\n  name: string;\r\n  balance: number;\r\n}\r\n\r\nexport interface Transfer {\r\n  id: number;\r\n  targetID: number;\r\n  source: string;\r\n  type: string;\r\n  transferAmount: number;\r\n  message: string;\r\n}\r\n\r\nexport interface ITransactions {\r\n  source: number;\r\n  type: string;\r\n  amount: number;\r\n}\r\n\r\nexport enum BankEvents {\r\n  ADD_TRANSFER = 'npwd:addTransfer',\r\n  ADD_TRANSFER_SUCCESS = 'npwd:addTransferSuccess',\r\n  FETCH_TRANSACTIONS = 'npwd:fetchAllTransactions',\r\n  SEND_TRANSFERS = 'npwd:sendTransfers',\r\n  TRANSACTION_ALERT = 'npwd:bankTransactionAlert',\r\n  TRANSACTION_NOTIFICATION = 'npwd:bankTransactionNotification',\r\n  SEND_CREDENTIALS = 'npwd:sendBankCredentials',\r\n  GET_CREDENTIALS = 'npwd:getBankCredentials',\r\n  SEND_ALERT = 'npwd:sendBankAlert',\r\n  SEND_NOTIFICATION = 'npwd:sendBankNotification',\r\n}\r\n","import { useCallback } from 'react';\r\nimport { useSetListings } from './state';\r\nimport { MarketplaceListing } from '../../../../../typings/marketplace';\r\n\r\ninterface MarketplaceActionValues {\r\n  deleteListing: (id: number) => void;\r\n  addListing: (listing: MarketplaceListing) => void;\r\n}\r\n\r\nexport const useMarketplaceActions = (): MarketplaceActionValues => {\r\n  const setListings = useSetListings();\r\n\r\n  const deleteListing = useCallback(\r\n    (id: number) => {\r\n      setListings((curListings) => [...curListings].filter((listing) => listing.id !== id));\r\n    },\r\n    [setListings],\r\n  );\r\n\r\n  const addListing = useCallback(\r\n    (listing: MarketplaceListing) => {\r\n      setListings((curListings) => [...curListings, listing]);\r\n    },\r\n    [setListings],\r\n  );\r\n\r\n  return { deleteListing, addListing };\r\n};\r\n","import { atom } from 'recoil';\r\n\r\nexport const bankState = {\r\n  transactions: atom({\r\n    key: 'transactionList',\r\n    default: [],\r\n  }),\r\n  bankModal: atom({\r\n    key: 'modalVisibility',\r\n    default: false,\r\n  }),\r\n  bankCredentials: atom({\r\n    key: 'bankCredentails',\r\n    default: null,\r\n  }),\r\n  notification: atom({\r\n    key: 'bankNotification',\r\n    default: null,\r\n  }),\r\n};\r\n","import { useNuiEvent } from 'fivem-nui-react-lib';\r\nimport { bankState } from './state';\r\nimport { useTransactions } from './useTransactions';\r\nimport { useCredentials } from './useCredentials';\r\nimport { useSetRecoilState } from 'recoil';\r\nimport { useBankNotification } from './useBankNotification';\r\nimport { IAlert, useSnackbar } from '../../../ui/hooks/useSnackbar';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { BankEvents } from '../../../../../typings/bank';\r\n\r\nexport const useBankService = () => {\r\n  const setTransaction = useSetRecoilState(bankState.transactions);\r\n  const setCredentials = useSetRecoilState(bankState.bankCredentials);\r\n  const setNotification = useSetRecoilState(bankState.notification);\r\n  const { addAlert } = useSnackbar();\r\n  const { t } = useTranslation();\r\n\r\n  const handleAddAlert = ({ message, type }: IAlert) => {\r\n    addAlert({\r\n      message: t(`APPS_${message}`),\r\n      type,\r\n    });\r\n  };\r\n\r\n  useNuiEvent('BANK', BankEvents.SEND_TRANSFERS, setTransaction);\r\n  useNuiEvent('BANK', BankEvents.SEND_CREDENTIALS, setCredentials);\r\n  useNuiEvent('BANK', BankEvents.SEND_ALERT, handleAddAlert);\r\n  useNuiEvent('BANK', BankEvents.SEND_NOTIFICATION, setNotification);\r\n  return { useTransactions, useCredentials, useBankNotification };\r\n};\r\n","import { useRecoilState, useSetRecoilState } from 'recoil';\r\nimport { messageState } from './state';\r\nimport { useNuiEvent, useNuiRequest } from 'fivem-nui-react-lib';\r\nimport { IAlert, useSnackbar } from '../../../ui/hooks/useSnackbar';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { useMessageNotifications } from './useMessageNotifications';\r\nimport { useCallback } from 'react';\r\nimport { useLocation } from 'react-router';\r\nimport { MessageEvents } from '../../../../../typings/messages';\r\nimport { TOptionsBase } from 'i18next';\r\n\r\nexport const useMessagesService = () => {\r\n  const Nui = useNuiRequest();\r\n  const { pathname } = useLocation();\r\n  const [activeMessageGroup, setActiveMessageGroup] = useRecoilState(\r\n    messageState.activeMessageGroup,\r\n  );\r\n  const setMessageGroups = useSetRecoilState(messageState.messageGroups);\r\n  const setMessages = useSetRecoilState(messageState.messages);\r\n  const setCreateMessageGroupResult = useSetRecoilState(messageState.createMessageGroupResult);\r\n  const { addAlert } = useSnackbar();\r\n  const { setNotification } = useMessageNotifications();\r\n  const { t } = useTranslation();\r\n\r\n  const handleAddAlert = useCallback(\r\n    ({ message, type, options = {} }: IAlert & { options: TOptionsBase }) => {\r\n      addAlert({\r\n        message: t(`${message}`, options),\r\n        type,\r\n      });\r\n    },\r\n    [addAlert, t],\r\n  );\r\n\r\n  const handleMessageBroadcast = useCallback(\r\n    ({ groupId, message }) => {\r\n      if (groupId === activeMessageGroup?.groupId) {\r\n        Nui.send(MessageEvents.FETCH_MESSAGES, { groupId: activeMessageGroup.groupId });\r\n        if (pathname.includes('messages/conversations')) {\r\n          // Dont trigger notification if conversation is open.\r\n          return;\r\n        }\r\n      }\r\n      setNotification({ groupId, message });\r\n    },\r\n    [activeMessageGroup, pathname, setNotification, Nui],\r\n  );\r\n\r\n  const _setMessageGroups = useCallback(\r\n    (groups) => {\r\n      if (activeMessageGroup && activeMessageGroup.groupId) {\r\n        setActiveMessageGroup(\r\n          (curr) => groups.find((g) => g.groupId === activeMessageGroup.groupId) || curr,\r\n        );\r\n      }\r\n      setMessageGroups(groups);\r\n    },\r\n    [activeMessageGroup, setActiveMessageGroup, setMessageGroups],\r\n  );\r\n\r\n  useNuiEvent('MESSAGES', MessageEvents.FETCH_MESSAGE_GROUPS_SUCCESS, _setMessageGroups);\r\n  useNuiEvent('MESSAGES', MessageEvents.FETCH_MESSAGES_SUCCESS, setMessages);\r\n  useNuiEvent('MESSAGES', MessageEvents.CREATE_MESSAGE_GROUP_SUCCESS, setCreateMessageGroupResult);\r\n  useNuiEvent('MESSAGES', MessageEvents.CREATE_MESSAGE_GROUP_FAILED, setCreateMessageGroupResult);\r\n  useNuiEvent('MESSAGES', MessageEvents.CREATE_MESSAGE_BROADCAST, handleMessageBroadcast);\r\n  useNuiEvent('MESSAGES', MessageEvents.ACTION_RESULT, handleAddAlert);\r\n};\r\n","import { useTranslation } from 'react-i18next';\r\nimport { matchPath, useHistory } from 'react-router-dom';\r\nimport { useApp } from '../../../os/apps/hooks/useApps';\r\nimport { useNotifications } from '../../../os/notifications/hooks/useNotifications';\r\nimport useMessages from './useMessages';\r\n\r\nconst NOTIFICATION_ID = 'messages:broadcast';\r\n\r\nexport const useMessageNotifications = () => {\r\n  const { t } = useTranslation();\r\n  const history = useHistory();\r\n  const { removeId, addNotification, addNotificationAlert } = useNotifications();\r\n  const { icon, notificationIcon } = useApp('MESSAGES');\r\n  const { getMessageGroupById, activeMessageGroup, goToConversation } = useMessages();\r\n\r\n  // Remove notifications from groups when opening them\r\n  history.listen((location) => {\r\n    if (\r\n      activeMessageGroup?.groupId &&\r\n      matchPath(location.pathname, {\r\n        path: `/messages/conversations/${activeMessageGroup.groupId}`,\r\n        exact: true,\r\n      })\r\n    ) {\r\n      removeId(`${NOTIFICATION_ID}:${activeMessageGroup.groupId}`);\r\n    }\r\n  });\r\n\r\n  const setNotification = ({ groupId, message }) => {\r\n    const group = getMessageGroupById(groupId);\r\n    if (!group) return;\r\n\r\n    const id = `${NOTIFICATION_ID}:${groupId}`;\r\n\r\n    const notification = {\r\n      app: 'MESSAGES',\r\n      id,\r\n      sound: true,\r\n      title: group.label || group.groupDisplay,\r\n      onClick: () => goToConversation(group),\r\n      content: message,\r\n      icon,\r\n      notificationIcon,\r\n    };\r\n\r\n    addNotificationAlert(notification, (n) => {\r\n      removeId(id);\r\n      if (group.unreadCount > 1) {\r\n        addNotification({\r\n          ...n,\r\n          title: group.label || group.groupDisplay,\r\n          content: t('APPS_MESSAGES_UNREAD_MESSAGES', {\r\n            count: group.unreadCount,\r\n          }),\r\n        });\r\n        return;\r\n      }\r\n      addNotification(n);\r\n    });\r\n  };\r\n\r\n  return { setNotification };\r\n};\r\n","import React from 'react';\r\nimport { Box, makeStyles } from '@material-ui/core';\r\nimport { CallControls } from './CallControls';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    paddingBottom: '48px',\r\n  },\r\n  controls: {\r\n    position: 'absolute',\r\n    bottom: theme.spacing(1),\r\n    right: '4px',\r\n  },\r\n}));\r\n\r\nexport const CallNotification = ({ children }: { children: React.ReactNode }) => {\r\n  const classes = useStyles();\r\n  return (\r\n    <div className={classes.root}>\r\n      <Box>{children}</Box>\r\n      <Box className={classes.controls}>\r\n        <CallControls isSmall />\r\n      </Box>\r\n    </div>\r\n  );\r\n};\r\n","import React from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { ActiveCall } from '../../../../../typings/call';\r\nimport { useApp } from '../../apps/hooks/useApps';\r\nimport { useNotifications } from '../../notifications/hooks/useNotifications';\r\nimport { useRingtoneSound } from '../../sound/hooks/useRingtoneSound';\r\nimport { CallNotification } from '../components/CallNotification';\r\n\r\nconst NOTIFICATION_ID = 'call:current';\r\n\r\nexport const useCallNotifications = () => {\r\n  const { t } = useTranslation();\r\n  const history = useHistory();\r\n  const { addNotificationAlert, removeId, addNotification } = useNotifications();\r\n\r\n  const { play, stop } = useRingtoneSound();\r\n\r\n  const { icon, notificationIcon } = useApp('DIALER');\r\n\r\n  const callNotificationBase = {\r\n    app: 'CALL',\r\n    id: NOTIFICATION_ID,\r\n    cantClose: true,\r\n    icon,\r\n    onClick: () => history.push('/call'),\r\n    notificationIcon,\r\n  };\r\n\r\n  const setNotification = (call: ActiveCall) => {\r\n    stop();\r\n    if (!call || !call.active) {\r\n      removeId(NOTIFICATION_ID);\r\n      return;\r\n    }\r\n    if (call.accepted) {\r\n      removeId(NOTIFICATION_ID);\r\n      addNotification({\r\n        ...callNotificationBase,\r\n        content: (\r\n          <CallNotification>\r\n            {t('APPS_DIALER_CURRENT_CALL_WITH', {\r\n              transmitter: call.transmitter,\r\n            })}\r\n          </CallNotification>\r\n        ),\r\n        title: t('APPS_DIALER_CURRENT_CALL_TITLE'),\r\n      });\r\n    }\r\n    if (!call.isTransmitter && !call.accepted) {\r\n      play();\r\n      removeId(NOTIFICATION_ID);\r\n      addNotificationAlert(\r\n        {\r\n          ...callNotificationBase,\r\n          title: t('APPS_DIALER_INCOMING_CALL_TITLE', {\r\n            transmitter: call.transmitter,\r\n          }),\r\n          keepWhenPhoneClosed: true,\r\n          content: (\r\n            <CallNotification>\r\n              {t('APPS_DIALER_TRANSMITTER_IS_CALLING', {\r\n                transmitter: call.transmitter,\r\n              })}\r\n            </CallNotification>\r\n          ),\r\n        },\r\n        (n) => addNotification(n),\r\n      );\r\n    }\r\n  };\r\n\r\n  return { setNotification };\r\n};\r\n","import { useEffect, useMemo } from 'react';\r\nimport { useSettings } from '../../../apps/settings/hooks/useSettings';\r\nimport { getSoundSettings } from '../utils/getSoundSettings';\r\nimport { useSoundProvider } from './useSoundProvider';\r\n\r\nexport const useRingtoneSound = () => {\r\n  const [settings] = useSettings();\r\n\r\n  const sound = useSoundProvider();\r\n\r\n  if (!sound) {\r\n    throw new Error('useRingtoneSound must be wrapped in SoundProvider');\r\n  }\r\n\r\n  const options = useMemo(() => getSoundSettings('ringtone', settings), [settings]);\r\n\r\n  useEffect(() => {\r\n    if (!sound.isMounted(options.sound)) {\r\n      sound.mount(options.sound, options.volume, true);\r\n      return;\r\n    }\r\n    sound.volume(options.sound, options.volume);\r\n  }, [sound, options.sound, options.volume]);\r\n\r\n  return {\r\n    play: () => sound.play(options.sound, options.volume, true),\r\n    stop: () => sound.stop(options.sound),\r\n    playing: () => sound.playing(options.sound),\r\n  };\r\n};\r\n","import React from 'react';\r\nimport MuiAlert from '@material-ui/lab/Alert';\r\nimport { makeStyles, Typography } from '@material-ui/core';\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    zIndex: 10000,\r\n  },\r\n  msg: {\r\n    maxWidth: '300px',\r\n    wordWrap: 'break-word',\r\n    fontSize: '1.1em',\r\n  },\r\n});\r\n\r\nexport function Alert({ children, ...props }) {\r\n  const classes = useStyles();\r\n  return (\r\n    <MuiAlert className={classes.root} elevation={4} variant=\"filled\" {...props}>\r\n      <Typography className={classes.msg}>{children}</Typography>\r\n    </MuiAlert>\r\n  );\r\n}\r\n\r\nexport default Alert;\r\n","import React from 'react';\r\nimport { makeStyles, Snackbar } from '@material-ui/core';\r\nimport { useSnackbar } from '../hooks/useSnackbar';\r\nimport Alert from './Alert';\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    height: 'auto',\r\n    width: 'auto',\r\n    overflow: 'auto',\r\n    margin: '0 auto',\r\n    position: 'absolute',\r\n    left: 0,\r\n    bottom: 75,\r\n    right: 0,\r\n    transform: 'none',\r\n  },\r\n});\r\n\r\nexport const PhoneSnackbar = () => {\r\n  const classes = useStyles();\r\n  const { alert, isOpen, handleClose } = useSnackbar();\r\n\r\n  return (\r\n    <Snackbar autoHideDuration={4000} open={isOpen} className={classes.root} onClose={handleClose}>\r\n      <Alert severity={alert?.type || 'info'}>{alert?.message || ''}</Alert>\r\n    </Snackbar>\r\n  );\r\n};\r\n","import React from 'react';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport { Box, IconButton, makeStyles, Slide } from '@material-ui/core';\r\nimport { useNotifications } from '../hooks/useNotifications';\r\nimport { Alert, AlertTitle } from '@material-ui/lab';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  snackbar: {\r\n    marginTop: '-710px',\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n  },\r\n  alert: {\r\n    '& .MuiAlert-action': {\r\n      top: theme.spacing(1),\r\n      right: theme.spacing(2),\r\n      position: 'absolute',\r\n    },\r\n    position: 'relative',\r\n    cursor: 'pointer',\r\n    width: '370px',\r\n    height: '120px',\r\n    zIndex: 50,\r\n    backgroundColor: theme.palette.background.paper,\r\n    color: theme.palette.text.primary,\r\n    '& .MuiAlert-icon': {\r\n      color: theme.palette.text.primary,\r\n    },\r\n  },\r\n  alertContent: {\r\n    wordBreak: 'break-all',\r\n    display: '-webkit-box',\r\n    maxWidth: '360px',\r\n    height: '60px',\r\n    margin: '0 auto',\r\n    '-webkit-line-clamp': 3,\r\n    '-webkit-box-orient': 'vertical',\r\n    overflow: 'hidden',\r\n    textOverflow: 'ellipsis',\r\n  },\r\n}));\r\n\r\nexport const NotificationAlert = () => {\r\n  const classes = useStyles();\r\n  const { currentAlert } = useNotifications();\r\n\r\n  return (\r\n    <div className={classes.snackbar}>\r\n      <Slide in={!!currentAlert} mountOnEnter unmountOnExit>\r\n        <Alert\r\n          action={\r\n            <IconButton\r\n              color=\"primary\"\r\n              size=\"small\"\r\n              onClick={(e) => {\r\n                e.stopPropagation();\r\n                currentAlert?.onCloseAlert(e);\r\n              }}\r\n            >\r\n              <CloseIcon fontSize=\"small\" />\r\n            </IconButton>\r\n          }\r\n          onClick={(e) => currentAlert?.onClickAlert(e)}\r\n          icon={currentAlert?.icon || false}\r\n          className={classes.alert}\r\n          elevation={6}\r\n        >\r\n          <AlertTitle>\r\n            <Box width=\"282px\" whiteSpace=\"nowrap\">\r\n              <Box overflow=\"hidden\" component=\"div\" textOverflow=\"ellipsis\">\r\n                {currentAlert?.title}\r\n              </Box>\r\n            </Box>\r\n          </AlertTitle>\r\n          <Box component=\"div\" className={classes.alertContent}>\r\n            {currentAlert?.content}\r\n          </Box>\r\n        </Alert>\r\n      </Slide>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState } from 'react';\r\nimport { Snackbar, Typography } from '@material-ui/core';\r\nimport { Alert } from './Alert';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { useNuiEvent } from 'fivem-nui-react-lib';\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    position: 'absolute',\r\n    width: 'auto',\r\n    bottom: 20,\r\n  },\r\n});\r\n// NOTE: Will make this more generic at some point for error handling as well\r\nconst WindowSnackbar = () => {\r\n  const [open, setOpen] = useState<boolean>(false);\r\n  const [message, setMessage] = useState<string>('');\r\n  const [severity, setSeverity] = useState<'info' | 'error' | 'success'>('info');\r\n\r\n  const classes = useStyles();\r\n\r\n  useNuiEvent('PHONE', 'startRestart', () => {\r\n    setMessage('Restarting UI');\r\n    setOpen(true);\r\n    setSeverity('error');\r\n    setTimeout(() => window.location.reload(), 3000);\r\n  });\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <Snackbar open={open} onClose={handleClose} className={classes.root}>\r\n      <Alert severity={severity}>\r\n        <Typography variant=\"body1\">Phone - {message}</Typography>\r\n      </Alert>\r\n    </Snackbar>\r\n  );\r\n};\r\n\r\nexport default WindowSnackbar;\r\n","import { useCallback, useEffect, useRef } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { atom, useSetRecoilState, useRecoilValue } from 'recoil';\r\nimport { usePhone } from '../../phone/hooks/usePhone';\r\n\r\nconst keyboardState = {\r\n  ArrowRight: atom({\r\n    key: 'ArrowRight',\r\n    default: null,\r\n  }),\r\n  ArrowLeft: atom({\r\n    key: 'ArrowLeft',\r\n    default: null,\r\n  }),\r\n  ArrowUp: atom({\r\n    key: 'ArrowUp',\r\n    default: null,\r\n  }),\r\n  ArrowDown: atom({\r\n    key: 'ArrowDown',\r\n    default: null,\r\n  }),\r\n  Backspace: atom({\r\n    key: 'Backspace',\r\n    default: null,\r\n  }),\r\n  Enter: atom({\r\n    key: 'Enter',\r\n    default: null,\r\n  }),\r\n  Escape: atom({\r\n    key: 'Escape',\r\n    default: null,\r\n  }),\r\n};\r\n\r\nconst validKeys = [\r\n  'ArrowRight',\r\n  'ArrowLeft',\r\n  'ArrowUp',\r\n  'ArrowDown',\r\n  'Backspace',\r\n  'Enter',\r\n  'Escape',\r\n];\r\n\r\nconst isKeyValid = (key) => validKeys.indexOf(key) !== -1;\r\n\r\nexport const useKeyboardService = () => {\r\n  const history = useHistory();\r\n  const { closePhone } = usePhone();\r\n\r\n  const ArrowRight = useRecoilValue(keyboardState.ArrowRight);\r\n  const ArrowLeft = useRecoilValue(keyboardState.ArrowLeft);\r\n  const ArrowUp = useRecoilValue(keyboardState.ArrowUp);\r\n  const ArrowDown = useRecoilValue(keyboardState.ArrowDown);\r\n  const Backspace = useRecoilValue(keyboardState.Backspace);\r\n  const Enter = useRecoilValue(keyboardState.Enter);\r\n  const Escape = useRecoilValue(keyboardState.Escape);\r\n\r\n  const handlers = useRef(new Map());\r\n  const setEscape = useSetRecoilState<any>(keyboardState.Escape);\r\n  const setBackspace = useSetRecoilState(keyboardState.Backspace);\r\n\r\n  useEffect(\r\n    function registerCustomKeys() {\r\n      handlers.current.set('ArrowRight', ArrowRight);\r\n      handlers.current.set('ArrowLeft', ArrowLeft);\r\n      handlers.current.set('ArrowUp', ArrowUp);\r\n      handlers.current.set('ArrowDown', ArrowDown);\r\n      handlers.current.set('Backspace', Backspace);\r\n      handlers.current.set('Enter', Enter);\r\n      handlers.current.set('Escape', Escape);\r\n    },\r\n    [ArrowDown, ArrowLeft, ArrowRight, ArrowUp, Backspace, Enter, Escape],\r\n  );\r\n\r\n  useEffect(function handleNUIKeyboardMessage() {\r\n    function onKeyUp(event) {\r\n      const { key } = event;\r\n      const callback = handlers.current.get(key);\r\n      if (isKeyValid(key) && callback && callback.call) {\r\n        return callback(event);\r\n      }\r\n    }\r\n\r\n    window.addEventListener('keyup', onKeyUp);\r\n    return () => window.removeEventListener('keyup', onKeyUp);\r\n  }, []);\r\n\r\n  const backspaceHandler = useCallback(\r\n    (event) => {\r\n      if (['input', 'textarea'].includes(event.target.nodeName.toLowerCase())) {\r\n        // Dont anything if we are typing something :)\r\n        return;\r\n      }\r\n      history.goBack();\r\n    },\r\n    [history],\r\n  );\r\n\r\n  useEffect(\r\n    function registerDefaultHandlers() {\r\n      handlers.current.set('Escape', () => closePhone());\r\n      handlers.current.set('Backspace', backspaceHandler);\r\n    },\r\n    [setEscape, setBackspace, history, backspaceHandler, closePhone],\r\n  );\r\n};\r\n","import config from '../../../config/default.json';\r\n\r\nexport const isDefaultWallpaper = (value: string) => {\r\n  const wallpapers = config.wallpapers;\r\n  for (const wallpaper of wallpapers) {\r\n    if (wallpaper.value === value) return true;\r\n  }\r\n};\r\n","import React from 'react';\r\nimport { isDefaultWallpaper } from './apps/settings/utils/isDefaultWallpaper';\r\nimport { useSettings } from './apps/settings/hooks/useSettings';\r\nimport { usePhoneVisibility } from './os/phone/hooks/usePhoneVisibility';\r\nimport { Slide } from '@material-ui/core';\r\n\r\nconst PhoneWrapper: React.FC = ({ children }) => {\r\n  const [settings] = useSettings();\r\n  const { bottom, visibility } = usePhoneVisibility();\r\n\r\n  return (\r\n    <Slide direction=\"up\" timeout={{ enter: 500, exit: 500 }} in={visibility}>\r\n      <div className=\"PhoneWrapper\">\r\n        <div\r\n          className=\"Phone\"\r\n          style={{\r\n            position: 'fixed',\r\n            transformOrigin: 'right bottom',\r\n            transform: `scale(${settings.zoom.value}`,\r\n            bottom,\r\n          }}\r\n        >\r\n          <div\r\n            className=\"PhoneFrame\"\r\n            style={{\r\n              backgroundImage: `url(media/frames/${settings.frame.value})`,\r\n            }}\r\n          />\r\n          <div\r\n            id=\"phone\"\r\n            className=\"PhoneScreen\"\r\n            style={{\r\n              backgroundImage: !isDefaultWallpaper(settings.wallpaper.value)\r\n                ? `url(${settings.wallpaper.value})`\r\n                : `url(media/backgrounds/${settings.wallpaper.value})`,\r\n            }}\r\n          >\r\n            {children}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </Slide>\r\n  );\r\n};\r\n\r\nexport default PhoneWrapper;\r\n","import { useEffect, useMemo, useRef, useState } from 'react';\r\nimport { useRecoilState } from 'recoil';\r\nimport { useSettings } from '../../../apps/settings/hooks/useSettings';\r\nimport { useNotifications } from '../../notifications/hooks/useNotifications';\r\nimport { DEFAULT_ALERT_HIDE_TIME } from '../../notifications/notifications.constants';\r\nimport { phoneState } from './state';\r\n\r\nexport const usePhoneVisibility = () => {\r\n  const [visibility, setVisibility] = useRecoilState(phoneState.visibility);\r\n  const { currentAlert } = useNotifications();\r\n  const [{ zoom }] = useSettings();\r\n\r\n  const [notifVisibility, setNotifVisibility] = useState<boolean>(false);\r\n\r\n  const notificationTimer = useRef<NodeJS.Timeout>();\r\n\r\n  useEffect(() => {\r\n    if (visibility) {\r\n      setNotifVisibility(false);\r\n    }\r\n  }, [visibility]);\r\n\r\n  useEffect(() => {\r\n    if (!visibility && currentAlert) {\r\n      setNotifVisibility(true);\r\n      if (notificationTimer.current) {\r\n        clearTimeout(notificationTimer.current);\r\n        notificationTimer.current = undefined;\r\n      }\r\n      if (currentAlert?.keepWhenPhoneClosed) {\r\n        return;\r\n      }\r\n      notificationTimer.current = setTimeout(() => {\r\n        setNotifVisibility(false);\r\n      }, DEFAULT_ALERT_HIDE_TIME);\r\n    }\r\n  }, [currentAlert, visibility, setVisibility]);\r\n\r\n  const bottom = useMemo(() => {\r\n    if (!visibility) {\r\n      return `${-728 * zoom.value}px`;\r\n    }\r\n    return '0px';\r\n  }, [visibility, zoom]);\r\n\r\n  return {\r\n    bottom,\r\n    visibility: notifVisibility || visibility,\r\n  };\r\n};\r\n","export const DEFAULT_ALERT_HIDE_TIME = 3000;\r\n","import React, { useEffect } from 'react';\r\nimport './Phone.css';\r\nimport './i18n';\r\nimport { Route } from 'react-router-dom';\r\nimport { CallModal } from './os/call/components/CallModal';\r\nimport { HomeApp } from './apps/home/components/Home';\r\nimport { NotificationBar } from './os/notifications/components/NotificationBar';\r\nimport { Navigation } from './os/navigation-bar/components/Navigation';\r\nimport { useSimcardService } from './os/simcard/hooks/useSimcardService';\r\nimport { usePhoneService } from './os/phone/hooks/usePhoneService';\r\nimport { useApps } from './os/apps/hooks/useApps';\r\nimport { useNuiRequest } from 'fivem-nui-react-lib';\r\nimport { useTwitterService } from './apps/twitter/hooks/useTwitterService';\r\nimport { useMatchService } from './apps/match/hooks/useMatchService';\r\nimport { useMarketplaceService } from './apps/marketplace/hooks/useMarketplaceService';\r\nimport { useBankService } from './apps/bank/hooks/useBankService';\r\nimport { useMessagesService } from './apps/messages/hooks/useMessageService';\r\nimport { usePhotoService } from './apps/camera/hooks/usePhotoService';\r\nimport { isSettingsSchemaValid, useSettings } from './apps/settings/hooks/useSettings';\r\nimport { useCallService } from './os/call/hooks/useCallService';\r\nimport { useDialService } from './apps/dialer/hooks/useDialService';\r\nimport InjectDebugData from './os/debug/InjectDebugData';\r\nimport { PhoneSnackbar } from './ui/components/PhoneSnackbar';\r\nimport { NotificationAlert } from './os/notifications/components/NotificationAlert';\r\nimport { useCallModal } from './os/call/hooks/useCallModal';\r\nimport WindowSnackbar from './ui/components/WindowSnackbar';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { useSnackbar } from './ui/hooks/useSnackbar';\r\nimport { PhoneEvents } from '../../typings/phone';\r\nimport { useKeyboardService } from './os/keyboard/hooks/useKeyboardService';\r\nimport PhoneWrapper from './PhoneWrapper';\r\n\r\nimport dayjs from 'dayjs';\r\nimport DefaultConfig from '../../config.json';\r\n\r\nfunction Phone() {\r\n  const { t, i18n } = useTranslation();\r\n\r\n  const { apps } = useApps();\r\n\r\n  const [settings] = useSettings();\r\n\r\n  const { addAlert } = useSnackbar();\r\n\r\n  const Nui = useNuiRequest();\r\n\r\n  // Set language from local storage\r\n  // This will only trigger on first mount & settings changes\r\n  useEffect(() => {\r\n    i18n.changeLanguage(settings.language.value).catch((e) => console.error(e));\r\n  }, [i18n, settings.language]);\r\n\r\n  useEffect(() => {\r\n    if (!isSettingsSchemaValid()) {\r\n      addAlert({\r\n        message: t('SETTINGS.MESSAGES.INVALID_SETTINGS'),\r\n        type: 'error',\r\n      });\r\n    }\r\n    // We only want to run this on first mount of the phone,\r\n    // so we leave an empty dep array. Otherwise, we hit a max depth error.\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  useKeyboardService();\r\n  usePhoneService();\r\n  useSimcardService();\r\n  useTwitterService();\r\n  useMatchService();\r\n  useMarketplaceService();\r\n  useBankService();\r\n  useMessagesService();\r\n  usePhotoService();\r\n  useCallService();\r\n  useDialService();\r\n\r\n  const { modal: callModal } = useCallModal();\r\n\r\n  return (\r\n    <div>\r\n      <WindowSnackbar />\r\n      <PhoneWrapper>\r\n        <NotificationBar />\r\n        <div className=\"PhoneAppContainer\">\r\n          <>\r\n            <Route exact path=\"/\" component={HomeApp} />\r\n            {callModal && <Route exact path=\"/call\" component={CallModal} />}\r\n            {apps.map((App) => (\r\n              <App.Route key={App.id} />\r\n            ))}\r\n          </>\r\n          <NotificationAlert />\r\n          <PhoneSnackbar />\r\n        </div>\r\n        <Navigation />\r\n      </PhoneWrapper>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Phone;\r\n\r\nInjectDebugData<any>([\r\n  {\r\n    app: 'PHONE',\r\n    method: PhoneEvents.SET_VISIBILITY,\r\n    data: true,\r\n  },\r\n  {\r\n    app: 'PHONE',\r\n    method: PhoneEvents.SET_PHONE_READY,\r\n    data: true,\r\n  },\r\n  {\r\n    app: 'PHONE',\r\n    method: PhoneEvents.SET_TIME,\r\n    data: dayjs().format('hh:mm'),\r\n  },\r\n  {\r\n    app: 'PHONE',\r\n    method: PhoneEvents.SET_CONFIG,\r\n    data: DefaultConfig,\r\n  },\r\n]);\r\n","import { useNuiEvent } from 'fivem-nui-react-lib';\r\nimport { useSetRecoilState } from 'recoil';\r\nimport { PhoneEvents } from '../../../../../typings/phone';\r\nimport { phoneState } from './state';\r\n\r\nexport const usePhoneService = () => {\r\n  const setVisibility = useSetRecoilState(phoneState.visibility);\r\n  const setResourceConfig = useSetRecoilState(phoneState.resourceConfig);\r\n  const setPhoneTime = useSetRecoilState(phoneState.phoneTime);\r\n  useNuiEvent('PHONE', PhoneEvents.SET_VISIBILITY, setVisibility);\r\n  useNuiEvent('PHONE', PhoneEvents.SET_CONFIG, setResourceConfig);\r\n  useNuiEvent('PHONE', PhoneEvents.SET_TIME, setPhoneTime);\r\n};\r\n","import { useSetRecoilState } from 'recoil';\r\nimport { matchState } from './state';\r\nimport { useTranslation } from 'react-i18next';\r\nimport dayjs from 'dayjs';\r\n\r\nimport { useNuiEvent } from 'fivem-nui-react-lib';\r\nimport { Profile, FormattedProfile, Match, MatchEvents } from '../../../../../typings/match';\r\nimport { IAlert, useSnackbar } from '../../../ui/hooks/useSnackbar';\r\n\r\nexport const useMatchService = () => {\r\n  const { addAlert } = useSnackbar();\r\n  const { t } = useTranslation();\r\n  const setNoProfileExists = useSetRecoilState(matchState.noProfileExists);\r\n  const setProfiles = useSetRecoilState(matchState.profiles);\r\n  const setProfile = useSetRecoilState(matchState.myProfile);\r\n  const setMatches = useSetRecoilState(matchState.matches);\r\n  const setErrorLoadingMatches = useSetRecoilState(matchState.errorLoadingMatches);\r\n  const setErrorLoadingProfiles = useSetRecoilState(matchState.errorLoadingProfiles);\r\n\r\n  const handleAddAlert = ({ message, type }: IAlert) => {\r\n    addAlert({\r\n      message: t(message),\r\n      type,\r\n    });\r\n  };\r\n\r\n  function formatProfile(profile: Profile): FormattedProfile | null {\r\n    return {\r\n      ...profile,\r\n      tagList: profile.tags.split(',').filter((t) => t), // remove any empty tags\r\n      lastActiveFormatted: dayjs.unix(profile.lastActive).format(t('DATE_TIME_FORMAT')),\r\n      viewed: false,\r\n    };\r\n  }\r\n\r\n  const _setProfiles = (profiles: Profile[]): void => {\r\n    setProfiles(profiles.map(formatProfile));\r\n  };\r\n  const _setProfile = (profile: Profile) => {\r\n    if (!profile) {\r\n      setNoProfileExists(true);\r\n    } else {\r\n      setNoProfileExists(false);\r\n      setProfile(formatProfile(profile));\r\n    }\r\n  };\r\n  const _handleGetProfilesFailed = (alert: IAlert): void => {\r\n    handleAddAlert(alert);\r\n    setErrorLoadingProfiles(true);\r\n  };\r\n\r\n  const _setMatches = (matches: Match[]): void => {\r\n    setMatches(\r\n      matches.map((match) => ({\r\n        ...match,\r\n        tagList: match.tags.split(',').filter((t) => t), // remove any empty tags\r\n        lastActiveFormatted: dayjs.unix(match.lastActive).format(t('DATE_TIME_FORMAT')),\r\n        matchedAtFormatted: dayjs.unix(match.matchedAt).format(t('DATE_TIME_FORMAT')),\r\n      })),\r\n    );\r\n  };\r\n\r\n  const _handleGetMatchesFailed = (alert: IAlert): void => {\r\n    handleAddAlert(alert);\r\n    setErrorLoadingMatches(true);\r\n  };\r\n\r\n  const _handleUpdateProfile = (profile: Profile) => {\r\n    _setProfile(profile);\r\n    handleAddAlert({ message: 'APPS_MATCH_UPDATE_PROFILE_SUCCEEDED', type: 'info' });\r\n  };\r\n\r\n  useNuiEvent('MATCH', MatchEvents.GET_PROFILES_SUCCESS, _setProfiles);\r\n  useNuiEvent('MATCH', MatchEvents.GET_PROFILES_FAILED, _handleGetProfilesFailed);\r\n  useNuiEvent('MATCH', MatchEvents.GET_MY_PROFILE_SUCCESS, _setProfile);\r\n  useNuiEvent('MATCH', MatchEvents.GET_MY_PROFILE_FAILED, handleAddAlert);\r\n  useNuiEvent('MATCH', MatchEvents.GET_MATCHES_SUCCESS, _setMatches);\r\n  useNuiEvent('MATCH', MatchEvents.GET_MATCHES_FAILED, _handleGetMatchesFailed);\r\n  useNuiEvent('MATCH', MatchEvents.SAVE_LIKES_FAILED, handleAddAlert);\r\n  useNuiEvent('MATCH', MatchEvents.NEW_MATCH, handleAddAlert);\r\n  useNuiEvent('MATCH', MatchEvents.UPDATE_MY_PROFILE_SUCCESS, _handleUpdateProfile);\r\n  useNuiEvent('MATCH', MatchEvents.UPDATE_MY_PROFILE_FAILED, handleAddAlert);\r\n  useNuiEvent('MATCH', MatchEvents.CREATE_MY_PROFILE_SUCCESS, _handleUpdateProfile);\r\n  useNuiEvent('MATCH', MatchEvents.CREATE_MY_PROFILE_FAILED, handleAddAlert);\r\n  return {};\r\n};\r\n","import { useNuiEvent } from 'fivem-nui-react-lib';\r\nimport {\r\n  MarketplaceBroadcastAddDTO,\r\n  MarketplaceDeleteDTO,\r\n  MarketplaceEvents,\r\n} from '../../../../../typings/marketplace';\r\nimport { useMarketplaceActions } from './useMarketplaceActions';\r\nimport { useCallback } from 'react';\r\n\r\nexport const useMarketplaceService = () => {\r\n  const { addListing, deleteListing } = useMarketplaceActions();\r\n\r\n  const addListingHandler = useCallback(\r\n    (resp: MarketplaceBroadcastAddDTO) => {\r\n      addListing(resp.listing);\r\n    },\r\n    [addListing],\r\n  );\r\n\r\n  const deleteListingHandler = useCallback(\r\n    (listing: MarketplaceDeleteDTO) => {\r\n      deleteListing(listing.id);\r\n    },\r\n    [deleteListing],\r\n  );\r\n\r\n  useNuiEvent<MarketplaceBroadcastAddDTO>(\r\n    'MARKETPLACE',\r\n    MarketplaceEvents.BROADCAST_ADD,\r\n    addListingHandler,\r\n  );\r\n\r\n  useNuiEvent<MarketplaceDeleteDTO>(\r\n    'MARKETPLACE',\r\n    MarketplaceEvents.BROADCAST_DELETE,\r\n    deleteListingHandler,\r\n  );\r\n};\r\n","import { useSetRecoilState } from 'recoil';\r\nimport { useNuiEvent } from 'fivem-nui-react-lib';\r\nimport { photoState } from './state';\r\nimport { PhotoEvents } from '../../../../../typings/photo';\r\n\r\nexport const usePhotoService = () => {\r\n  const setPhotos = useSetRecoilState(photoState.photos);\r\n  useNuiEvent('CAMERA', PhotoEvents.SEND_PHOTOS, setPhotos);\r\n};\r\n","import { useEffect, useState } from 'react';\r\nimport { useSetRecoilState } from 'recoil';\r\nimport { useCall } from './useCall';\r\n\r\nimport { CallEvents, ActiveCall } from '../../../../../typings/call';\r\n// import InjectDebugData from '../../debug/InjectDebugData';\r\nimport { useCallModal } from './useCallModal';\r\nimport { useHistory, useLocation } from 'react-router-dom';\r\nimport { callerState } from './state';\r\nimport { useCallNotifications } from './useCallNotifications';\r\nimport { useNuiEvent } from 'fivem-nui-react-lib';\r\n\r\n// InjectDebugData<CallProps | boolean>([\r\n//   {\r\n//     app: 'CALL',\r\n//     method: CallEvents.SET_CALLER,\r\n//     data: {\r\n//       accepted: true,\r\n//       isTransmitter: false,\r\n//       transmitter: '603-275-8373',\r\n//       receiver: '603-275-4747',\r\n//       active: true,\r\n//     },\r\n//   },\r\n//   {\r\n//     app: 'CALL',\r\n//     method: CallEvents.SET_CALL_MODAL,\r\n//     data: true,\r\n//   },\r\n// ]);\r\n\r\nexport const useCallService = () => {\r\n  const { modal } = useCallModal();\r\n  const history = useHistory();\r\n  const { pathname } = useLocation();\r\n\r\n  const { call, setCall } = useCall();\r\n\r\n  const { setNotification } = useCallNotifications();\r\n\r\n  const setModal = useSetRecoilState(callerState.callModal);\r\n\r\n  const [modalHasBeenOpenedThisCall, setModalOpened] = useState<boolean>(false);\r\n\r\n  useEffect(() => {\r\n    setModalOpened(!!modal);\r\n  }, [modal]);\r\n\r\n  useEffect(() => {\r\n    if (!modal && pathname === '/call') {\r\n      history.replace('/');\r\n    }\r\n    if (modal && !modalHasBeenOpenedThisCall && pathname !== '/call') {\r\n      history.push('/call');\r\n    }\r\n  }, [history, modal, pathname, modalHasBeenOpenedThisCall]);\r\n\r\n  const _setCall = (_call: ActiveCall) => {\r\n    setCall({ ...call, ..._call });\r\n    setNotification(_call);\r\n  };\r\n  useNuiEvent('CALL', CallEvents.SET_CALLER, _setCall);\r\n  useNuiEvent('CALL', CallEvents.SET_CALL_MODAL, setModal);\r\n};\r\n","import { useSetRecoilState } from 'recoil';\r\nimport { useNuiEvent } from 'fivem-nui-react-lib';\r\nimport { dialState } from './state';\r\nimport { CallEvents } from '../../../../../typings/call';\r\nimport { IAlert, useSnackbar } from '../../../ui/hooks/useSnackbar';\r\nimport { useTranslation } from 'react-i18next';\r\n\r\nexport const useDialService = () => {\r\n  const { addAlert } = useSnackbar();\r\n  const { t } = useTranslation();\r\n\r\n  const handleAddAlert = ({ message, type }: IAlert) => {\r\n    addAlert({\r\n      message: t(`APPS_${message}`),\r\n      type,\r\n    });\r\n  };\r\n\r\n  const setHistory = useSetRecoilState(dialState.history);\r\n  useNuiEvent('DIALER', CallEvents.SET_CALL_HISTORY, setHistory);\r\n  useNuiEvent('DIALER', CallEvents.SEND_ALERT, handleAddAlert);\r\n};\r\n","function dispatchEvent({ method, app, data = {} }: { method: string; app: string; data: unknown }) {\r\n  setTimeout(() => {\r\n    window.dispatchEvent(\r\n      new MessageEvent('message', {\r\n        data: {\r\n          app,\r\n          method,\r\n          data,\r\n        },\r\n      }),\r\n    );\r\n  }, 200);\r\n}\r\n/**\r\n * Allows you to mock NUI data from your console by attaching\r\n * to the global window object\r\n * @example\r\n * mockNuiEvent({\r\n *   app: 'NOTES',\r\n *   method: 'setAlert',\r\n *   data: {\r\n *     message: 'CONTACT_ADD_SUCCESS',\r\n *     type: 'success',\r\n *   }\r\n * })\r\n **/\r\nconst attachMockNuiEvent = () => {\r\n  //@ts-ignore\r\n  window.mockNuiEvent = dispatchEvent;\r\n};\r\n\r\nexport default attachMockNuiEvent;\r\n","import '@babel/polyfill';\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { HashRouter } from 'react-router-dom';\r\nimport { RecoilRoot } from 'recoil';\r\nimport * as Sentry from '@sentry/react';\r\nimport { Integrations } from '@sentry/tracing';\r\nimport './main.css';\r\nimport PhoneConfig from './config/default.json';\r\nimport { PhoneProviders } from './PhoneProviders';\r\nimport attachMockNuiEvent from './os/debug/AttachMockNuiEvent';\r\nimport dayjs from 'dayjs';\r\nimport relativeTime from 'dayjs/plugin/relativeTime';\r\nimport updateLocale from 'dayjs/plugin/updateLocale';\r\n\r\ndayjs.extend(relativeTime);\r\ndayjs.extend(updateLocale);\r\n\r\n// Enable Sentry when config setting is true and when in prod\r\nif (PhoneConfig.SentryErrorMetrics && process.env.NODE_ENV !== 'development') {\r\n  Sentry.init({\r\n    dsn: 'https://71fff4e8f11543fa8dbe7acd0f94fb5d@o478949.ingest.sentry.io/5581619',\r\n    autoSessionTracking: true,\r\n    integrations: [new Integrations.BrowserTracing()],\r\n    // We recommend adjusting this value in production, or using tracesSampler\r\n    // for finer control\r\n    tracesSampleRate: 1.0,\r\n  });\r\n}\r\n\r\n// window.mockNuiEvent is restricted to development env only\r\nif (process.env.NODE_ENV === 'development') attachMockNuiEvent();\r\n\r\nReactDOM.render(\r\n  <HashRouter>\r\n    <RecoilRoot>\r\n      <PhoneProviders />\r\n    </RecoilRoot>\r\n  </HashRouter>,\r\n  document.getElementById('root'),\r\n);\r\n","import React from 'react';\r\nimport { ThemeProvider } from '@material-ui/core';\r\nimport { NotificationsProvider } from './os/notifications/providers/NotificationsProvider';\r\nimport { usePhoneTheme } from './os/phone/hooks/usePhoneTheme';\r\nimport SnackbarProvider from './ui/providers/SnackbarProvider';\r\nimport Phone from './Phone';\r\nimport { NuiProvider } from 'fivem-nui-react-lib';\r\nimport { SoundProvider } from './os/sound/providers/SoundProvider';\r\n\r\nexport const PhoneProviders = () => {\r\n  const currentTheme = usePhoneTheme();\r\n  return (\r\n    <NuiProvider resource=\"npwd\">\r\n      <ThemeProvider theme={currentTheme}>\r\n        <SoundProvider>\r\n          <NotificationsProvider>\r\n            <SnackbarProvider>\r\n              <Phone />\r\n            </SnackbarProvider>\r\n          </NotificationsProvider>\r\n        </SoundProvider>\r\n      </ThemeProvider>\r\n    </NuiProvider>\r\n  );\r\n};\r\n"],"sourceRoot":""}